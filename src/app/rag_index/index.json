{
  "version": 1,
  "chunk_lines": 60,
  "chunks": [
    {
      "path": "README.md",
      "start_line": 1,
      "end_line": 60,
      "text": "[![Unittest](https://github.com/cfsengineering/CEASIOMpy/actions/workflows/unittests.yml/badge.svg)](https://github.com/cfsengineering/CEASIOMpy/actions/workflows/unittests.yml)\n[![Integration tests](https://github.com/cfsengineering/CEASIOMpy/actions/workflows/integrationtests.yml/badge.svg)](https://github.com/cfsengineering/CEASIOMpy/actions/workflows/integrationtests.yml)\n[![Codecov](https://codecov.io/gh/cfsengineering/CEASIOMpy/branch/main/graph/badge.svg?token=d6cyUEOmOQ)](https://codecov.io/gh/cfsengineering/CEASIOMpy)\n[![Codacy Badge](https://app.codacy.com/project/badge/Grade/a2bd41b9be294e578382ca3f20281c85)](https://www.codacy.com/gh/cfsengineering/CEASIOMpy/dashboard?utm_source=github.com&amp;utm_medium=referral&amp;utm_content=cfsengineering/CEASIOMpy&amp;utm_campaign=Badge_Grade)\n[![Black code style](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)\n[![License](https://img.shields.io/badge/license-Apache%202-blue.svg)](https://github.com/cfsengineering/CEASIOMpy/blob/main/LICENSE)\n\n# CEASIOMpy\n\n<img align=\"right\" width=\"300\" height=\"300\" src=\"documents/logos/CEASIOMpy_main_logos.png\">\n\nCEASIOMpy is an open source conceptual aircraft design environment which can be used to set up complex design and optimisation workflows for both conventional and unconventional aircraft configurations.\n\nCEASIOMpy is mostly written in Python but it also depends on third-party libraries and software (like [SU2](https://su2code.github.io/) for the CFD calculation).\n\nAll input geometries are based on the open-standard format [CPACS](https://www.cpacs.de/), a *Common Parametric Aircraft Configuration Schema*. It uses a parametric definition for air transportation systems which is developed by the German Aerospace Center [DLR](https://www.dlr.de/).\n\n:scroll: CEASIOMpy is maintained by [CFS Engineering](https://cfse.ch/) and [Airinnova](https://airinnova.se/). CEASIOMpy is under the [Apache License 2.0](https://github.com/cfsengineering/CEASIOMpy/blob/main/LICENSE).\n\n:book: The Documentation of CEASIOMpy is integrated in this repository and can be read in documents like this one. Follow links to find the information that you are looking for.\n\n## Table of contents\n\n- [CEASIOMpy](#ceasiompy)\n  - [Table of contents](#table-of-contents)\n  - [Installation](#installation)\n      - [Recommended storage](#recommended-storage)\n    - [Linux/macOS](#linuxmacos)\n    - [Windows](#windows)\n      - [1. Download CEASIOMpy Repository](#1-download-ceasiompy-repository)\n      - [2. Install WSL with Ubuntu (if not done already)](#2-install-wsl-with-ubuntu-if-not-done-already)\n      - [3. Install the necesssary softwares](#3-install-the-necesssary-softwares)\n    - [Windows users](#windows-users)\n    - [Demo](#demo)\n    - [Test cases](#test-cases)\n    - [Run CEASIOMpy](#run-ceasiompy)\n    - [Examples of workflows](#examples-of-workflows)\n    - [Available modules](#available-modules)\n      - [General modules](#general-modules)\n      - [Geometry and Mesh](#geometry-and-mesh)\n      - [Aerodynamics](#aerodynamics)\n      - [Weight and Balance](#weight-and-balance)\n      - [Mission Analysis](#mission-analysis)\n      - [Structure](#structure)\n      - [Data Analysis and Storage](#data-analysis-and-storage)\n  - [Contributing](#contributing)\n  - [More information](#more-information)\n  - [Cite us](#cite-us)\n\n## Online Version (in development)\n\nVisit: https://ceasiompy.com for an overview of what this repository has to offer.\n\n## Installation\n\n### Linux/macOS\n\nOn Linux/macOS, run the installer to set up the conda environment and optional tools (some scripts are still under development):\n\n```bash"
    },
    {
      "path": "README.md",
      "start_line": 61,
      "end_line": 120,
      "text": "git clone https://github.com/cfsengineering/CEASIOMpy\ncd CEASIOMpy\n./scripts/install.sh\nceasiompy_run --g\n```\n\nFor Windows users please use the online version at https://ceasiompy.com\n\n### Create Docker Container (Windows, Optional)\nA video which explains how to ![install](installation/DOCKER_INSTALLATION.md) CEASIOMpy on Docker is now available!\n[![CEASIOMpy Docker Installation](installation/docker_installation.png)](https://www.youtube.com/watch?v=KTS1-6AsReU)\n\n### Demo\n\n[![CEASIOMpy GUI Video tutorial (Test case 2)](./test_cases/test_case_2/testcase2_startvideo.png)](https://www.youtube.com/watch?v=d-AaSrF5g3k)\n\n### Test cases\n\nThese test cases are there to learn how to use CEASIOMpy. You will probably also learn a few things about the CPACS format. You can also run these tests to verify that everything is installed and working as expected as they cover different possible ways of using CEASIOMpy. Be sure you finish the [installation](installation/INSTALLATION.md) before you try them.\n\n- [Test case 1](test_cases/test_case_1/README.md) : Run a simple workflow\n- [Test case 2](test_cases/test_case_2/README.md) : Create and run a workflow with the Graphical User Interface (Video tutorial)\n- [Test case 3](test_cases/test_case_3/README.md) : Create and run a workflow with the Graphical User Interface\n- [Test case 4](test_cases/test_case_4/README.md) : Create and run a from a command line\n- [Test case 5](test_cases/test_case_5/README.md) : Create and run a from a configuration file\n\n### Run CEASIOMpy\n\n- **Run CEASIOMpy with a GUI to build the workflow**\n\n    If you run CEASIOMpy with the following command, you can build the workflow with a graphical user interface.\n\n    ```bash\n    ceasiompy_run --gui\n    ```\n\n- **Run CEASIOMpy with a command line to build the workflow**\n\n    If you run CEASIOMpy with the following command, you can build the workflow directly by defining the CPACS files and the modules you want to use.\n\n    ```bash\n    ceasiompy_run -m test_files/CPACSfiles/d150.xml PyAVL\n    ```\n\nFollow the [test cases](#test-cases) to discover the different way of using CEASIOMpy.\n\n### Available modules\n\nThere are many different modules available in CEASIOMpy that can be combined to create different workflows. The list of available modules is shown below. The modules' statuses are marked as follows:\n\n:heavy_check_mark: : The module should work as expected. If you find bugs, do not hesitate to report them (more details [here](CONTRIBUTING.md#reporting-bugs)).\n\n:warning: : The module does not work as expected. It is not a bug, but some features or data handling are not yet compatible with the new file structure. Check the [Kanban Board](https://github.com/cfsengineering/CEASIOMpy/projects/1) to see planned and in-progress features.\n\n:x: : The module does not work at all. Some functions have been written, but need a lot of changes to be compatible with the rest of CEASIOMpy.\n\n<img align=\"right\" height=\"80\" src=\"documents/logos/CEASIOMpy_banner_main.png\">\n\n#### General modules\n"
    },
    {
      "path": "README.md",
      "start_line": 121,
      "end_line": 180,
      "text": "- [Optimisation](src/ceasiompy/Optimisation/README.md) :x:\n- [SMTrain](src/ceasiompy/SMTrain/README.md) :heavy_check_mark:\n- [ThermoData](src/ceasiompy/ThermoData/README.md) :heavy_check_mark:\n\n<img align=\"right\" height=\"80\" src=\"documents/logos/CEASIOMpy_banner_geometry.png\">\n\n#### Geometry and Mesh\n\n- [CPACSCreator](src/ceasiompy/CPACSCreator/README.md) :heavy_check_mark:\n- [CPACSUpdater](src/ceasiompy/CPACSUpdater/README.md) :heavy_check_mark:\n- [CPACS2GMSH](src/ceasiompy/CPACS2GMSH/README.md) :heavy_check_mark:\n\n<img align=\"right\" height=\"80\" src=\"documents/logos/CEASIOMpy_banner_aero.png\">\n\n#### Aerodynamics\n\n- [CLCalculator](src/ceasiompy/CLCalculator/README.md) :heavy_check_mark:\n- [PyAVL](src/ceasiompy/PyAVL/README.md) :heavy_check_mark:\n- [SU2Run](src/ceasiompy/SU2Run/README.md) :heavy_check_mark:\n- [SkinFriction](src/ceasiompy/SkinFriction/README.md) :heavy_check_mark:\n\n<img align=\"right\" height=\"80\" src=\"documents/logos/CEASIOMpy_banner_weights.png\">\n\n#### Weight and Balance\n\n- BalanceConventional :warning:\n- BalanceUnconventional :warning:\n- [WeightConventional](./src/ceasiompy/WeightConventional/README.md) :warning:\n- WeightUnconventional :warning:\n\n<img align=\"right\" height=\"80\" src=\"documents/logos/CEASIOMpy_banner_mission.png\">\n\n#### Mission Analysis\n\n- Range :warning:\n- [StaticStability](./src/ceasiompy/StaticStability/README.md) :heavy_check_mark:\n- [DynamicStability](./src/ceasiompy/DynamicStability/README.md) :heavy_check_mark:\n\n<img align=\"right\" height=\"80\" src=\"documents/logos/CEASIOMpy_banner_structure.png\">\n\n#### Structure\n\n- [AeroFrame](./src/ceasiompy/AeroFrame/README.md) :heavy_check_mark:\n\n#### Data Analysis and Storage\n\n- [Database](./src/ceasiompy/Database/README.md) :heavy_check_mark:\n\n## Contributing\n\nCEASIOMpy is an open source project and we welcome contributions from everyone. Some CEASIOMpy modules have been developed by students as part of their internship or master thesis.\n\nIf you want to contribute to the development of CEASIOMpy, please read the document [CONTRIBUTING.md](CONTRIBUTING.md).\n\n## More information\n\n- [CEASIOMpy YouTube channel](https://www.youtube.com/channel/UCcGsFJV29os1Zzv66YKFRZQ)\n- [CFS Engineering](https://cfse.ch/)\n- [Airinnova](https://airinnova.se/)\n"
    },
    {
      "path": "README.md",
      "start_line": 181,
      "end_line": 210,
      "text": "## Upgrading environment\n\nSometimes deleting cache helps.\n\n```bash\nsudo find . -name \"__pycache__\" -type d -prune -exec rm -rf {} +\nfind . -name \"*.pyc\" -type f -delete\n```\n\nOr upgrading the environment.\n\n```bash\nconda env update -f environment.yml\n```\n\n## Cite us\n\nThis respository may be cited via BibTex as:\n```\n@software{CEASIOMpy,\n  author = {\n    Benedetti G. and\n    Deligny L. and\n    Jungo A.\n},\n  title = {CEASIOMpy: a python Aircraft Design environment},\n  url = {https://github.com/cfsengineering/CEASIOMpy},\n  year = {2025},\n}\n```"
    },
    {
      "path": "src/ceasiompy/AeroFrame/README.md",
      "start_line": 1,
      "end_line": 54,
      "text": "\n<img align=\"right\" height=\"70\" src=\"../../../documents/logos/CEASIOMpy_banner_structure.png\">\n\n# AeroFrame\n\n**Categories:** Aeroelasticity, vortex lattice method, linear beam theory.\n\n**State**: :heavy_check_mark:\n\n<img align=\"right\" height=\"120\" src=\"files/avl_logo.png\">\n<img align=\"right\" height=\"120\" src=\"files/framat_logo.png\">\n\n`AeroFrame` module allows to perform low-fidelity steady aeroelastic calculations. It couples the [Athena Vortex Lattice (AVL)](https://web.mit.edu/drela/Public/web/avl/) solver used in `PyAVL` module and [FramAT](https://framat.readthedocs.io/en/latest/). A finite element method implementation of the linear beam equations are combined with the vortex lattice method to compute the wing deformation under specific steady flight conditions.\n\n## Inputs\n\n`AeroFrame` takes as input a CPACS file, the aircraft geometry is read to create the VLM model for the main wing. The flight conditions have to be defined within an aeromap, as well as the number of vortex panels to use. The structural and cross-section properties need to be specified for the use of the structural model.\n\n## Analyses\n\n`AeroFrame` first computes the aerodynamic forces acting on each wing panel, which are given to the structural model to compute the deformation. This deformation results in an new geometry used to compute the updated aerodynamic forces. This iterative process continues until the wing deformation achieves convergence, or stops if the maximum number of iterations is reached.\n\n## Outputs\n\n`AeroFrame` outputs a CPACS file with all the structural parameters and wing tip deflection written. In addition, the following files are saved at each iterations:\n- All AVL forces outputs, see [`PyAVL` documentation](../PyAVL/README.md) for more details.\n- `deformed_wing.png` : plot of the deformed wing shape compared to the undeformed one.\n- `structural_mesh.png` : plot of the structural nodes and vortex lattice panels.\n- `translations_rotations.png` : plot of the results of the structural model (translations and rotations) along the wing span.\n- `deformed.csv` : details of the structural model (coordinates, forces, cross-section...) of the deformed wing.\n- `undeformed.csv` : details of the structural model (coordinates, forces, cross-section...) of the undeformed wing.\n\nAt the end of the calculation the convergence of the wing tip deflection as well as the residual are plotted in `deflection_convergence.png`. \n\n## Installation or requirements\n\nFollowing the automatic installation procedure on the [CEASIOMpy installation page](../../installation/INSTALLATION.md) should install `AeroFrame` automatically with the other tools.\n\n## Limitations\n\n`AeroFrame` uses a Vortex Lattice Method solver coupled with linear beam equations:\n- The flow is quasi-steady and ideal: incompressible, irrotational, and inviscid.\n- The flow is low-subsonic: [Prandlt-Glauert transformation](https://en.wikipedia.org/wiki/Prandtl%E2%80%93Glauert_transformation) is used to adapt the equations up to Mach 0.6.\n- Lifting surfaces are assumed to be thin, the thickness is not taken into account.\n- The angle of attack and sideslip must be small.\n- Viscous effects, turbulence or boundary layer phenomena are not solved at all.\n- Displacements and rotations should be small.\n- The cross-section of the wing is assumed infinitely rigid on its own plane, and remains planar after deformation.\n\n## More information\n\n- [AVL documentation.](https://web.mit.edu/drela/Public/web/avl/AVL_User_Primer.pdf)\n- [AVL website.](https://web.mit.edu/drela/Public/web/avl/)\n- [FramAT documentation.](https://framat.readthedocs.io/en/latest/)"
    },
    {
      "path": "src/ceasiompy/AeroFrame/__specs__.py",
      "start_line": 1,
      "end_line": 60,
      "text": "\"\"\"\nCEASIOMpy: Conceptual Aircraft Design Software\n\nDeveloped by CFS ENGINEERING, 1015 Lausanne, Switzerland\n\nGUI Interface of Aeroframe.\n\"\"\"\n\n# Imports\nimport streamlit as st\n\nfrom cpacspy.cpacspy import CPACS\n\nfrom ceasiompy.utils.guiobjects import (\n    int_vartype,\n    list_vartype,\n    float_vartype,\n)\n\nfrom ceasiompy.PyAVL import (\n    AVL_DISTR_XPATH,\n    AVL_NSPANWISE_XPATH,\n    AVL_NCHORDWISE_XPATH,\n)\nfrom ceasiompy.AeroFrame import (\n    FRAMAT_IX_XPATH,\n    FRAMAT_IY_XPATH,\n    FRAMAT_AREA_XPATH,\n    FRAMAT_DENSITY_XPATH,\n    FRAMAT_NB_NODES_XPATH,\n    FRAMAT_SHEARMODULUS_XPATH,\n    FRAMAT_YOUNGMODULUS_XPATH,\n    AEROFRAME_TOLERANCE_XPATH,\n    AEROFRAME_MAXNB_ITERATIONS_XPATH,\n)\n\n\n# Functions\n\n\ndef gui_settings(cpacs: CPACS) -> None:\n    tixi = cpacs.tixi\n\n    with st.expander(\n        label=\"Panel Settings\",\n        expanded=True,\n    ):\n        list_vartype(\n            tixi=tixi,\n            name=\"Panel distribution\",\n            key=\"panel_distribution\",\n            default_value=[\"cosine\", \"sine\", \"equal\"],\n            description=\"Select the type of distribution.\",\n            xpath=AVL_DISTR_XPATH,\n        )\n\n        int_vartype(\n            tixi=tixi,\n            name=\"Number of chordwise vortices\",\n            key=\"chordwise_vortices_nb\","
    },
    {
      "path": "src/ceasiompy/AeroFrame/__specs__.py",
      "start_line": 61,
      "end_line": 120,
      "text": "            default_value=20,\n            description=\"Select the number of chordwise vortices.\",\n            xpath=AVL_NCHORDWISE_XPATH,\n        )\n\n        int_vartype(\n            tixi=tixi,\n            name=\"Number of spanwise vortices\",\n            key=\"spanwise_vortices_nb\",\n            default_value=30,\n            description=\"Select the number of spanwise vortices.\",\n            xpath=AVL_NSPANWISE_XPATH,\n        )\n\n    with st.container(\n        border=True,\n    ):\n        st.markdown(\"#### Convergence Settings\")\n\n        int_vartype(\n            tixi=tixi,\n            xpath=AEROFRAME_MAXNB_ITERATIONS_XPATH,\n            default_value=8,\n            description=\"Maximum number of iterations of the aeroelastic-loop.\",\n            name=\"Maximum number of iterations\",\n            key=\"aeroframe_n_iter_max\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=AEROFRAME_TOLERANCE_XPATH,\n            default_value=1e-3,\n            name=\"Convergence Criterion (Tolerance)\",\n            description=\"Tolerance for convergence of the wing deformation.\",\n            key=\"aeroframe_conv_criterion\",\n        )\n\n    with st.container(\n        border=True,\n    ):\n        st.markdown(\"#### FramAT Settings\")\n\n        int_vartype(\n            tixi=tixi,\n            xpath=FRAMAT_NB_NODES_XPATH,\n            default_value=15,\n            description=\"Enter number of nodes for the beam mesh.\",\n            name=\"Number of beam nodes\",\n            key=\"aeroframe_beam_nodes\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=FRAMAT_YOUNGMODULUS_XPATH,\n            description=\"Enter the Young modulus of the wing material in GPa.\",\n            name=\"Young modulus [GPa]\",\n            default_value=70.0,\n            key=\"aeroframe_young_modulus\",\n        )\n"
    },
    {
      "path": "src/ceasiompy/AeroFrame/__specs__.py",
      "start_line": 121,
      "end_line": 168,
      "text": "        float_vartype(\n            tixi=tixi,\n            xpath=FRAMAT_SHEARMODULUS_XPATH,\n            name=\"Shear modulus [GPa]\",\n            description=\"Enter the shear modulus of the wing material in GPa.\",\n            default_value=26.0,\n            key=\"aeroframe_shearmodulus\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=FRAMAT_DENSITY_XPATH,\n            default_value=1960.0,\n            description=\"Density of the wing material in kg/m\u00b3.\",\n            key=\"aeroframe_material_density\",\n            name=\"Material density\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=FRAMAT_AREA_XPATH,\n            name=\"Cross-section area\",\n            description=\"Area of the cross-section in m\u00b2.\",\n            default_value=1.0,\n            key=\"aeroframe_cross_section_area\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=FRAMAT_IX_XPATH,\n            name=\"Second moment of area Ix\",\n            description=\"\"\"Second moment of area of the cross-section\n                about the horizontal axis, in m\u2074.\n            \"\"\",\n            default_value=1.0,\n            key=\"cross_section_ix\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=FRAMAT_IY_XPATH,\n            name=\"Second moment of area Iy\",\n            description=\"\"\"Second moment of area of the cross-section\n                about the vertical axis, in m\u2074.\n            \"\"\",\n            default_value=1.0,\n            key=\"cross_section_iy\",\n        )"
    },
    {
      "path": "src/ceasiompy/CLCalculator/README.md",
      "start_line": 1,
      "end_line": 54,
      "text": "<img align=\"right\" height=\"70\" src=\"../../../documents/logos/CEASIOMpy_banner_aero.png\">\n\n# CLCalculator\n\n**Categories:** Aerodynamics, Flight\n\n**State**: :heavy_check_mark:\n\n`CLCalculator` determines the lift coefficient C<sub>L</sub> of an aircraft to sustain a cruise flight, for a given Mach number, altitude, and mass.\n\n## Inputs\n\n`CLCalculator` only takes as input a CPACS file. The flight conditions and mass must be specified in the CPACS file.\n\n## Analyses\n\n`CLCalculator` determines the Lift coefficient C<sub>L</sub> required to fly with the set of following conditions:\n\n* Mass of the aircraft: M [kg]\n* Mach number: Ma [-]\n* Load Factor: LF [-]\n* Reference surface area: S<sub>ref</sub> [m<sup>2</sup>]\n* Static pressure: P<sub>S</sub> [Pa]\n* Acceleration of gravity: g [m/s<sup>2</sup>]\n\nStatic pressure and acceleration of gravity can be obtained from the altitude (with the module [Ambiance](https://github.com/airinnova/ambiance) installed with CEASIOMpy). The reference surface area: S<sub>ref</sub> is calculated from the aircraft's geometry.\n\nThe Lift force of an aircraft is given by:\n\n$L=\\frac{1}{2}\\cdot q\\cdot S_{ref}\\cdot C_L$\n\nDynamic pressure can be calculated as:\n\n$q = \\frac{1}{2} \\cdot \\gamma \\cdot P_s \\cdot M^2$\n\nand we know the lift force must compensate for the weight of the aircraft (times the load factor), so L=M\u00b7g\u00b7LF and with the first equation, we obtain:\n\n$C_L = \\frac{M \\cdot g \\cdot LF}{q \\cdot S_{ref}}$\n\n## Outputs\n\n The output of `CLCalculator` is the target C<sub>L</sub> value to achieve, SU2 can use this value as input to make a fixed C<sub>L</sub> calculation where the angle of attack will be varied to find the correct C<sub>L</sub>.\n\n## Installation or requirements\n\n`CLCalculator` is a native CEASIOMpy module, hence it is available and installed by default. To run it, you just have to be sure that you are in the CEASIOMpy Conda environment.\n\n## Limitations\n\nWhen you run `CLCalculator` you must choose which mass it will use. However, in reality, the mass of the aircraft will vary during the flight.\n\n## More information\n\n* <https://en.wikipedia.org/wiki/Lift_coefficient>"
    },
    {
      "path": "src/ceasiompy/CLCalculator/__specs__.py",
      "start_line": 1,
      "end_line": 60,
      "text": "\"\"\"\nCEASIOMpy: Conceptual Aircraft Design Software\n\nDeveloped by CFS ENGINEERING, 1015 Lausanne, Switzerland\n\nGUI Interface of CLCalculator.\n\"\"\"\n\n# Imports\nimport streamlit as st\n\nfrom ceasiompy.utils.ceasiompyutils import safe_remove\nfrom ceasiompy.utils.guiobjects import (\n    list_vartype,\n    float_vartype,\n)\n\nfrom cpacspy.cpacspy import CPACS\n\nfrom ceasiompy.CLCalculator import (\n    MASS_TYPES,\n    CLCALC_MASS_TYPE_XPATH,\n    CLCALC_LOAD_FACT_XPATH,\n    CLCALC_CRUISE_ALT_XPATH,\n    CLCALC_CRUISE_MACH_XPATH,\n    CLCALC_CUSTOM_MASS_XPATH,\n    CLCALC_PERC_FUEL_MASS_XPATH,\n)\n\n\n# Functions\n\ndef gui_settings(cpacs: CPACS) -> None:\n    tixi = cpacs.tixi\n\n    with st.container(\n        border=True,\n    ):\n\n        mass_type = list_vartype(\n            tixi=tixi,\n            xpath=CLCALC_MASS_TYPE_XPATH,\n            name=\"Mass Type\",\n            default_value=MASS_TYPES,\n            key=\"mass_type\",\n            description=\"Type of mass to use for CL calculation.\",\n        )\n\n        if mass_type == \"Custom\":\n            float_vartype(\n                tixi=tixi,\n                xpath=CLCALC_CUSTOM_MASS_XPATH,\n                description=\"Mass value user specified (custom).\",\n                name=\"Mass Value.\",\n                default_value=1.0,\n                key=\"custom_mass\",\n            )\n        else:\n            safe_remove(tixi, xpath=CLCALC_CUSTOM_MASS_XPATH)\n"
    },
    {
      "path": "src/ceasiompy/CLCalculator/__specs__.py",
      "start_line": 61,
      "end_line": 103,
      "text": "        if mass_type == r\"%% fuel mass\":\n            float_vartype(\n                tixi=tixi,\n                xpath=CLCALC_PERC_FUEL_MASS_XPATH,\n                default_value=100.0,\n                name=\"Percent fuel mass.\",\n                description=\"Percentage of fuel mass between mTOM and mZFM.\",\n                key=\"percent_fuel_mass\",\n            )\n        else:\n            safe_remove(tixi, xpath=CLCALC_PERC_FUEL_MASS_XPATH)\n\n    with st.container(\n        border=True,\n    ):\n        st.markdown(\"#### Cruise Settings\")\n\n        float_vartype(\n            tixi=tixi,\n            xpath=CLCALC_CRUISE_MACH_XPATH,\n            default_value=0.78,\n            description=\"Aircraft cruise Mach number.\",\n            name=\"Cruise Mach\",\n            key=\"mach_cruise\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=CLCALC_CRUISE_ALT_XPATH,\n            default_value=1000.0,\n            description=\"Aircraft cruise altitude.\",\n            name=\"Cruise Altitude\",\n            key=\"altitude_cruise\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=CLCALC_LOAD_FACT_XPATH,\n            default_value=1.05,\n            description=\"Load factor cruise of aircraft.\",\n            name=\"Load Factor\",\n            key=\"load_factor_cruise\",\n        )"
    },
    {
      "path": "src/ceasiompy/CPACS2GMSH/README.md",
      "start_line": 1,
      "end_line": 60,
      "text": "<img align=\"right\" height=\"70\" src=\"../../../documents/logos/CEASIOMpy_banner_geometry.png\">\n\n# CPACS2GMSH\n\n**Categories:** Geometry, Mesh\n\n**State**: :heavy_check_mark:\n\n<img align=\"right\" height=\"150\" src=\"https://gitlab.onelab.info/gmsh/gmsh/-/raw/a8662def403b8e0327a0f0e6ecf1d8aca1a1f63d/utils/icons/gmsh.png\">\n\n<br />\n\n`CPACS2GMSH` is an automatic mesh generator module for a [CPACS](https://www.cpacs.de) aircraft geometry [[1]](#Alder20) using [GMSH](https://gmsh.info/) ,a finite element mesh generator.\n\nIt's currently possible to choose between two options for 3D meshing of the external domain.\nSelecting the 'Euler' an unstructured mesh is automatically generated in a spherical domain surrounding the aircraft.\nInstead, selecting the 'RANS' option Gmsh will generate only the 2D mesh of the entire aircraft, which will then be processed by the program Pentagrow to generate the structured part that wraps the geometry, then [Tetgen](https://wias-berlin.de/software/tetgen/1.5/doc/manual/manual.pdf) package provides for meshing of the unstructured part. The hybrid mesh obtained will constitute the 3D domain.\n\n\nThe resulting mesh can be used for a CFD calculation by connecting the `SU2Run` module after `CPACS2GMSH` module.\n\n<br />\n\n<p align=\"center\">\n<img height=\"460\" src=\"files/GMSH_D150_sym.png\">\n</p>\n<p align=\"center\">\nSurface mesh of the D150 aircraft, with a symmetry plane\n</p>\n\nBy Euler if an engine (simple or doubleflux) is part of the aircraft geometry, CPACS2GMSH will combine the different nacelle parts in one engine and  will add an intake and exhaust surface that can be used by SU2Run to simulate the engine operation. For doubleflux engines, only one intake surface will be placed on the fan cowl and two exhaust surfaces will be placed on the fan and center cowl.\n\nIf the aircraft geometry contains propeller engines, their blades will be replaced by 2D disk surfaces in order to simulate the propeller engines with SU2 disk actuator model.\n\n<p align=\"center\">\n<img height=\"460\" src=\"files/GMSH_propeller_aircraft.png\">\n</p>\n<p align=\"center\">\nSurface mesh of an aircraft with propeller engines\n</p>\n\n## Inputs\n\n`CPACS2GMSH` takes as input a CPACS file. This is done automatically when it is run in workflow.\n\nMultiple options are available with `CPACS2GMSH`, you can see these options if you run this module from the GUI interface.\n\nGeneral options:\n\n* `Open GMSH GUI : False`\nOpen the gmsh GUI after the generation of the surface mesh (2D) and the domain mesh (3D) to see the mesh. This option is usefully to control the quality of the automated generated mesh or make extra operation with gmsh GUI.\n* `Export propellers : False`\nExport a 2D disk surfaces in order to simulate the propeller engines with SU2 disk actuator model.\n\nMesh type:\n* `Choice the mesh type: Euler or RANS`\nChoose between an unstructured domain (Euler) and an hybrid domain (RANS)\n\nDomain:\n"
    },
    {
      "path": "src/ceasiompy/CPACS2GMSH/README.md",
      "start_line": 61,
      "end_line": 120,
      "text": "* `Use Symmetry : False`\nApply a symmetry operation to the model with a xz symmetry plane in the center of the aircraft. The resulting mesh will only be generated in the y positive domain (only for Euler for now).\n\n* `Farfield size factor : 10.0`\nEnable to control the spherical domain size. The fluid domain surrounding the aircraft is defined with a radius equivalent to the largest xyz aircraft dimension times the `Farfield size factor\n\nMesh options:\n\n* `Farfield : depends on the aircraft` Factor for the mesh size of the farfield surfaces compared to the biggest cell on the surface mesh.\n* `Fuselage : depends on the aircraft` Factor for the mesh size of the farfield surfaces (bigger factor = finer mesh)\n* `Wings : depends on the aircraft` Factor for the mesh size of the farfield surfaces (bigger factor = finer mesh)\n* `Engines : 0.23` Mesh size of the engines surfaces\n* `Propellers : 0.23` Mesh size of the propellers surfaces\n\n:warning: The mesh size values are unitless. They are consistent with the aircraft dimensions units.\n\nRANS options:\n\n* `Number of layer: 20`\nNumber of prismatic element layers\n* `Height of first layer: 3 e-5 mm`\nHeight of the first prismatic cell, touching the wall, in mesh length units.\n* `Max layer thickness: 100 mm`\nThe maximum allowed absolute thickness of the prismatic layer.\n* `Growth ratio: 1.2`\nMax growth ratio accepted between wall-normal edge lengths of consecutive cells in the boundary layer\n* `Growth factor: 1.4`\nGrowth factor between edge lengths of coincident tetrahedra\n* `Feature angle: 40 grad`\nWhenever the dihedral angle of two triangle is smaller than this limit, the resulting edge is understood to represent an actual geometrical feature. Larger angles are treated as resulting from approximation of curved surfaces by linear triangles\n\n\nAdvanced mesh parameters :\n\n* `LE/TE refinement factor : 2.0`\nApply a refinement on the leading and trailing edge of the aircraft wings. the element size at the le/te will be set to the wing mesh size divided by the refinement factor. This refinement decay according to a power law from the edge to 30% of the wing section cord length, where the mesh size is the wing's one.\n* `n power factor : 2`\nPower of the power law of the refinement on LE and TE. \n* `n power field : 0.9`\nValue that changes the measure of fist cells near aircraft parts. Only used for Euler mesh\n* `Refine truncated TE : False`\nFor truncated wing profile, automatically adjust the LE/TE refinement factor such that the mesh size at the TE match the truncated TE thickness .\n* `Auto refine : False`\nApply an automatic refinement of surfaces which are small compare to a mesh element. :warning: With this option activated, the surface mesh generation maybe done two times, which increasing the total meshing time.\n* `Refinement factor of lines in between angled surfaces : 1.5`\nRefining lines that are between two surfaces that are \"far from flat\", as for example the right angle between a wing and the fuselage. Only for RANS, and sometime misses some lines.\n\nEngines :\n\n* `Engine intake position [%] : 20.0`\nEngine intake surface position from the front of the engine fan cowl in percent of the fan cowl length\n* `Engine exhaust position [%] : 20.0`\nEngine exhaust surface position from the back of the engine fan cowl in percent of the fan cowl length, if the engine is doubleflux, and exhaust surface is similarly generated for the center cowl part of the engine.\n\n:warning: It is recommended to check the mesh convergence to know which value gives the best trade-off between the results accuracy and computation time, for your application case.\n\n## Analyses\n\n`CPACS2GMSH` Generate .brep files with TiGL for each part of the aircraft configuration. Then all the parts are imported into GMSH to generates a SU2 mesh file\nfor the euler case, instead a .stl file is generated to be read by pentagrow"
    },
    {
      "path": "src/ceasiompy/CPACS2GMSH/README.md",
      "start_line": 121,
      "end_line": 142,
      "text": "\n## Outputs\n\n`CPACS2GMSH` outputs a SU2 mesh files (.su2), the path to this file is saved in the CPACS file under this xpath: /cpacs/toolspecific/CEASIOMpy/filesPath/su2Mesh.\n\nWith RANS also a configuration file is created in the same directory containing the setup used to generate the hybrid mesh.\n\n## Installation or requirements\n\n`CPACS2GMSH` is a native CEASIOMpy module, hence it is available and installed by default. To run it, you just have to be sure that you are in the CEASIOMpy Conda environment.\n\n## Limitations\n\nAt the time of writing, this module is not able to handle aircraft with control surfaces (they will not be modelled and thus appear in the final mesh).\n\nFor the RANS part, it is only possible to process aircraft consisting of .brep files of category 'fuselage', 'wing', 'engine', 'rotor' and 'propellers'.\n\n## More information\n\n* [CPACS official website](https://www.cpacs.de)\n\n* [GMSH official website](https://gmsh.info/)"
    },
    {
      "path": "src/ceasiompy/CPACS2GMSH/__specs__.py",
      "start_line": 1,
      "end_line": 60,
      "text": "\"\"\"\nCEASIOMpy: Conceptual Aircraft Design Software\n\nDeveloped by CFS ENGINEERING, 1015 Lausanne, Switzerland\n\nGUI Interface of CPACS2GMSH.\n\"\"\"\n\n# Imports\nimport streamlit as st\n\nfrom cpacspy.cpacsfunctions import get_value\nfrom ceasiompy.utils.ceasiompyutils import safe_remove\nfrom ceasiompy.utils.guiobjects import (\n    int_vartype,\n    list_vartype,\n    bool_vartype,\n    float_vartype,\n    dataframe_vartype,\n)\n\nfrom cpacspy.cpacspy import CPACS\nfrom tixi3.tixi3wrapper import Tixi3\n\nfrom ceasiompy.utils.commonxpaths import GEOMETRY_MODE_XPATH\nfrom ceasiompy.CPACS2GMSH import (\n    HAS_PENTAGROW,\n    GMSH_OPEN_GUI_XPATH,\n    GMSH_MESH_TYPE_XPATH,\n    GMSH_SYMMETRY_XPATH,\n    GMSH_FARFIELD_FACTOR_XPATH,\n    GMSH_MESH_SIZE_FARFIELD_XPATH,\n    GMSH_MESH_SIZE_FACTOR_FUSELAGE_XPATH,\n    GMSH_MESH_SIZE_FACTOR_WINGS_XPATH,\n    GMSH_MESH_SIZE_ENGINES_XPATH,\n    GMSH_CTRLSURF_ANGLE_XPATH,\n    GMSH_MESH_SIZE_PROPELLERS_XPATH,\n    GMSH_N_POWER_FACTOR_XPATH,\n    GMSH_N_POWER_FIELD_XPATH,\n    GMSH_REFINE_FACTOR_XPATH,\n    GMSH_REFINE_TRUNCATED_XPATH,\n    GMSH_REFINE_FACTOR_ANGLED_LINES_XPATH,\n    GMSH_AUTO_REFINE_XPATH,\n    GMSH_NUMBER_LAYER_XPATH,\n    GMSH_H_FIRST_LAYER_XPATH,\n    GMSH_MAX_THICKNESS_LAYER_XPATH,\n    GMSH_GROWTH_RATIO_XPATH,\n    GMSH_GROWTH_FACTOR_XPATH,\n    GMSH_FEATURE_ANGLE_XPATH,\n    GMSH_EXPORT_PROP_XPATH,\n    GMSH_INTAKE_PERCENT_XPATH,\n    GMSH_EXHAUST_PERCENT_XPATH,\n    GMSH_SAVE_CGNS_XPATH,\n    GMSH_MESH_CHECKER_XPATH,\n    GMSH_2D_AIRFOIL_MESH_SIZE_XPATH,\n    GMSH_2D_EXT_MESH_SIZE_XPATH,\n    GMSH_2D_FARFIELD_RADIUS_XPATH,\n    GMSH_2D_STRUCTURED_MESH_XPATH,\n    GMSH_2D_FARFIELD_TYPE_XPATH,\n    GMSH_2D_FIRST_LAYER_HEIGHT_XPATH,"
    },
    {
      "path": "src/ceasiompy/CPACS2GMSH/__specs__.py",
      "start_line": 61,
      "end_line": 120,
      "text": "    GMSH_2D_HEIGHT_LENGTH_XPATH,\n    GMSH_2D_WAKE_LENGTH_XPATH,\n    GMSH_2D_LENGTH_XPATH,\n    GMSH_2D_NO_BL_XPATH,\n    GMSH_2D_RATIO_XPATH,\n    GMSH_2D_NB_LAYERS_XPATH,\n    GMSH_2D_MESH_FORMAT_XPATH,\n)\n\n\n# Methods\ndef _load_3d_gui_settings(tixi: Tixi3) -> None:\n\n    with st.expander(\n        label=\"Domain Settings\",\n        expanded=True\n    ):\n        # Domain Group\n        bool_vartype(\n            tixi=tixi,\n            xpath=GMSH_SYMMETRY_XPATH,\n            default_value=False,\n            name=\"Use Symmetry\",\n            key=\"symmetry\",\n            description=\"Create a symmetry condition.\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=GMSH_FARFIELD_FACTOR_XPATH,\n            default_value=10.0,\n            name=\"Farfield size factor\",\n            key=\"farfield_size_factor\",\n            description=\"Farfield size factor compare to the aircraft largest dimension.\",\n        )\n\n    with st.expander(\n        label=\"Mesh Type\",\n        expanded=True,\n    ):\n\n        # default is specific to Pentagrow installed or not\n        default_value = [\"EULER\", \"RANS\"] if HAS_PENTAGROW else [\"EULER\"]\n        euler_rans = list_vartype(\n            tixi=tixi,\n            xpath=GMSH_MESH_TYPE_XPATH,\n            default_value=default_value,\n            name=\"Mesh type\",\n            key=\"mesh_type\",\n            description=\"Choose between Euler and RANS mesh.\",\n        )\n\n        if euler_rans == \"EULER\":\n            with st.container(\n                border=True,\n            ):\n                st.markdown(\"#### Euler Mesh Options\")\n\n                left_col, _, right_col = st.columns(3)\n                with left_col:"
    },
    {
      "path": "src/ceasiompy/CPACS2GMSH/__specs__.py",
      "start_line": 121,
      "end_line": 180,
      "text": "                    # Euler Mesh options\n                    float_vartype(\n                        tixi=tixi,\n                        xpath=GMSH_MESH_SIZE_FARFIELD_XPATH,\n                        default_value=1.0,\n                        name=\"Fuselage mesh size factor\",\n                        key=\"fuselage_mesh_size_factor\",\n                        description=\"\"\"Factor proportional to the biggest cell\n                        on the plane to obtain cell size on the farfield\n                        \"\"\",\n                    )\n\n                with right_col:\n                    float_vartype(\n                        tixi=tixi,\n                        xpath=GMSH_MESH_SIZE_FACTOR_FUSELAGE_XPATH,\n                        default_value=1.0,\n                        name=\"Wings mesh size factor\",\n                        key=\"wing_mesh_size_factor_fuselage\",\n                        description=\"\"\"Factor proportional to fuselage radius\n                            of curvature to obtain cell size on it.\n                        \"\"\",\n                    )\n\n        else:\n            safe_remove(tixi, xpath=GMSH_MESH_SIZE_FARFIELD_XPATH)\n            safe_remove(tixi, xpath=GMSH_MESH_SIZE_FACTOR_FUSELAGE_XPATH)\n\n        # RANS Options\n        if euler_rans == \"RANS\":\n            with st.container(\n                border=True,\n            ):\n                st.markdown(\"#### RANS Mesh Options\")\n\n                float_vartype(\n                    tixi=tixi,\n                    xpath=GMSH_REFINE_FACTOR_ANGLED_LINES_XPATH,\n                    default_value=1.5,\n                    key=\"refine_factor_angled_lines\",\n                    name=\"Refinement factor of lines in between angled surfaces\",\n                    description=\"\"\"\n                        Refinement factor of edges at intersections\n                        that are not flat enough.\n                    \"\"\",\n                )\n\n                int_vartype(\n                    tixi=tixi,\n                    xpath=GMSH_NUMBER_LAYER_XPATH,\n                    default_value=20,\n                    key=\"n_layer\",\n                    name=\"Number of layer\",\n                    description=\"Number of prismatic element layers.\",\n                )\n\n                float_vartype(\n                    tixi=tixi,\n                    xpath=GMSH_H_FIRST_LAYER_XPATH,\n                    default_value=3,"
    },
    {
      "path": "src/ceasiompy/CPACS2GMSH/__specs__.py",
      "start_line": 181,
      "end_line": 240,
      "text": "                    key=\"h_first_layer\",\n                    name=\"Height of first layer\",\n                    description=\"\"\"\n                        Height of the first prismatic cell,\n                        touching the wall, in mesh length units.\n                    \"\"\",\n                )\n\n                float_vartype(\n                    tixi=tixi,\n                    xpath=GMSH_MAX_THICKNESS_LAYER_XPATH,\n                    default_value=100.0,\n                    key=\"max_layer_thickness\",\n                    name=\"Max layer thickness\",\n                    description=\"The maximum allowed absolute thickness of the prismatic layer.\",\n                )\n\n                float_vartype(\n                    tixi=tixi,\n                    xpath=GMSH_GROWTH_RATIO_XPATH,\n                    name=\"Growth ratio\",\n                    default_value=1.2,\n                    key=\"growth_ratio\",\n                    description=\"\"\"The largest allowed ratio between\n                        the wall-normal edge lengths of consecutive cells.\n                    \"\"\",\n                )\n\n                float_vartype(\n                    tixi=tixi,\n                    xpath=GMSH_GROWTH_FACTOR_XPATH,\n                    name=\"Growth factor\",\n                    default_value=1.4,\n                    key=\"growth_factor\",\n                    description=\"\"\"Desired growth factor between\n                        edge lengths of coincident tetrahedra.\n                    \"\"\",\n                )\n\n                float_vartype(\n                    tixi=tixi,\n                    xpath=GMSH_FEATURE_ANGLE_XPATH,\n                    name=\"Feature Angle\",\n                    default_value=40.0,\n                    key=\"feature_angle\",\n                    description=\"\"\"Larger angles are treated as resulting\n                        from approximation of curved surfaces.\n                    \"\"\",\n                )\n        else:\n            safe_remove(tixi, xpath=GMSH_REFINE_FACTOR_ANGLED_LINES_XPATH)\n            safe_remove(tixi, xpath=GMSH_NUMBER_LAYER_XPATH)\n            safe_remove(tixi, xpath=GMSH_H_FIRST_LAYER_XPATH)\n            safe_remove(tixi, xpath=GMSH_MAX_THICKNESS_LAYER_XPATH)\n            safe_remove(tixi, xpath=GMSH_GROWTH_RATIO_XPATH)\n            safe_remove(tixi, xpath=GMSH_GROWTH_FACTOR_XPATH)\n            safe_remove(tixi, xpath=GMSH_FEATURE_ANGLE_XPATH)\n\n    # General Mesh Options\n    with st.expander("
    },
    {
      "path": "src/ceasiompy/CPACS2GMSH/__specs__.py",
      "start_line": 241,
      "end_line": 300,
      "text": "        label=\"General Mesh Options\",\n        expanded=True,\n    ):\n        float_vartype(\n            tixi=tixi,\n            xpath=GMSH_MESH_SIZE_FACTOR_WINGS_XPATH,\n            default_value=1.0,\n            name=\"Wings mesh size factor\",\n            key=\"wing_mesh_size_factor_wing\",\n            description=\"\"\"\n                Factor proportional to wing radius of curvature to obtain cell size on it.\n            \"\"\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=GMSH_MESH_SIZE_ENGINES_XPATH,\n            default_value=0.23,\n            name=\"Engine Mesh Size\",\n            key=\"engine_mesh_size\",\n            description=\"Value assigned for the engine surfaces mesh size.\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=GMSH_MESH_SIZE_PROPELLERS_XPATH,\n            default_value=0.23,\n            name=\"Propellers Mesh Size\",\n            key=\"propeller_mesh_size\",\n            description=\"Value assigned for the propeller surfaces mesh size.\",\n        )\n\n    # Advanced Mesh Parameters\n    with st.expander(\n        label=\"Advanced Mesh Parameters\",\n        expanded=True,\n    ):\n\n        float_vartype(\n            tixi=tixi,\n            xpath=GMSH_N_POWER_FACTOR_XPATH,\n            default_value=2.0,\n            name=\"n power factor\",\n            key=\"n_power_factor\",\n            description=\"Power of the power law of the refinement on LE and TE.\"\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=GMSH_N_POWER_FIELD_XPATH,\n            default_value=0.9,\n            name=\"n power field\",\n            key=\"n_power_field\",\n            description=\"Value that changes the measure of fist cells near aircraft parts.\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=GMSH_REFINE_FACTOR_XPATH,\n            default_value=2.0,"
    },
    {
      "path": "src/ceasiompy/CPACS2GMSH/__specs__.py",
      "start_line": 301,
      "end_line": 360,
      "text": "            name=\"LE/TE refinement factor\",\n            key=\"refine_factor\",\n            description=\"Refinement factor of wing leading/trailing edge mesh.\",\n        )\n\n        bool_vartype(\n            tixi=tixi,\n            xpath=GMSH_REFINE_TRUNCATED_XPATH,\n            default_value=False,\n            name=\"Refine truncated TE\",\n            key=\"refine_truncated\",\n            description=\"Enable the refinement of truncated trailing edge.\",\n        )\n\n        bool_vartype(\n            tixi=tixi,\n            xpath=GMSH_AUTO_REFINE_XPATH,\n            default_value=False,\n            name=\"Auto refine\",\n            key=\"auto_refine\",\n            description=\"\"\"Automatically refine the mesh on surfaces that\n                are small compare to the chosen mesh size.\n            \"\"\",\n        )\n\n        bool_vartype(\n            tixi=tixi,\n            xpath=GMSH_EXPORT_PROP_XPATH,\n            default_value=False,\n            name=\"Export propeller(s) to be use as disk actuator\",\n            key=\"export_propellers\",\n            description=\"Export propeller(s) to be use as disk actuator\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=GMSH_INTAKE_PERCENT_XPATH,\n            default_value=20.0,\n            name=\"Engine intake position\",\n            key=\"intake_percent\",\n            description=\"\"\"\n                Position of the intake surface boundary condition\n                in percentage of the engine length from the\n                beginning of the engine.\n            \"\"\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=GMSH_EXHAUST_PERCENT_XPATH,\n            default_value=20.0,\n            name=\"Engine exhaust position\",\n            key=\"exhaust_percent\",\n            description=\"\"\"Position of the exhaust surface boundary\n                condition in percentage of the engine length from\n                the end of the engine.\n            \"\"\",\n        )\n\n        bool_vartype("
    },
    {
      "path": "src/ceasiompy/CPACS2GMSH/__specs__.py",
      "start_line": 361,
      "end_line": 420,
      "text": "            tixi=tixi,\n            xpath=GMSH_SAVE_CGNS_XPATH,\n            default_value=False,\n            name=\"Save CGNS\",\n            key=\"save_cgns\",\n            description=\"Save also the geometry in the .cgns format\",\n        )\n\n        bool_vartype(\n            tixi=tixi,\n            xpath=GMSH_MESH_CHECKER_XPATH,\n            default_value=False,\n            name=\"Mesh Checker\",\n            key=\"mesh_checker\",\n            description=\"Check mesh quality with pyvista.\",\n        )\n\n        bool_vartype(\n            tixi=tixi,\n            xpath=GMSH_OPEN_GUI_XPATH,\n            default_value=False,\n            name=\"Open GMSH GUI\",\n            key=\"open_gmsh\",\n            description=\"Open GMSH GUI when the mesh is created\",\n        )\n\n    with st.expander(\n        label=\"Control Surfaces Settings\",\n        expanded=True,\n    ):\n        dataframe_vartype(\n            tixi=tixi,\n            default_value=[0.0],\n            name=\"Ail., Elev., Rudder Angles\",\n            key=\"ctrl_surf_angle\",\n            xpath=GMSH_CTRLSURF_ANGLE_XPATH,\n            description=\"List of Aileron, Elevator, Rudder angles.\",\n        )\n\n\ndef _load_2d_gui_settings(tixi: Tixi3) -> None:\n    # Mesh sizes\n    with st.container(\n        border=True,\n    ):\n        st.markdown(\"#### Mesh Settings\")\n\n        float_vartype(\n            tixi=tixi,\n            xpath=GMSH_2D_AIRFOIL_MESH_SIZE_XPATH,\n            default_value=0.01,\n            name=\"Airfoil Mesh Size\",\n            key=\"airfoil_mesh_size\",\n            description=\"Mesh size on the airfoil contour for 2D mesh generation\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            xpath=GMSH_2D_EXT_MESH_SIZE_XPATH,\n            default_value=0.2,"
    },
    {
      "path": "src/ceasiompy/CPACS2GMSH/__specs__.py",
      "start_line": 421,
      "end_line": 480,
      "text": "            name=\"External Mesh Size\",\n            key=\"external_mesh_size\",\n            description=\"Mesh size in the external domain for 2D mesh generation\",\n        )\n\n        list_vartype(\n            tixi=tixi,\n            xpath=GMSH_2D_MESH_FORMAT_XPATH,\n            default_value=[\"su2\", \"msh\", \"vtk\", \"wrl\", \"stl\", \"mesh\", \"cgns\", \"dat\"],\n            name=\"Mesh Format\",\n            key=\"mesh_format_2d\",\n            description=\"\"\"\n                Output format for 2D mesh file (su2, msh, vtk, wrl, stl, mesh, cgns, dat).\n            \"\"\",\n        )\n\n    # Boundary Layer\n    with st.container(\n        border=True,\n    ):\n        no_boundary_layer = bool_vartype(\n            tixi=tixi,\n            xpath=GMSH_2D_NO_BL_XPATH,\n            default_value=True,\n            name=\"No Boundary Layer\",\n            key=\"no_boundary_layer\",\n            description=\"Disable boundary layer (unstructured mesh with triangles only).\",\n        )\n\n        if not no_boundary_layer:\n            with st.container(\n                border=True,\n            ):\n\n                float_vartype(\n                    tixi=tixi,\n                    xpath=GMSH_2D_FIRST_LAYER_HEIGHT_XPATH,\n                    default_value=0.001,\n                    name=\"First Layer Height\",\n                    key=\"first_layer_height\",\n                    description=\"First layer height for 2D mesh generation\",\n                )\n\n                float_vartype(\n                    tixi=tixi,\n                    xpath=GMSH_2D_RATIO_XPATH,\n                    default_value=1.2,\n                    name=\"Growth Factor\",\n                    key=\"growth_factor\",\n                    description=\"Growth factor of boundary layer cells.\",\n                )\n\n                int_vartype(\n                    tixi=tixi,\n                    xpath=GMSH_2D_NB_LAYERS_XPATH,\n                    default_value=25,\n                    name=\"Number of Layers\",\n                    key=\"nb_layers\",\n                    description=\"Number of layers in the boundary layer.\",\n                )"
    },
    {
      "path": "src/ceasiompy/CPACS2GMSH/__specs__.py",
      "start_line": 481,
      "end_line": 540,
      "text": "        else:\n            safe_remove(tixi, xpath=GMSH_2D_RATIO_XPATH)\n            safe_remove(tixi, xpath=GMSH_2D_NB_LAYERS_XPATH)\n            safe_remove(tixi, xpath=GMSH_2D_FIRST_LAYER_HEIGHT_XPATH)\n\n    # Structured Mesh\n    with st.container(\n        border=True,\n    ):\n        st.markdown(\"#### Mesh Settings\")\n\n        structured_mesh = list_vartype(\n            tixi=tixi,\n            xpath=GMSH_2D_STRUCTURED_MESH_XPATH,\n            default_value=[\"Structured\", \"Hybrid\"],\n            name=\"Structured or Hybrid Mesh\",\n            key=\"structured_mesh\",\n            description=\"Choose if you want a structured mesh or a hybrid one.\"\n        )\n\n        default_value = (\n            [\"CType\"]\n            if structured_mesh == \"Structured\"\n            else [\"Rectangular\", \"Circular\", \"CType\"]\n        )\n\n        farfield_type = list_vartype(\n            tixi=tixi,\n            xpath=GMSH_2D_FARFIELD_TYPE_XPATH,\n            default_value=default_value,\n            name=\"Farfield Type\",\n            key=\"farfield_type\",\n            description=\"\"\"\n                Choose farfield shape (automatically set to CType for structured mesh).\n            \"\"\",\n        )\n\n        if farfield_type == \"Circular\":\n            float_vartype(\n                tixi=tixi,\n                xpath=GMSH_2D_FARFIELD_RADIUS_XPATH,\n                default_value=10.0,\n                name=\"Farfield Radius\",\n                key=\"farfield_radius\",\n                description=\"Farfield radius for circular farfield in 2D mesh generation.\",\n            )\n        else:\n            safe_remove(tixi, xpath=GMSH_2D_FARFIELD_RADIUS_XPATH)\n\n        if farfield_type == \"CType\":\n            float_vartype(\n                tixi=tixi,\n                xpath=GMSH_2D_WAKE_LENGTH_XPATH,\n                default_value=6.0,\n                name=\"Wake Length\",\n                key=\"wake_length\",\n                description=\"\"\"\n                    Wake length downstream of the airfoil for C-type farfield.\n                \"\"\",\n            )"
    },
    {
      "path": "src/ceasiompy/CPACS2GMSH/__specs__.py",
      "start_line": 541,
      "end_line": 577,
      "text": "        else:\n            safe_remove(tixi, xpath=GMSH_2D_WAKE_LENGTH_XPATH)\n\n        if farfield_type == \"Rectangular\":\n            float_vartype(\n                tixi=tixi,\n                xpath=GMSH_2D_LENGTH_XPATH,\n                default_value=5.0,\n                name=\"Length\",\n                key=\"length\",\n                description=\"Length of domain for rectangular farfield.\",\n            )\n        else:\n            safe_remove(tixi, xpath=GMSH_2D_LENGTH_XPATH)\n\n        if farfield_type == \"CType\" or farfield_type == \"Rectangular\":\n            float_vartype(\n                tixi=tixi,\n                xpath=GMSH_2D_HEIGHT_LENGTH_XPATH,\n                default_value=5.0,\n                name=\"Height Length\",\n                key=\"height_length\",\n                description=\"Height of domain for C-type farfield.\",\n            )\n        else:\n            safe_remove(tixi, xpath=GMSH_2D_HEIGHT_LENGTH_XPATH)\n\n\n# Functions\ndef gui_settings(cpacs: CPACS) -> None:\n    \"\"\"CPACS2Gmsh GUI Settings.\"\"\"\n    tixi = cpacs.tixi\n\n    if get_value(tixi, GEOMETRY_MODE_XPATH) == \"3D\":\n        _load_3d_gui_settings(tixi)\n    else:\n        _load_2d_gui_settings(tixi)"
    },
    {
      "path": "src/ceasiompy/CPACSUpdater/README.md",
      "start_line": 1,
      "end_line": 60,
      "text": "\n<img align=\"right\" height=\"70\" src=\"../../../documents/logos/CEASIOMpy_banner_main.png\">\n\n# CPACSUpdater\n\n**Categories:** CPACS modifier\n\n**State**: :heavy_check_mark:\n\n<p align=\"center\">\n<img height=\"160\" src=\"files/ctrlsurf.png\">\n</p>\n\n## Important\n\nCPACSUpdater expects that your CPACS file is \"correct\" and that all informations regarding positionings and sections are detailed (e.g. from_section_uid and to_section_uid).\n\n## Inputs\n\n'CPACSUpdater' needs a CPACS file to modify.\n\n## Analyses\n\n'CPACSUpdater' computes nothing.\n\nFor each wing segment, you can choose which type of control surfaces to add in CEASIOMpy's GUI.\n\nFowler flap:\n\n<p align=\"center\">\n<img height=\"160\" src=\"files/fowlerflap.png\">\n</p>\n\nEssentially 'CPACSUpdater':\n    1. Copies and scales original wing to make the flap.\n    2. Crops the original wing to make place for the flap.\n\nPlain flap/rudder/aileron: It is important to specify the correct type of control surface if you are going to deform them in the future.\n\n<p align=\"center\">\n<img height=\"160\" src=\"files/aileron.png\">\n</p>\n\nEssentially 'CPACSUpdater':\n    1. Chooses a point in x to divide the main wing in two parts.\n    2. Then uses a sin function to close these two parts.\n\nPlease call 'CPACSCreator' after calling 'CPACSUpdater' to check if your CPACS file has been correctly modified.\n\n## Outputs\n\nModified CPACS file with control surfaces.\n\n## Installation or requirements\n\nCPACSUpdater is a native CEASIOMpy module, hence it is available and installed by default.\n\n## Limitations\n\n1. Only adds control surfaces. No other operations implemented yet."
    },
    {
      "path": "src/ceasiompy/CPACSUpdater/README.md",
      "start_line": 61,
      "end_line": 69,
      "text": "2. Each wings are decomposed into several little wings. For example, if you had 1 wing with 3 segments, then CPACSUpdater will decompose this wing into 3 wings with 1 segment each. This is due to the limitation of the CPACS format.\n3. Can not be applied on certain geometries. Take the concorde1014.xml file, as you can see the wing's segments are defined along the aircraft span, therefore adding control surfaces in this case is not correct.\n\n## More information\n\n1. This module was created to look at rudder/aileron/elevator deformations in SU2.\n2. Don't add control surfaces if you intend to use PyAVL !\n    -   PyAVL automatically looks in the CPACS file for control surface definitions at the xPath: /wing/componentSegments/componentSegment/ControlSurfaces.\n    -   CPACSUpdater automatically removes the /componentSegments element in the CPACS file for every wing."
    },
    {
      "path": "src/ceasiompy/CPACSUpdater/__specs__.py",
      "start_line": 1,
      "end_line": 60,
      "text": "\"\"\"\nCEASIOMpy: Conceptual Aircraft Design Software\n\nDeveloped by CFS ENGINEERING, 1015 Lausanne, Switzerland\n\nGUI Interface of CPACSUpdater.\n\"\"\"\n\n# Imports\nimport streamlit as st\n\nfrom ceasiompy.utils.geometryfunctions import get_segments\nfrom ceasiompy.utils.guiobjects import (\n    bool_vartype,\n    add_ctrl_surf_vartype,\n)\n\nfrom cpacspy.cpacspy import CPACS\n\nfrom ceasiompy.CPACSUpdater import (\n    CONTROL_SURFACES_LIST,\n    CPACSUPDATER_CTRLSURF_XPATH,\n    CPACSUPDATER_ADD_CTRLSURFACES_XPATH,\n)\n\n\n# Functions\ndef gui_settings(cpacs: CPACS) -> None:\n    \"\"\"GUI Settings of CPACSUpdater module.\"\"\"\n    tixi = cpacs.tixi\n\n    with st.container(\n        border=True\n    ):\n        add_ctrl_surf = bool_vartype(\n            tixi=tixi,\n            key=\"add_control_surfaces\",\n            xpath=CPACSUPDATER_ADD_CTRLSURFACES_XPATH,\n            default_value=True,\n            name=\"Add control surfaces\",\n            description=\"Choose to add or not control surfaces.\",\n        )\n\n        if add_ctrl_surf:\n            with st.container(\n                border=True\n            ):\n                segments_list = get_segments(tixi)\n                for wing_uid, segment_uid in segments_list:\n                    add_ctrl_surf_vartype(\n                        tixi=tixi,\n                        key=f\"control_surface_{wing_uid}_{segment_uid}\",\n                        default_value=CONTROL_SURFACES_LIST,\n                        name=f\"Control Surface for segment {segment_uid} of wing {wing_uid}.\",\n                        description=\"\"\"\n                            Select the type of control surface to add\n                            for at specific wing and segment of wing.\n                        \"\"\",\n                        xpath=CPACSUPDATER_CTRLSURF_XPATH + f\"/{wing_uid}/{segment_uid}\",\n                    )"
    },
    {
      "path": "src/ceasiompy/Database/README.md",
      "start_line": 1,
      "end_line": 33,
      "text": "\n<img align=\"right\" height=\"70\" src=\"../../../documents/logos/CEASIOMpy_banner_main.png\">\n\n# Database\n\n**Categories:** Database, Data\n\n**State**: :heavy_check_mark:\n\n## Inputs\n\nNeeds a workflow to be generated and done.\n\n## Analyses\n\nAnalyses nothing. It stores automatically the \"important\" data in a preSQL database.\n\n## Outputs\n\nOutputs nothing.\n\n## Installation or requirements\n\nDatabase is a native CEASIOMpy module.\n\n## Limitations\n\n- Exists only one table per module data.\n- Not compatible with Weight and Balance modules of CEASIOMpy.\n\n## More information\n\nNA"
    },
    {
      "path": "src/ceasiompy/Database/__specs__.py",
      "start_line": 1,
      "end_line": 35,
      "text": "\"\"\"\nCEASIOMpy: Conceptual Aircraft Design Software\n\nDeveloped by CFS ENGINEERING, 1015 Lausanne, Switzerland\n\nGUI Interface of Database.\n\n| Author: Leon Deligny\n| Creation: 25 March 2025\n\n\"\"\"\n\n# Imports\n\nfrom ceasiompy.utils.moduleinterfaces import CPACSInOut\n\nfrom ceasiompy.Database import (\n    DATABASE_STOREDATA_XPATH,\n)\n\n# Variable\n\n# ===== CPACS inputs and outputs =====\ncpacs_inout = CPACSInOut()\n\ncpacs_inout.add_input(\n    var_name=\"store\",\n    var_type=bool,\n    default_value=True,\n    unit=None,\n    xpath=DATABASE_STOREDATA_XPATH,\n    gui=True,\n    gui_name=\"Store data\",\n    gui_group=\"Storing Settings\",\n)"
    },
    {
      "path": "src/ceasiompy/DynamicStability/README.md",
      "start_line": 1,
      "end_line": 46,
      "text": "<img align=\"right\" height=\"70\" src=\"../../../documents/logos/CEASIOMpy_banner_mission.png\">\n\n# DynamicStability\n\n**Categories:** Aerodynamics, Dynamic, Stability\n\n**State**: :heavy_check_mark:\n\n## Inputs\n\nBefore hand, you need to use the PyAVL module and store enough data into ceasiompy.db to use this module.\n\nOnce you done that, you can:\n    1. Choose the different mach numbers for your stability analysis.\n    2. Choose the aircraft\n    3. If you haven't computed any dot-derivatives 'DynamicStability' will use the Doublet Lattice Method in the frequency domain to compute those.\n\n## Analyses\n\n1. Computes unsteady derivatives through the Doublet Lattice Method (PanelAero).\n2. Opens SDSA with all the necessary computed aerodynamic coefficients.\n\n## Outputs\n\nOutputs SDSA_Input.xml, which is given as input to SDSA.\n\n## Installation or requirements\n\nFollowing the automatic installation procedure on the [CEASIOMpy installation page](../../installation/INSTALLATION.md) should install `DynamicStability` automatically along with the other tools.\n\n## Not implemented\n\n1. Landing gear configuration\n2. Collision points\n\n## Limitations\n\n1. Depends on SDSA software.\n2. Altitude fixed at 1000 meters.\n3. Pilot Eye is by default the tip of fuselage.\n\n## More information\n\nDynamic Stability Software: [SDSA](https://www.meil.pw.edu.pl/add/ADD/Teaching/Software/SDSA)\nDoublet Lattice Solver: [PanelAero](https://github.com/DLR-AE/PanelAero)\nDot derivatives algorithm: [DotDerivatives](https://fr.overleaf.com/read/qjffvmtrzzhb#8fc920)"
    },
    {
      "path": "src/ceasiompy/DynamicStability/__specs__.py",
      "start_line": 1,
      "end_line": 60,
      "text": "\"\"\"\nCEASIOMpy: Conceptual Aircraft Design Software\n\nDeveloped by CFS ENGINEERING, 1015 Lausanne, Switzerland\n\nGUI Interface of DynamicStability.\n\n| Author: Leon Deligny\n| Creation: 25 March 2025\n\n\"\"\"\n\n# Imports\n\nimport streamlit as st\n\nfrom ceasiompy.utils.moduleinterfaces import CPACSInOut\n\nfrom ceasiompy.PyAVL import SOFTWARE_NAME as AVL_SOFTWARE\nfrom ceasiompy.SU2Run import SOFTWARE_NAME as SU2_SOFTWARE\nfrom ceasiompy.DynamicStability import (\n    DYNAMICSTABILITY_NCHORDWISE_XPATH,\n    DYNAMICSTABILITY_NSPANWISE_XPATH,\n    DYNAMICSTABILITY_VISUALIZATION_XPATH,\n    DYNAMICSTABILITY_CGRID_XPATH,\n    DYNAMICSTABILITY_SOFTWARE_XPATH,\n    DYNAMICSTABILITY_XREF_XPATH,\n    DYNAMICSTABILITY_YREF_XPATH,\n    DYNAMICSTABILITY_ZREF_XPATH,\n    DYNAMICSTABILITY_DEFAULTREF_XPATH,\n    DYNAMICSTABILITY_OPEN_SDSA_XPATH,\n    DYNAMICSTABILITY_ALPHA_DERIVATIVES_XPATH,\n    DYNAMICSTABILITY_BETA_DERIVATIVES_XPATH,\n)\n\n# Variable\n\ncpacs_inout = CPACSInOut()\n\ncpacs_inout.add_input(\n    var_name=\"alpha_alpha_dot_derivatives\",\n    var_type=bool,\n    default_value=True,\n    unit=None,\n    descr=\"Compute Alpha, Alpha-dot derivatives\",\n    xpath=DYNAMICSTABILITY_ALPHA_DERIVATIVES_XPATH,\n    gui=True,\n    gui_name=\"Alpha, Alpha-dot derivatives\",\n    gui_group=\"Dot Derivatives Type\",\n)\n\ncpacs_inout.add_input(\n    var_name=\"beta_beta_dot_derivatives\",\n    var_type=bool,\n    default_value=True,\n    unit=None,\n    descr=\"Compute Beta, Beta-dot derivatives\",\n    xpath=DYNAMICSTABILITY_BETA_DERIVATIVES_XPATH,\n    gui=True,\n    gui_name=\"Beta, Beta-dot derivatives\","
    },
    {
      "path": "src/ceasiompy/DynamicStability/__specs__.py",
      "start_line": 61,
      "end_line": 120,
      "text": "    gui_group=\"Dot Derivatives Type\",\n)\n\ncpacs_inout.add_input(\n    var_name=\"open_sdsa\",\n    var_type=bool,\n    default_value=False,\n    unit=None,\n    descr=\"If you want to open SDSA with the data from ceasiompy.db\"\n    \"(You need to make around 6000 computations for sdsa to work properly)\",\n    xpath=DYNAMICSTABILITY_OPEN_SDSA_XPATH,\n    gui=True,\n    gui_name=\"Open SDSA\",\n    gui_group=\"Open SDSA\",\n)\n\ncpacs_inout.add_input(\n    var_name=\"dynamic_stability_software_data\",\n    var_type=list,\n    default_value=[f\"{AVL_SOFTWARE}\", f\"{SU2_SOFTWARE}\"],\n    unit=None,\n    descr=\"Which data from ceasiompy.db to use.\",\n    xpath=DYNAMICSTABILITY_SOFTWARE_XPATH,\n    gui=True,\n    gui_name=\"Use data from which software\",\n    gui_group=\"Software Settings\",\n)\n\ncpacs_inout.add_input(\n    var_name=\"chordwise_vort\",\n    var_type=int,\n    default_value=20,\n    unit=None,\n    descr=\"Select the number of chordwise vortices\",\n    xpath=DYNAMICSTABILITY_NCHORDWISE_XPATH,\n    gui=True,\n    gui_name=\"Number of chordwise vortices\",\n    gui_group=\"Aerogrid Settings\",\n)\n\ncpacs_inout.add_input(\n    var_name=\"spanwise_vort\",\n    var_type=int,\n    default_value=50,\n    unit=None,\n    descr=\"Select the number of spanwise vortices\",\n    xpath=DYNAMICSTABILITY_NSPANWISE_XPATH,\n    gui=True,\n    gui_name=\"Number of spanwise vortices\",\n    gui_group=\"Aerogrid Settings\",\n)\n\ncpacs_inout.add_input(\n    var_name=\"dlm_aerogrid_visualization\",\n    var_type=bool,\n    default_value=False,\n    unit=None,\n    descr=\"Visualization of the aerogrid the DLM is going to use\",\n    xpath=DYNAMICSTABILITY_VISUALIZATION_XPATH,\n    gui=True,"
    },
    {
      "path": "src/ceasiompy/DynamicStability/__specs__.py",
      "start_line": 121,
      "end_line": 180,
      "text": "    gui_name=\"aerogrid visualization\",\n    gui_group=\"Visualization\",\n)\n\ncpacs_inout.add_input(\n    var_name=\"c_grid\",\n    var_type=str,\n    default_value=\"C:/Program Files/SDSA/Grid/test.inp\",\n    unit=None,\n    descr=\"Select the cGrid path\",\n    xpath=DYNAMICSTABILITY_CGRID_XPATH,\n    gui=True,\n    gui_name=\"cGrid path\",\n    gui_group=\"cGrid Setting\",\n)\n\ncpacs_inout.add_input(\n    var_name=\"use_default\",\n    var_type=bool,\n    default_value=True,\n    unit=None,\n    descr=\"If you want the default (leave on True) or want to specify (False)\",\n    xpath=DYNAMICSTABILITY_DEFAULTREF_XPATH,\n    gui=True,\n    gui_name=\"Default Reference Point\",\n    gui_group=\"Refence Point Setting\",\n)\n\ncpacs_inout.add_input(\n    var_name=\"dynstab_xref\",\n    var_type=float,\n    default_value=0.0,\n    unit=None,\n    descr=\"Select the x-ref for aero coefs\",\n    xpath=DYNAMICSTABILITY_XREF_XPATH,\n    gui=True,\n    gui_name=\"X Reference\",\n    gui_group=\"Refence Point Setting\",\n)\n\ncpacs_inout.add_input(\n    var_name=\"dynstab_yref\",\n    var_type=float,\n    default_value=0.0,\n    unit=None,\n    descr=\"Select the y-ref for aero coefs\",\n    xpath=DYNAMICSTABILITY_YREF_XPATH,\n    gui=True,\n    gui_name=\"Y Reference\",\n    gui_group=\"Refence Point Setting\",\n)\n\ncpacs_inout.add_input(\n    var_name=\"dynstab_zref\",\n    var_type=float,\n    default_value=0.0,\n    unit=None,\n    descr=\"Select the z-ref for aero coefs\",\n    xpath=DYNAMICSTABILITY_ZREF_XPATH,\n    gui=True,"
    },
    {
      "path": "src/ceasiompy/DynamicStability/__specs__.py",
      "start_line": 181,
      "end_line": 183,
      "text": "    gui_name=\"Z Reference\",\n    gui_group=\"Refence Point Setting\",\n)"
    },
    {
      "path": "src/ceasiompy/PyAVL/README.md",
      "start_line": 1,
      "end_line": 60,
      "text": "\n<img align=\"right\" height=\"70\" src=\"../../../documents/logos/CEASIOMpy_banner_aero.png\">\n\n# PyAVL\n\n**Categories:** Aerodynamics, vortex lattice method, low-fidelity.\n\n**State**: :heavy_check_mark:\n\n<img align=\"right\" height=\"120\" src=\"files/avl_logo.gif\">\n\n`PyAVL` module is a launcher for the [Athena Vortex Lattice (AVL)](https://web.mit.edu/drela/Public/web/avl/) solver, developed by M. Drela and H. Youngren at MIT. It is a vortex lattice method (VLM) solver for low-fidelity aerodynamic computations.\n\n## Inputs\n\n`PyAVL` takes as input a CPACS file, the aircraft geometry is read to create the VLM model for the wings and fuselage. The flight conditions have to be defined within an aeromap, as well as the number of vortex panels to use.\n\n<p align=\"center\">\n<img height=\"340\" src=\"files/avl_model.png\">\n</p>\n<p align=\"center\">\nExample of AVL geometry model.\n</p>\n\n## Analyses\n\n`PyAVL` computes the aerodynamic coefficients of an aircraft for a given aeromap and writes the results in a CPACS file. It calculates the total forces on the aircraft, the forces on individual surfaces, the forces on wing strips, and the forces on each panel. The stability derivatives can also be computed.\n\n## Outputs\n\n`PyAVL` outputs a CPACS file with the aerodynamic coefficients added in the aeromap. The settings of the simulation (number of chordwise/spanwise vortices, vortex distribution) are saved. The following force files are saved:\n- `ft.txt`: Total Forces.\n- `fn.txt`: Surface Forces.\n- `fs.txt`: Strip Forces.\n- `fe.txt`: Element Forces (vortex strength).\n\nThe following plots are generated:\n- `plot.pdf`: it contains a plot of the initial AVL geometry model, and a plot with the aerodynamic loads on the aircraft.\n- `lift_distribution.png`: plot of the lift distribution along the span.\n\n<p align=\"center\">\n<img height=\"340\" src=\"files/avl_loads.png\">\n</p>\n<p align=\"center\">\nExample of aerodynamic loads computed by AVL.\n</p>\n\n\n## Installation or requirements\n\nFollowing the automatic installation procedure on the [CEASIOMpy installation page](../../installation/INSTALLATION.md) should install `PyAVL` automatically along with the other tools.\n\n## Limitations\n\n`PyAVL` uses a Vortex Lattice Method solver:\n- The flow is quasi-steady and ideal: incompressible, irrotational, and inviscid.\n- The flow is low-subsonic: [Prandlt-Glauert transformation](https://en.wikipedia.org/wiki/Prandtl%E2%80%93Glauert_transformation) is used to adapt the equations up to Mach 0.6.\n- Lifting surfaces are assumed to be thin, the thickness is not taken into account.\n- The angle of attack and sideslip must be small.\n- Viscous effects, turbulence or boundary layer phenomena are not solved at all."
    },
    {
      "path": "src/ceasiompy/PyAVL/README.md",
      "start_line": 61,
      "end_line": 68,
      "text": "\n## More information\n\n- [AVL documentation.](https://web.mit.edu/drela/Public/web/avl/AVL_User_Primer.pdf)\n- [AVL website.](https://web.mit.edu/drela/Public/web/avl/)\n- [Flight Vehicule Aerodynamics](https://mitpress.mit.edu/9780262526449/flight-vehicle-aerodynamics/) by M. Drela.\n- [Low-Speed Aerodynamics](https://www.cambridge.org/core/books/lowspeed-aerodynamics/077FAF851C4582F1B7593809752C44AE) by J. Katz and A. Plotkin.\n- [Aerodynamics for Engineers](https://www.cambridge.org/highereducation/books/aerodynamics-for-engineers/C8AAC9F38F0781CA38AB65FA85E61CCF#overview) by J. Bertin."
    },
    {
      "path": "src/ceasiompy/PyAVL/__specs__.py",
      "start_line": 1,
      "end_line": 60,
      "text": "\"\"\"\nCEASIOMpy: Conceptual Aircraft Design Software\n\nDeveloped by CFS ENGINEERING, 1015 Lausanne, Switzerland\n\nGUI Interface of PyAVL.\n\"\"\"\n\n# Imports\nimport streamlit as st\n\nfrom cpacspy.cpacspy import CPACS\n\nfrom ceasiompy.utils.guiobjects import (\n    int_vartype,\n    list_vartype,\n    bool_vartype,\n    float_vartype,\n    dataframe_vartype,\n)\n\nfrom ceasiompy.PyAVL import (\n    AVL_DISTR_XPATH,\n    AVL_ROTRATES_XPATH,\n    AVL_FUSELAGE_XPATH,\n    AVL_NSPANWISE_XPATH,\n    AVL_NCHORDWISE_XPATH,\n    AVL_FREESTREAM_MACH_XPATH,\n    AVL_CTRLSURF_ANGLES_XPATH,\n)\n\n\n# Functions\ndef gui_settings(cpacs: CPACS) -> None:\n    tixi = cpacs.tixi\n    with st.expander(\n        label=\"Panel Settings\",\n        expanded=True,\n    ):\n        list_vartype(\n            tixi=tixi,\n            name=\"Panel distribution\",\n            key=\"panel_distribution\",\n            default_value=[\"cosine\", \"sine\", \"equal\"],\n            description=\"Select the type of distribution.\",\n            xpath=AVL_DISTR_XPATH,\n        )\n\n        int_vartype(\n            tixi=tixi,\n            name=\"Number of chordwise vortices\",\n            key=\"chordwise_vortices_nb\",\n            default_value=20,\n            description=\"Select the number of chordwise vortices.\",\n            xpath=AVL_NCHORDWISE_XPATH,\n        )\n\n        int_vartype(\n            tixi=tixi,\n            name=\"Number of spanwise vortices\","
    },
    {
      "path": "src/ceasiompy/PyAVL/__specs__.py",
      "start_line": 61,
      "end_line": 120,
      "text": "            key=\"spanwise_vortices_nb\",\n            default_value=30,\n            description=\"Select the number of spanwise vortices.\",\n            xpath=AVL_NSPANWISE_XPATH,\n        )\n\n    with st.expander(\n        label=\"Specific Settings\",\n        expanded=True,\n    ):\n        dataframe_vartype(\n            name=\"Rotation rates\",\n            key=\"rates\",\n            default_value=[0.0],\n            tixi=tixi,\n            xpath=AVL_ROTRATES_XPATH,\n            description=\"List of p, q, r rates.\",\n        )\n\n        dataframe_vartype(\n            name=\"Control surface angles\",\n            key=\"ctrl_surf_angles\",\n            default_value=[0.0],\n            tixi=tixi,\n            xpath=AVL_CTRLSURF_ANGLES_XPATH,\n            description=\"List of Aileron, Elevator, Rudder angles.\",\n        )\n\n        float_vartype(\n            tixi=tixi,\n            name=\"Default freestream Mach\",\n            key=\"default_freestream_mach\",\n            default_value=0.6,\n            description=\"Usually 0.2 < default value < 0.8\",\n            xpath=AVL_FREESTREAM_MACH_XPATH,\n        )\n\n    with st.container(\n        border=True\n    ):\n        bool_vartype(\n            tixi=tixi,\n            name=\"Integrate fuselage\",\n            key=\"integrate_fuselage\",\n            default_value=False,\n            description=\"Integrate the fuselage in the AVL model.\",\n            xpath=AVL_FUSELAGE_XPATH,\n        )\n\n# Integrate In AeroMap Settings\n# cpacs_inout.add_input(\n#     var_name=\"expand_values\",\n#     var_type=bool,\n#     default_value=False,\n#     unit=None,\n#     descr=\"\"\"\n#     Selected values from aeromap will form a n-dimension cube (Specific for Dynamic Stability)\n#     For example (alt, mach): (0.0, 0.1), (1000.0, 0.5)\n#     Will transform into (alt, mach): (0.0, 0.1), (1000.0, 0.1), (0.0, 0.5), (1000.0, 0.5)\n#     \"\"\","
    },
    {
      "path": "src/ceasiompy/PyAVL/__specs__.py",
      "start_line": 121,
      "end_line": 126,
      "text": "#     xpath=AVL_EXPAND_VALUES_XPATH,\n#     gui=True,\n#     gui_name=\"Values Expansion\",\n#     gui_group=\"Values Expansion\",\n#     expanded=False,\n# )"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1,
      "end_line": 60,
      "text": "MIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nAVL 3.36\n(Mark Drela, Harold Youngren)\n1 History\nAVL(AthenaVortexLattice)1.0wasoriginallywrittenbyHaroldYoungrencirca1988fortheMITAthena\nTODOR aero software collection. The code was based on classic work by Lamar (NASA codes), E. Lan\nand L. Miranda (VORLAX) and a host of other investigators. Numerous modifications have since been\naddedbyMarkDrelaandHaroldYoungren, tothepointwhereonlystubborntracesoftheoriginalAthena\ncode remain.\n2 General Description\nAVL 3.xx now has a large number of features intended for rapid aircraft configuration analysis. The major\nfeatures are as follows:\nAerodynamic components\nLifting surfaces\nSlender bodies\nConfiguration description\nKeyword-driven geometry input file\nDefined sections with linear interpolation\nSection properties\ncamberline is NACA xxxx, or from airfoil file\ncontrol deflections\nparabolic profile drag polar, Re-scaling\nScaling, translation, rotation of entire surface or body\nDuplication of entire surface or body\nSingularities\nHorseshoe vortices (surfaces)\nSource+doublet lines (bodies)\nFinite-core option\nDiscretization\nUniform\nSine\nCosine\nBlend\n1\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nControl deflections\nVia normal-vector tilting\nLeading edge flaps\nTrailing edge flaps\nHinge lines independent of discretization\nGeneral freestream description\nalpha,beta flow angles\np,q,r aircraft rotation components\nSubsonic Prandtl-Glauert compressibility treatment\nSurfaces can be defined to \u201dsee\u201d only perturbation velocities (not freestream) to allow simulation of\nground effect\nwind tunnel wall interference\ninfluence of other nearby aircraft\nAerodynamic outputs\nDirect forces and moments\nTrefftz-plane\nDerivatives of forces and moments, w.r.t freestream, rotation, controls\nIn body or stability axes\nTrim calculation\nOperating variables\nalpha,beta\np,q,r\ncontrol deflections\nConstraints\ndirect constraints on variables"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 61,
      "end_line": 120,
      "text": "indirect constraints via specified CL, moments\nMultiple trim run cases can be defined\nSaving of trim run case setups for later recall\nOptional mass definition file (only for trim setup, eigenmode analysis)\nUser-chosen units\nItemized component location, mass, inertias\nTrim setup of constraints\nlevel or banked horizontal flight\n2\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nsteady pitch rate (looping) flight\nEigenmode analysis\nRigid-body analysis with quasi-steady aero model\nDisplay of eigenvalue root progression with a parameter\nDisplay of eigenmode motion in real time\nOutput of dynamic system matrices\n3 Vortex-Lattice Modeling Principles\nLike any computational method, AVL has limitations on what it can do. These must be kept in mind in\nany given application.\n3.1 Configurations\nA vortex-lattice model like AVL is best suited for aerodynamic configurations which consist mainly of\nthin lifting surfaces at small angles of attack and sideslip. These surfaces and their trailing wakes are\nrepresented as single-layer vortex sheets, discretized into horseshoe vortex filaments, whose trailing legs\nare assumed to be parallel to the x-axis. AVL provides the capability to also model slender bodies such\nas fuselages and nacelles via source+doublet filaments. The resulting force and moment predictions are\nconsistent with slender-body theory, but the experience with this model is relatively limited, and hence\nmodeling of bodies should be done with caution. If a fuselage is expected to have little influence on the\naerodynamic loads, it\u2019s simplest to just leave it out of the AVL model. However, the two wings should be\nconnected by a fictitious wing portion which spans the omitted fuselage.\n3.2 Unsteady flow\nAVL assumes quasi-steady flow, meaning that unsteady vorticity shedding is neglected. More precisely, it\nassumes the limit of small reduced frequency, which means that any oscillatory motion (e.g. in pitch) must\nbe slow enough so that the period of oscillation is much longer than the time it takes the flow to traverse\nan airfoil chord. This is true for virtually any expected flight maneuver. Also, the roll, pitch, and yaw\nrates used in the computations must be slow enough so that the resulting relative flow angles are small.\nThis can be judged by the dimensionless rotation rate parameters, which should fall within the following\npractical limits.\n\u22120.10 < pb/2V < 0.10\n\u22120.03 < qc/2V < 0.03\n\u22120.25 < rb/2V < 0.25\nThese limits represent extremely violent aircraft motion, and are unlikely to exceeded in any typical flight\nsituation, exceptpossiblyduringlow-airspeedaerobaticmaneuvers. Inanycase, ifanyoftheseparameters\nfalls outside of these limits, the results should be interpreted with caution.\n3\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\n3.3 Compressibility\nCompressibility is treated in AVL using the classical Prandtl-Glauert (PG) transformation, which converts\nthe PG equation to the Laplace equation, which can then be solved by the basic incompressible method.\nThis is equivalent to the compressible continuity equation, with the assumptions of irrotationality and\nlinearization about the freestream. The forces are computed by applying the Kutta-Joukowsky relation to\neach vortex, this remaining valid for compressible flow.\nThe linearization assumes small perturbations (thin surfaces) and is not completely valid when velocity\nperturbations from the free-stream become large. The relative importance of compressible effects can be\njudged by the PG factor\n1 1\n= \u221a\nB 1\u2212M2\nwhere \u201cM\u201d is the freestream Mach number. A few values are given in the table, which shows the expected\nrange of validity.\nM 1"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 121,
      "end_line": 180,
      "text": "B\n0.0 1.000\n0.1 1.005\n0.2 1.021\n0.3 1.048 PG expected valid\n0.4 1.091\n0.5 1.155\n0.6 1.250\n0.7 1.400 PG suspect (transonic flow likely)\n0.8 1.667 PG unreliable (transonic flow certain)\n0.9 2.294 PG hopeless\nFor swept-wing configurations, the validity of the PG model is best judged using the wing-perpendicular\nMach number\nM = M cos(sweep)\nprep\nSince M < M, swept-wing cases can be modeled up to higher M values than unswept cases. For\nperp\nexample, a 45 degree swept wing operating at freestream M = 0.8 has\nM = 0.8\u2217cos(45) = 0.566\nperp\nwhich is still within the expected range of PG validity in the above table. So reasonable results can be\nexpected from AVL for this case.\nWhen doing velocity parameter sweeps at the lowest Mach numbers, say below M = 0.2, it is best to\nsimply hold M = 0. This will greatly speed up the calculations, since changing the Mach number requires\nrecomputation and re-factorization of the VL influence matrix, which consumes most of the computational\neffort. If the Mach number is held fixed, this computation needs to be done only once.\n4 Input files\nAVL works with three input files, all in plain text format. Ideally these all have a common arbitrary prefix\n\u201cxxx\u201d, and the following extensions:\n4\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nxxx.avl required main input file defining the configuration geometry\nxxx.mass optional file giving masses and inertias, and dimensional units\nxxx.run optional file defining parameters for some number of run cases\nThe user provides files xxx.avl and xxx.mass, which are typically created using any text editor. Sample\nfiles are provided for use as templates. The xxx.run file is written by AVL itself with a user command.\nIt can be manually edited, although this is not really necessary since it is more convenient to edit the\ncontents in AVL and then write out the file again.\n5 Geometry Input File \u2013 xxx.avl\nThis file describes the vortex lattice geometry and aerodynamic section properties. Sample input files are\nin the runs/ subdirectory.\n5.1 Coordinate system\nThe geometry is described in the following Cartesian system:\nX downstream\nY out the right wing\nZ up\nThe freestream must be at a reasonably small angle to the X axis (alpha and beta must be small), since\nthe trailing vorticity is oriented parallel to the X axis. The length unit used in this file is referred to as\n\u201cLunit\u201d. This is arbitrary, but must be the same throughout this file.\n5.2 File format\n5.2.1 Header data\nThe input file begins with the following information in the first 5 non-blank, non-comment lines\nAbc... | case title\n# | comment line begins with \"#\" or \"!\"\n0.0 | Mach\n1 0 0.0 | iYsym iZsym Zsym\n4.0 0.4 0.1 | Sref Cref Bref\n0.1 0.0 0.0 | Xref Yref Zref\n0.020 | CDp (optional)\n5"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 181,
      "end_line": 240,
      "text": "MIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\n= default freestream Mach number for Prandtl-Glauert cor-\nMach\nrection\n= 1 case is symmetric about Y=0 , (X-Z plane is a solid\niYsym wall)\n= -1 case is antisymmetric about Y=0, (X-Z plane is at\nconst. Cp)\n= 0 no Y-symmetry is assumed\n= 1 case is symmetric about Z=Zsym , (X-Y plane is a solid\nwall)\niZsym\n= -1 case is antisymmetric about Z=Zsym, (X-Y plane is at\nconst. Cp)\n= 0 no Z-symmetry is assumed (Zsym ignored)\n=referenceareausedtodefineallcoefficients(CL,CD,Cm,\nSref\netc)\nCref = reference chord used to define pitching moment (Cm)\nBref = reference span used to define roll,yaw moments (Cl,Cn)\n= default location about which moments and rotation rates\nare defined (if doing trim calculations, XYZref must be the\nX,Y,Zref\nCG location, which can be imposed with the MSET com-\nmand described later)\n= default profile drag coefficient added to geometry, applied\nCDp at XYZref (assumed zero if this line is absent, for previous-\nversion compatibility)\nThe default Mach, XYZref, and CDp values are superseded by the values in the .run file (described later),\nif it is present. They can also be changed at runtime.\nOnly the half (non-image) geometry must be input if symmetry is specified. Ground effect is simulated\nwith iZsym = 1, and Zsym = location of ground.\nForces are not calculated on the image/anti-image surfaces. Sref and Bref are assumed to correspond to\nthe total geometry.\nIn practice there is little reason to run Y-symmetric image cases, unless one is desperate for CPU savings.\n5.3 Surface and Body data\nThe remainder of the file consists of a set of keywords and associated data. Each keyword expects a\ncertain number of lines of data to immediately follow it, the exception being inline-coordinate keyword\nAIRFOIL which is followed by an arbitrary number of coordinate data lines. The keywords must also be\nnested properly in the hierarchy shown below. Only the first four characters of each keyword are actually\nsignificant, the rest are just a mnemonic.\nSURFACE\nCOMPONENT (or INDEX)\nYDUPLICATE\nSCALE\nTRANSLATE\nANGLE\nNOWAKE\n6\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nNOALBE\nNOLOAD\nCDCL\nSECTION\nSECTION\nNACA\nSECTION\nAIRFOIL\nCLAF\nCDCL"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 241,
      "end_line": 300,
      "text": "SECTION\nAFILE\nCONTROL\nCONTROL\nBODY\nYDUPLICATE\nSCALE\nTRANSLATE\nBFILE\nSURFACE\nYDUPLICATE\nSECTION\nSECTION\nSURFACE\n.\n.\netc.\nThe COMPONENT (or INDEX), YDUPLICATE, SCALE, TRANSLATE, and ANGLE keywords can all\nbeusedtogether. Ifmorethanoneoftheseappearsforasurface, thelastonewillbeusedandtheprevious\nones ignored.\nAt least two SECTION keywords must be used for each surface.\nThe NACA, AIRFOIL, AFILE, keywords are alternatives. If more than one of these appears after a SEC-\nTION keyword, the last one will be used and the previous ones ignored. i.e.\nSECTION\nNACA\n7\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nAFILE\nis equivalent to\nSECTION\nAFILE\nMultiple CONTROL keywords can appear after a SECTION keyword and data\n5.3.1 Surface-definition keywords and data formats\nSURFACE | (keyword)\nMain Wing | surface name string\n12 1.0 20 -1.5 | Nchord Cspace [ Nspan Sspace ]\nThe SURFACE keyword declares that a surface is being defined until the next SURFACE or BODY\nkeyword, or the end of file is reached. A surface does not really have any significance to the underlying\nAVL vortex lattice solver, which only recognizes the overall collection of all the individual horseshoe\nvortices. SURFACE is provided only as a configuration-defining device, and also as a means of defining\nindividual surface forces. This is necessary for structural load calculations, for example.\n= number of chordwise horseshoe vortices\nNchord\nplaced on the surface\n= chordwise vortex spacing parameter\nCspace\n(described later)\n= number of spanwise horseshoe vortices\nNspan\nplaced on the surface [optional]\n= spanwise vortex spacing parameter (de-\nSspace\nscribed later) [optional]\nIf Nspan and Sspace are omitted (i.e. only Nchord and Cspace are present on line), then the Nspan and\nSspace parameters will be expected for each section interval, as described later.\nCOMPONENT | (keyword) or INDEX\n3 | Lcomp\nThis optional keywords COMPONENT (or INDEX for backward compatibility) allows multiple input\nSURFACEs to be grouped together into a composite virtual surface, by assigning each of the constituent\nsurfaces the same Lcomp value. Application examples are:"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 301,
      "end_line": 360,
      "text": "- A wing component made up of a wing SURFACE and a winglet SURFACE\n- A T-tail component made up of horizontal and vertical tail SURFACEs.\nAcommonLcompvalueinstructsAVLtonot useafinite-coremodelfortheinfluenceofahorseshoevortex\nand a control point which lies on the same component, as this would seriously corrupt the calculation.\nIfeachCOMPONENTisspecifiedviaonlyasingleSURFACEblock,thentheCOMPONENT(orINDEX)\ndeclaration is unnecessary.\nYDUPLICATE | (keyword)\n0.0 | Ydupl\n8\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nThe YDUPLICATE keyword is a convenient shorthand device for creating another surface which is a\ngeometric mirror image of the one being defined. The duplicated surface is not assumed to be an aero-\ndynamic image or anti-image, but is truly independent. A typical application would be for cases which\nhave geometric symmetry, but not aerodynamic symmetry, such as a wing in yaw. Defining the right wing\ntogether with YDUPLICATE will conveniently create the entire wing.\nThe YDUPLICATE keyword can only be used if iYsym = 0 is specified. Otherwise, the duplicated real\nsurfacewillbeidenticaltotheimpliedaerodynamicimagesurface, andvelocitieswillbecomputeddirectly\non the line-vortex segments of the images. This will almost certainly produce an arithmetic fault.\nThe duplicated surface gets the same Lcomp value as the parent surface, so they are considered to be\nthe same COMPONENT. There is no significant effect on the results if they are in reality two physically-\nseparate surfaces.\n= Y position of X-Z plane about which the current surface\nYdupl\nis reflected to make the duplicate geometric-image surface.\nSCALE | (keyword)\n1.0 1.0 0.8 | Xscale Yscale Zscale\nThe SCALE allows convenient rescaling for the entire surface. The scaling is applied before the TRANS-\nLATE operation described below.\n= scaling factors applied to all x,y,z coordinates (chords are\nXscale,Yscale,Zscale\nalso scaled by Xscale)\nTRANSLATE | (keyword)\n10.0 0.0 0.5 | dX dY dZ\nThe TRANSLATE keyword allows convenient relocation of the entire surface without the need to change\ntheXle,Yle,Zlelocationsforallthedefiningsections. Abodycanbetranslatedwithouttheneedtomodify\nthe body shape coordinates.\ndX,dY,dZ = offset added on to all X,Y,Z values in this surface.\nANGLE | (keyword)\n2.0 | dAinc\nThe ANGLE keyword allows convenient changing of the incidence angle of the entire surface without the\nneed to change the Ainc values for all the defining sections.\noffsetaddedontotheAincvaluesforallthedefiningsections\ndAinc =\nin this surface\nThe following keyword declarations would be used in envisioned applications.\n1) Non-lifting fuselage modeled by its side-view and top-view profiles. This will capture the moment of\nthe fuselage reasonably well.\nNOWAKE\n2) Another nearby aircraft, with both aircraft maneuvering together. This would be for trim calculation\nin formation flight.\nNOALBE\n9\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nNOLOAD\n3) Another nearby aircraft, with only the primary aircraft maneuvering. This would be for a flight-\ndynamics analysis in formation flight.\nNOLOAD\n4) Nearby wind tunnel walls or ground plane.\nNOALBE\nNOLOAD"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 361,
      "end_line": 420,
      "text": "NOWAKE | (keyword)\nThe NOWAKE keyword specifies that this surface is to NOT shed a wake, so that its strips will not have\ntheir Kutta conditions imposed. Such a surface will have a near-zero net lift, but it will still generate a\nnonzero moment.\nNOALBE | (keyword)\nTheNOALBEkeywordspecifiesthatthissurfaceisunaffectedbyfreestreamdirectionchangesspecifiedby\nthealpha,betaanglesandp,q,rrotationrates. Thissurfacethenreactstoonlytotheperturbationvelocities\nof all the horseshoe vortices and sources and doublets in the flow. This allows the SURFACE/NOALBE\nobject to model fixed surfaces such as a ground plane, wind tunnel walls, or a nearby other aircraft which\nis at a fixed flight condition.\nNOLOAD | (keyword)\nThe NOLOAD keyword specifies that the force and moment on this surface is to NOT be included in the\noverall forces and moments of the configuration. This is typically used together with NOALBE, since the\nforce on a ground plane or wind tunnel walls certainly is not to be considered as part of the aircraft force\nof interest.\nCDCL | (keyword)\nCL1 CD1 CL2 CD2 CL3 CD3 | CD(CL) function parameters\nTheCDCLkeywordplacedintheSURFACEoptionsspecifiesasimpleprofile-dragC (C )functionforall\nD L\nsections in this SURFACE. The function is parabolic between C ..C and C ..C , with rapid increases\nL1 L2 L2 L3\nin C below C and above C .\nD L1 L3\nThe C \u2212C polar is based on a simple interpolation with four C regions:\nD L L\n1) negative stall region\n2) parabolic C (C ) region between negative stall and the drag minimum\nD L\n3) parabolic C (C ) region between the drag minimum and positive stall\nD L\n4) positive stall region\n10\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nCLpos,CDpos <- Region 4 (quadratic above CLpos)\nCL | pt3--------\n| /\n| | <- Region 3 (quadratic above CLcdmin)\n| pt2 CLcdmin,CDmin\n| |\n| \\ <- Region 2 (quadratic below CLcdmin)\n| pt1_________\n| CLneg,CDneg <- Region 1 (quadratic below CLneg)\n|\n-------------------------\nCD\nSee the SUBROUTINE CDCL header (in cdcl.f) for more details.\nThe C (C ) function is interpolated for stations in between defining sections.\nD L\nSECTION | (keyword)\n0.0 5.0 0.2 0.50 1.50 5 -2.0 | Xle Yle Zle Chord Ainc [ Nspan\nSspace ]\nThe SECTION keyword defines an airfoil-section camber line at some spanwise location on the surface.\nXle,Yle,Zle = airfoil\u2019s leading edge location\nChord = the airfoil\u2019s chord (trailing edge is at Xle+Chord,Yle,Zle)\n= incidence angle, taken as a rotation (+ by RH rule) about\nAinc\nthe surface\u2019s spanwise axis projected onto the Y-Z plane.\n= number of spanwise vortices until the next section [ op-\nNspan\ntional ]"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 421,
      "end_line": 480,
      "text": "Sspace = controls the spanwise spacing of the vortices [ optional ]\nNspan and Sspace are used here only if the overall Nspan and Sspace for the whole surface is not specified\nafter the SURFACE keyword.\nThe Nspan and Sspace for the last section in the surface are always ignored.\nNotethatAincisusedonlytomodifytheflowtangencyboundaryconditionontheairfoilcamberline, and\ndoes not rotate the geometry of the airfoil section itself. This approximation is consistent with linearized\nairfoil theory.\nThe local chord and incidence angle are linearly interpolated between defining sections. Obviously, at least\ntwo sections (root and tip) must be specified for each surface.\nThe default airfoil camber line shape is a flat plate. The NACA, AIRFOIL, and AFIL keywords, described\nbelow, are available to define non-flat camber lines. If one of these is used, it must immediately follow the\ndata line of the SECTION keyword.\nApositivesurface-airfoilcirculationandacorrespondingpositivelocalliftcoefficientisdefinedbyrighthand\nrule in direction of successive sections. This also defines the tops of the section airfoils as the suction side\nfor positive overall lift. Therefore, to match conventional definitions, the order of the sections must be left\nto right across the span.\nNOTE!!\nIf the sections are ordered right to left, then the overall airfoils will effectively by upside down. The overall\ndC /d will still be positive as usual, but for positive C the local c values will be negative. Needless to\nL \u03b1 L l\nsay, it\u2019s best to avoid these complications by ordering the sections left to right across the span (root to tip\n11\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nfor the right wing).\nThe section ordering of a vertical tail is somewhat more arbitrary.\nBut a top to bottom ordering is most convenient, since positive local cl values then produce a positive yaw\nmoment C .\nn\nNACA X1 X2 | (keyword) [ optional x/c range ]\n4300 | section NACA camberline\nThe NACA keyword sets the camber line to the NACA 4-digit shape specified.\nIf present, the optional X1 X2 numerical parameters indicate that only the x/c range X1..X2 from the\ncoordinates is to be assigned to the surface. If the surface is a 20%-chord flap, for example, then X1 X2\nwould be 0.80 1.00. This allows the camber shape to be easily assigned to any number of surfaces in\npiecewise manner.\nIf omitted, X1, X2 default to 0.0, 1.0, which indicates that the entire airfoil is to be used to define the\ncamber shape as usual.\nAIRFOIL X1 X2 | (keyword) [ optional x/c range ]\n1.0 0.0 | x/c(1) y/c(1)\n0.98 0.002 | x/c(2) y/c(2)\n. . | . .\n. . | . .\n. . | . .\n1.0 -0.01 | x/c(N) y/c(N)\nThe AIRFOIL keyword declares that the airfoil definition is input as a set of x/c, y/c pairs.\nx/c,y/c = airfoil coordinates\nThe x/c, y/c coordinates run from TE, to LE, back to the TE again in either direction. These\ncoordinates are splined, and the slope of the camber y(x) function is obtained from the middle y/c values\nbetween the top and bottom. The number of points N is deterimined when a line without two readable\nnumbers is encountered.\nIf present, the optional X1 X2 parameters indicate that only the x/c range X1..X2 from the coordinates\nis to be assigned to the surface. If the surface is a 20%-chord flap, for example, then X1 X2 would be 0.80\n1.00. This allows the camber shape to be easily assigned to any number of surfaces in piecewise manner.\nAFILE X1 X2 | (keyword) [ optional x/c range ]\nfilename | filename string\nThe AFILE keyword is essentially the same as AIRFOIL, except that the x/c,y/c pairs are generated\nfrom a standard (XFOIL-type) set of airfoil coordinates contained in the file \u201cfilename\u201d.\nThe first line of this file is assumed to contain a string with the name of the airfoil (as written out with\nXFOIL\u2019s SAVE command). If the path/filename has embedded blanks, double quotes should be used to\ndelimit the string."
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 481,
      "end_line": 540,
      "text": "If present, the optional X1 X2 numerical parameters indicate that only the x/c range X1..X2 from the\ncoordinates is to be assigned to the surface. If the surface is a 20%-chord flap, for example, then X1 X2\nwould be 0.80 1.00. This allows the camber shape to be easily assigned to any number of surfaces in\npiecewise manner.\nIf omitted, X1, X2 default to 0.0, 1.0, which indicates that the entire airfoil is to be used to define the\ncamber shape as usual.\n12\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nDESIGN | (keyword)\nDName Wdes | design parameter name, local weight\nThis declares that the section angle A is to be virtually perturbed by a design parameter, with name\ninc\nD and local weight W .\nName des\nFor example, declarations for design variables \u201dtwist1\u201d and \u201dbias1\u201d\nDESIGN\ntwist1 -0.5\nDESIGN\nbias1 1.0\nGive an effective (virtual) section incidence that is set using the \u201dtwist1\u201d and \u201dbias1\u201d design variables as:\nA = A \u22120.5\u2217twist1 +1.0\u2217bias1\ninc total inc value value\nwhere twist1 and bias1 are design parameters specified at runtime. The sensitivities of the flow\nvalue value\nsolution to design variable changes can be displayed at any time during program execution. Hence, design\nvariables can be used to quickly investigate the effects of twist changes on lift, moments, induced drag,\netc. Declaring the same design parameter with varying weights for multiple sections in a surface allows\nthe design parameter to represent a convenient \u201cdesign mode\u201d, such as linear washout, which influences\nall sections.\nCONTROL | (keyword)\nelevator 1.0 0.6 0. 1. 0. 1.0 | name, gain, Xhinge, XYZhvec,\nSgnDup\nThe CONTROL keyword declares that a hinge deflection at this section is to be governed by one or more\ncontrol variables. An arbitrary number of control variables can be used, limited only by the array limit\nNDMAX.\nThe data line quantities are...\nname name of control variable\ncontrol deflection gain, units: degrees deflection / control\ngain\nvariable\nx/c location of hinge.\nXhinge If positive, control surface extent is Xhinge..1 (TE surface)\nIf negative, control surface extent is 0..-Xhinge (LE surface)\nvector giving hinge axis about which surface rotates\nXYZhvec + deflection is + rotation about hinge vector by righthand\nrule\nSpecifying XYZhvec = 0. 0. 0. puts the hinge vector along\nthe hinge\nsign of deflection for duplicated surface\nSgnDup An elevator would have SgnDup = +1\nAn aileron would have SgnDup = -1\nControl derivatives will be generated for all control variables which are declared.\nMore than one variable can contribute to the motion at a section. For example, for the successive decla-\nrations\n13\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nCONTROL\naileron 1.0 0.7 0. 1. 0. -1.0\nCONTROL\nflap 0.3 0.7 0. 1. 0. 1.0"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 541,
      "end_line": 600,
      "text": "the overall deflection will be\ncontrol surface deflection = 1.0\u2217aileron+0.3\u2217flap\nThe same control variable can be used on more than one surface. For example the wing sections might\nhave\nCONTROL\nflap 0.3 0.7 0. 1. 0. 1.0\nand the horizontal tail sections might have\nCONTROL\nflap 0.03 0.5 0. 1. 0. 1.0\nwith the latter simulating 10:1 flap -\u00bf elevator mixing.\nA partial-span control surface is specified by declaring CONTROL data only at the sections where the\ncontrol surface exists, including the two end sections. For example, the following wing defined with three\nsections (i.e. two panels) has a flap over the inner panel, and an aileron over the outer panel.\nSECTION\n0.0 0.0 0.0 2.0 0.0 | Xle Yle Zle Chord Ainc\nCONTROL\nflap 1.0 0.80 0. 0. 0. 1 | name, gain, Xhinge, XYZhvec,\nSgnDup\nSECTION\n0.0 8.0 0.0 2.0 0.0 | Xle Yle Zle Chord Ainc\nCONTROL\nflap 1.0 0.80 0. 0. 0. 1 | name, gain, Xhinge, XYZhvec,\nSgnDup\nCONTROL\naileron 1.0 0.85 0. 0. 0. -1 | name, gain, Xhinge, XYZhvec,\nSgnDup\nSECTION\n0.2 12.0 0.0 1.5 0.0 | Xle Yle Zle Chord Ainc\nCONTROL\naileron 1.0 0.85 0. 0. 0. -1 | name, gain, Xhinge, XYZhvec,\nSgnDup\nThe control gain for a control surface does not need to be equal at each section. Spanwise stations\nbetween sections receive a gain which is linearly interpolated from the two bounding sections. This allows\nspecification of flexible-surface control systems. For example, the following surface definition models wing\nwarping which is linear from root to tip. Note that the \u201dhinge\u201d is at x/c=0.0, so that the entire chord\nrotates in response to the aileron deflection.\n14\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nSECTION\n0.0 0.0 0.0 2.0 0.0 | Xle Yle Zle Chord Ainc\nCONTROL\naileron 0.0 0. 0. 0. 0. -1 | name, gain, Xhinge, XYZhvec,\nSgnDup\nSECTION\n0.2 12.0 0.0 1.5 0.0 | Xle Yle Zle Chord Ainc\nCONTROL\naileron 1.0 0. 0. 0. 0. -1 | name, gain, Xhinge, XYZhvec,\nSgnDup\nNon-symmetric control effects, such as Aileron Differential, can be specified by a non-unity SgnDup mag-\nnitude. For example,\nSECTION\n0.0 6.0 0.0 2.0 0.0 | Xle Yle Zle Chord Ainc\nCONTROL\naileron 1.0 0.7 0. 0. 0. -2.0 | name, gain, Xhinge, XYZhvec,\nSgnDup\nSECTION\n0.0 10.0 0.0 2.0 0.0 | Xle Yle Zle Chord Ainc\nCONTROL\naileron 1.0 0.7 0. 0. 0. -2.0 | name, gain, Xhinge, XYZhvec,\nSgnDup"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 601,
      "end_line": 660,
      "text": "will result in the duplicated aileron having a deflection opposite and 2.0 times larger than the defined\naileron. Note that this will have the proper effect only in one direction. In the example above, the two\naileron surfaces deflect as follows:\nRight control surface:1.0\u2217aileron = 1.0\u2217aileron\nLeft control surface:1.0\u2217aileron\u2217(\u22122.0) = \u22122.0\u2217aileron\nwhich is the usual way Aileron Differential is implemented if \u201daileron\u201d is positive. To get the same effect\nwith a negative \u201caileron\u201d control change, the definitions would have to be as follows.\nSECTION\n0.0 6.0 0.0 2.0 0.0 | Xle Yle Zle Chord Ainc\nCONTROL\naileron 2.0 0.7 0. 0. 0. -0.5 | name, gain, Xhinge, XYZhvec,\nSgnDup\nSECTION\n0.0 10.0 0.0 2.0 0.0 | Xle Yle Zle Chord Ainc\nCONTROL\naileron 2.0 0.7 0. 0. 0. -0.5 | name, gain, Xhinge, XYZhvec,\nSgnDup\n15\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nThis then gives:\nRight control surface:2.0\u2217aileron = \u22122.0\u2217(\u2212aileron)\nLeft control surface:2.0\u2217aileron\u2217(\u22120.5) = 1.0\u2217(\u2212aileron)\nwhich is the correct mirror image of the previous case if \u201caileron\u201d is negative.\nCLAF | (keyword)\nCLaf | dCL/da scaling factor\nThis scales the effective dc /d of the section airfoil as follows:\nl a\ndcl\n= 2\u03c0C af\nL\nda\nThe implementation is simply a chordwise shift of the control point relative to the bound vortex on each\nvortex element.\nThe intent is to better represent the lift characteristics of thick airfoils, which typically have greater dc /d\nl a\nvalues than thin airfoils. A good estimate for C from 2D potential flow theory is\nL\naf\nt\nC = 1+0.77\nL\naf c\nwhere t/c is the airfoil\u2019s thickness/chord ratio. In practice, viscous effects will reduce the 0.77 factor to\nsomething less. Wind tunnel airfoil data or viscous airfoil calculations should be consulted before choosing\na suitable C value.\nL\naf\nIf the CLAF keyword is absent for a section, C defaults to 1.0, giving the usual thin-airfoil lift slope\nL\naf\ndcl/da = 2\u03c0.\nCDCL | (keyword)\nCL1 CD1 CL2 CD2 CL3 CD3 | CD(CL) function parameters\nThe CDCL keyword specifies a simple profile-drag CD(CL) function for this section. The function is\nparabolic between CL1..CL2 and CL2..CL3, with rapid increases in CD below CL1 and above CL3. See\nthe SUBROUTINE CDCL header (in cdcl.f) for more details.\nThe CD-CL polar is based on a simple interpolation with four CL regions:\n1) negative stall region\n2) parabolic CD(CL) region between negative stall and the drag minimum\n3) parabolic CD(CL) region between the drag minimum and positive stall"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 661,
      "end_line": 720,
      "text": "4) positive stall region\n16\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nCLpos,CDpos <- Region 4 (quadratic above CLpos)\nCL | pt3--------\n| /\n| | <- Region 3 (quadratic above CLcdmin)\n| pt2 CLcdmin,CDmin\n| |\n| \\ <- Region 2 (quadratic below CLcdmin)\n| pt1_________\n| CLneg,CDneg <- Region 1 (quadratic below CLneg)\n|\n-------------------------\nCD\nThe CD(CL) function is interpolated for stations in between defining sections. Hence, the CDCL dec-\nlaration on any surface must be used either for all sections or for none (unless the SURFACE CDCL is\nspecified).\n5.3.2 Body-definition Keywords and Data Formats\nBODY | (keyword)\nFuselage | body name string\n15 1.0 | Nbody Bspace\nThe BODY keyword declares that a body is being defined until the next SURFACE or BODY keyword,\nor the end of file is reached. A body is modeled with a source+doublet line along its axis, in accordance\nwith slender-body theory.\nNbody = number of source-line nodes\nBspace = lengthwise node spacing parameter (described later)\nYDUPLICATE | (keyword)\n0.0 | Ydupl\nSCALE | (keyword)\n1.0 1.0 0.8 | Xscale Yscale Zscale\nTRANSLATE | (keyword)\n10.0 0.0 0.5 | dX dY dZ\nSame functions as for a surface, described earlier.\nBFILE X1 X2 | (keyword) [ optional x/c range ]\nfilename | filename string\nThis specifies the shape of the body as an \u201dairfoil\u201d file which gives the top or side view of the body, which\nis assumed to have a round cross-section. Hence, the diameter of the body is the difference between the\ntop and bottom Y values. Bodies which are not round must be approximated with an equivalent round\nbody which has roughly the same cross-sectional areas. If the path/filename has embedded blanks double\n17\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nquotes should be used to delimit the string.\nIf present, the optional X1 X2 numerical parameters indicate that only the x/c range X1..X2 from the\ncoordinates is to be assigned to the surface. If the body is to be defined using only the 0-80% chord points,\nfor example, then X1 X2 would be 0.0 0.80. This allows the body shape to be truncated if needed.\nIf omitted, X1, X2 default to 0.0, 1.0, which indicates that the entire \u201cairfoil\u201d is used to define the shape\nas usual.\n5.4 Vortex Lattice Spacing Distributions\nDiscretization of the geometry into vortex lattice panels is controlled by the spacing parameters described\nearlier: Sspace, Cspace, Bspace\nThese must fall in the range -3.0 ... +3.0 , and they determine the spanwise and lengthwise horseshoe\nvortex or body line node distributions as follows:\nparameter spacing\n--------- -------\n3.0 equal | | | | | | | | |\n2.0 sine || | | | | | | |\n1.0 cosine || | | | | | ||\n0.0 equal | | | | | | | | |\n-1.0 cosine || | | | | | ||"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 721,
      "end_line": 780,
      "text": "-2.0 -sine | | | | | | | ||\n-3.0 equal | | | | | | | | |\nSspace (spanwise) : first section ==> last section\nCspace (chordwise) : leading edge ==> trailing edge\nBspace (lengthwise): frontmost point ==> rearmost point\nAn intermediate parameter value will result in a blended distribution.\nThe most efficient distribution (best accuracy for a given number of vortices) is usually the cosine (1.0)\nchordwise and spanwise. If the wing does not have a significant chord slope discontinuity at the centerline,\nsuch as a straight, elliptical, or slightly tapered wing, then the -sine (-2.0) distribution from root to tip will\nbe more efficient. This is equivalent to a cosine distribution across the whole span. The basic rule is that a\ntight chordwise distribution is needed at the leading and trailing edges, and a tight spanwise distribution\nis needed wherever the circulation is changing rapidly, such as taper breaks, and especially at flap breaks\nand wingtips.\nThe tables below show the accuracy superiority of the cosine spacing over uniform spacing, at least for a\nsimple wing planform. With cosine spacing, a much smaller number of vortex elements is needed to reach\nthe desired limiting answer to within a given tolerance. Note also that the uniform spacing always tends\nto overpredict the span efficiency, and its error decreases only linearly with the number of elements in each\ndirection.\n18\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nPanel refinement study\nRectangular wing\n# Cosine spacing in C and S\n#\n#1/Ni Ni Nj CL CDi CLff CDiff e e_error\n#\n1 1 4 4.18875 0.05807 4.19383 0.05829 0.9605 +0.09 %\n0.5 2 8 4.20951 0.05872 4.21465 0.05893 0.9595 -0.01 %\n0.25 4 16 4.21151 0.05876 4.21665 0.05898 0.9596 -0.00 %\n0.125 8 32 4.21184 0.05835 4.21695 0.05899 0.9596 0.00 %\n# Uniform spacing in C and S\n#\n#1/Ni Ni Nj CL CDi CLff CDiff e e_error\n#\n1 1 4 4.45637 0.05797 4.46144 0.05819 1.0887 +13.45 %\n0.5 2 8 4.35198 0.05894 4.35713 0.05917 1.0213 +6.43 %\n0.25 4 16 4.28694 0.05903 4.29211 0.05926 0.9896 +3.13 %\n0.125 8 32 4.25067 0.05895 4.25583 0.05917 0.9744 +1.54 %\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nAnumberofvortex-spacingrulesmustbefollowedtogetgoodresultsfromAVL,oranyothervortex-lattice\nmethod:\n1) In a standard VL method, a trailing vortex leg must not pass close to a downstream control point,\nelse the solution will be garbage. In practice, this means that surfaces which are lined up along the x\ndirection (i.e. have the same or nearly the same y,z coordinates), MUST have the same spanwise vortex\nspacing. AVL relaxes this requirement by employing a finite core size for each vortex on a surface which\nis influencing a control point in another aurface (unless the two surfaces share the same COMPONENT\ndeclaration). This feature can be disabled by setting the core size to zero in the OPER sub-menu, Option\nsub-sub-menu, command C. This reverts AVL to the standard VL method.\n2) Spanwise vortex spacings should be \u201csmooth\u201d, with no sudden changes in spanwise strip width.\nAdjust Nspan and Sspace parameters to get a smooth distribution. Spacing should be bunched at dihedral\nandchordbreaks,controlsurfaceends,andespeciallyatwingtips. Ifasinglespanwisespacingdistribution\nis specified for a surface with multiple sections, then AVL will fudge the spanwise distribution as needed\nto ensure that a point falls exactly on the section location. Increase the number of spanwise points if the\nspanwise spacing looks ragged because of this fudging.\n3) If a surface has a control surface on it, an adequate number of chordwise vortices Nchord should be\nusedtoresolvethediscontinuityinthecamberlineangleatthehingeline. Itispossibletodefinethecontrol\nsurface as a separate SURFACE entity. Cosine chordwise spacings then produce bunched points exactly\nat the hinge line, giving the best accuracy. The two surfaces must be given the same COMPONENT and\nthe same spanwise point spacing for this to work properly. Such extreme measures are rarely necessary in"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 781,
      "end_line": 840,
      "text": "practice, however. Using a single surface with extra chordwise spacing is usually sufficient.\n4) When attempting to increase accuracy by using more vortices, it is in general necessary to refine the\n19\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nvortex spacings in both the spanwise AND in the chordwise direction. Refining only along one direction\nmay not converge to the correct result, especially locally wherever the bound vortex line makes a sudden\nbend, such as a dihedral break, or at the center of a swept wing. In some special configurations, such as\nan unswept planar wing, the chordwise spacing may not need to be refined at all to get good accuracy,\nbut for most cases the chordwise spacing will be significant.\n6 Mass Input File \u2013 xxx.mass\nThis optional file describes the mass and inertia properties of the configuration. It also defines units to\nbe used for run case setup. These units may want to be different than those used to define the geometry.\nSample input xxx.mass files are in the runs/ subdirectory.\n6.1 Coordinate system\nThe geometry axes used in the xxx.mass file are exactly the same as those used in the xxx.avl file.\n6.2 File format\nA sample file for an RC glider is shown below. Comment lines begin with a \u201c# \u201d. Everything after and\nincluding a \u201c!\u201d is ignored. Blank lines are ignored.\n20\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\n# SuperGee\n#\n# Dimensional unit and parameter data.\n# Mass & Inertia breakdown.\n# Names and scalings for units to be used for trim and eigenmode\ncalculations.\n# The Lunit and Munit values scale the mass, xyz, and inertia table data\nbelow.\n# Lunit value will also scale all lengths and areas in the AVL input\nfile.\nLunit = 0.0254 m\nMunit = 0.001 kg\nTunit = 1.0 s\n#-------------------------\n# Gravity and density to be used as default values in trim setup (saves\nruntime typing).\n# Must be in the unit names given above (i.e. m,kg,s).\ng = 9.81\nrho = 1.225\n#-------------------------\n# Mass & Inertia breakdown.\n# x y z is location of item\u2019s own CG.\n# Ixx... are item\u2019s inertias about item\u2019s own CG.\n#\n# x,y,z system here must be exactly the same one used in the .avl input\nfile\n# (same orientation, same origin location, same length units)\n#\n# mass x y z [ Ixx Iyy Izz Ixy Ixz Iyz ]\n* 1. 1. 1. 1. 1. 1. 1. 1. 1. 1.\n+ 0. 0. 0. 0. 0. 0. 0. 0. 0. 0.\n58.0 3.34 12.0 1.05 4400 180 4580 ! right wing\n58.0 3.34 -12.0 1.05 4400 180 4580 ! left wing\n16.0 -5.2 0.0 0.0 0 80 80 ! fuselage pod\n18.0 13.25 0.0 0.0 0 700 700 ! boom+rods\n22.0 -7.4 0.0 0.0 0 0 0 ! battery\n2.0 -2.5 0.0 0.0 0 0 0 ! jack\n9.0 -3.8 0.0 0.0 0 0 0 ! RX\n9.0 -5.1 0.0 0.0 0 0 0 ! rud servo\n6.0 -5.9 0.0 0.0 0 0 0 ! ele servo"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 841,
      "end_line": 900,
      "text": "9.0 2.6 1.0 0.0 0 0 0 ! R wing servo\n9.0 2.6 -1.0 0.0 0 0 0 ! L wing servo\n2.0 1.0 0.0 0.5 0 0 0 ! wing connector\n21\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\n1.0 3.0 0.0 0.0 0 0 0 ! wing pins\n6.0 29.0 0.0 1.0 70 2 72 ! stab\n6.0 33.0 0.0 2.0 35 39 4 ! rudder\n0.0 -8.3 0.0 0.0 0 0 0 ! nose wt.\n6.3 Units\nThe first three lines\nLunit = 0.0254 m\nMunit = 0.001 kg\nTunit = 1.0 s\ngive the magnitudes and names of the units to be used for run case setup and possibly for eigenmode\ncalculations. In this example, standard SI units (m,kg,s) are chosen. But the data in xxx.avl and xxx.mass\nis given in units of Lunit = 1 inch, which is therefore declared here to be equal to \u201d0.0254 m\u201d. If the data\nwas given in centimeters, the statement would read\nLunit = 0.01 m\nand if it was given directly in meters, it would read\nLunit = 1.0 m\nSimilarly, Munit used here in this file is the gram, but since the kilogram (kg) is to be used for run case\ncalculations, the Munit declaration is\nMunit = 0.001 kg\nIf the masses here were given in ounces, the declaration would be\nMunit = 0.02835 kg\nThe third line gives the time unit name and magnitude.\nIf any of the three unit lines is absent, that unit\u2019s magnitude will be set to 1.0, and the unit name will\nsimply remain as \u201cLunit\u201d, \u201cMunit\u201d, or \u201cTunit\u201d.\nThe moments of inertia and products of inertia components above are defined as\n(cid:90)\nI = (y2+z2)dm\nxx\n(cid:90)\nI = (x2+z2)dm\nyy\n(cid:90)\nI = (x2+y2)dm\nzz\n(cid:90)\nI = (xy)dm\nxy\n(cid:90)\nI = (xy)dm\nxz\n(cid:90)\nI = (xy)dm\nyz\n22\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nwhere the integral is over all the mass elements dm with locations x,y,z. The symmetric moment of inertia\ntensor is given in terms of these components as follows.\n\uf8ee \uf8f92 \uf8ee \uf8f9\n0 \u2212z y I \u2212I \u2212I\n(cid:90) xx xy xz\nI = \u2212 \uf8f0 z 0 \u2212x\uf8fb dm = \uf8f0\u2212I xy I yy \u2212I yz\uf8fb\n\u2212y x 0 \u2212I I I\nxz yz zz\n6.4 Constants\nThe 4th and 5th lines give the default gravitational acceleration and air density, in the units given above."
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 901,
      "end_line": 960,
      "text": "If these statements are absent, these constants default to 1.0, and will need to be changed manually at\nruntime.\n6.5 Mass, Position, and Inertia Data\nA line which begins with a \u201d*\u201d specifies multipliers to be applied to all subsequent data. If such a line is\nabsent, these default to 1. A line which begins with a \u201d+\u201d specifies added constants to be applied to all\nsubsequent data. If such a line is absent, these default to 0.\nLineswithonlynumbersareinterpretedasmass, position, andinertiadata. Eachsuchlinecontainsvalues\nfor\nmass x y z Ixx Iyy Izz Ixz Ixy Iyz\nas described in the file comments above. Note that the inertias are taken about that item\u2019s own mass\ncentroid given by x,y,z. The finer the mass breakdown, the less important these self-inertias become. The\ninertia values on each line are optional, and any ones which are absent will be assumed to be zero.\nAdditional multiplier or adder lines can be put anywhere in the data lines, and these then re-define these\nmulipliers and adders for all subsequent lines. For example:\n# mass x y z Ixx Iyy Izz Ixz\n* 1.2 1. 1. 1. 1. 1. 1. 1.\n+ 0. 0.2 0. 0. 0. 0. 0. 0.\n58.0 3.34 12.0 1.05 4400 180 4580 0. ! right wing\n58.0 3.34 -12.0 1.05 4400 180 4580 0. ! left wing\n* 1. 1. 1. 1. 1. 1. 1. 1.\n+ 0. 0. 0. 0. 0. 0. 0. 0.\n16.0 -5.2 0.0 0.0 0 80 80 0. ! fuselage pod\n18.0 13.25 0.0 0.0 0 700 700 0. ! boom+rods\n22.0 -7.4 0.0 0.0 0 0 0 0. ! battery\nData lines 1-2 have all their masses scaled up by 1.2, and their locations shifted by delta(x) = 0.2. Data\nlines 3-5 revert back to the defaults.\n7 Run-Case Save File \u2013 xxx.run\nThisfileisgeneratedbyAVLitself. Itcanbeeditedwithatexteditor,althoughthisisnotreallynecessary.\nTheparametervaluesinthefilecanbechangedusingAVL\u2019smenus, andthefilecanthenbewrittenagain.\nManipulating and using the contents of the run file will be described later.\n23\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\n8 Program Execution\nAVL is executed with the \u201cxxx\u201d descriptor as an argument:\n% avl xxx\nIf the three filenames do not obey the recommended xxx.avl xxx.run xxx.mass syntax, the full filenames\ncan be given explicitly:\n% avl avl_file run_file mass_file\nAs the data files are read and processed, a considerable data dump is displayed. If any file has a bad\nformat, the offending data line is displayed, and AVL will stop if the error is fatal.\nAfter the files are processed, the user is put into the main AVL menu:\n==========================================================\nQuit Exit program\n.OPER Compute operating-point run cases\n.MODE Eigenvalue analysis of run cases\nLOAD f Read configuration input file\nMASS f Read mass distribution file\nCASE f Read run case file\nCINI Clear and initialize run cases\nMSET i Apply mass file data to stored run case(s)\n.PLOP Plotting options\nNAME s Specify new configuration name\nAVL c>\nThe uppercase words in the menu are commands. They will also be shown in uppercase in the examples\nbelow, but they are not case sensitive when typed.\n9 OPER Routine \u2013 Flow Analysis\nThe OPER command will then bring up the main operating menu:\nOperation of run case 1/7: 0 deg. bank\n==========================================================\nvariable constraint"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 961,
      "end_line": 1020,
      "text": "------------ ------------------------\nA lpha -> CL = 0.7000\nB eta -> Cl roll mom = 0.000\nR oll rate -> pb/2V = 0.000\nP itch rate -> qc/2V = 0.000\n24\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nY aw rate -> rb/2V = 0.000\nD1 elevator -> Cm pitchmom = 0.000\nD2 rudder -> Cn yaw mom = 0.000\n------------ ------------------------\nC1 set level or banked horizontal flight constraints\nC2 set steady pitch rate (looping) flight constraints\nM odify parameters\n\"#\" select run case L ist defined run cases\n+ add new run case S ave run cases to file\n- delete run case F etch run cases from file\nN ame current run case W rite forces to file\neX ecute run case I nitialize variables\nG eometry plot T refftz Plane plot\nST stability derivatives FT total forces\nSB body-axis derivatives FN surface forces\nRE reference quantities FS strip forces\nDE design changes FE element forces\nO ptions FB body forces\nHM hinge moments\nVM strip shear,moment\n.OPER (case 1/7) c>\n9.1 Geometry Plotting\nBefore a first flow solution is attempted, the geometry should be examined in the geometry plot sub-menu,\nentered with the G command:\nG\n=========================================\nK eystroke mode V iewpoint\nA nnotate plot O ptions\nH ardcopy plot S elect surfaces\nZ oom U nzoom\nCH ordline T CA amber F\nCN tlpoint F TR ailing legs F\nBO ound leg T NO rmal vector F\nLO ading F AX es, xyz ref. T\nGeometry plot command:\n25\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nThe eight bottom commands followed by T or F are toggles, which enable/disable plotting of various stuff\nof interest. The loading vector plotting controlled by the LO toggle requires that a converged flow solution\nis available.\nThe K command enters a sub-sub menu which allows interactive rotation of the aircraft to a suitable\nviewing angle, zooming, distortion for perspective, etc.\n------------------------------------------------\nType keys in graphics window...\nL eft R ight (Azimuth )\nU p D own (Elevation)\nC lear\nZ oom on curs. N ormal size\nI ngress O utgress\nH ardcopy A nnotate plot\n...<space> to exit\n------------------------------------------------\nThese commands must be typed with the cursor in the graphics window, and their action is performed"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1021,
      "end_line": 1080,
      "text": "immediately. All other menus work in the usual text window.\n9.2 Calculation Setup\nA flow calculation involves a number of \u201coperating variables\u201d which are additional unknowns determined\nas part of the calculation. The left column in the top block of the OPER menu lists the available operating\nvariables (alpha, beta, ... rudder):\n==========================================================\nvariable constraint\n------------ ------------------------\nA lpha -> alpha = 3.000\nB eta -> beta = 0.000\nR oll rate -> pb/2V = 0.000\nP itch rate -> qc/2V = 0.000\nY aw rate -> rb/2V = 0.000\nD1 elevator -> elevator = 0.000\nD2 rudder -> rudder = 0.000\n------------ ------------------------\nand the right column gives the constraint for each variable. The default constraints are simple direct\nconstraints as shown above.\nVariables can also be constrained indirectly. For example, typing the alpha command \u201dA\u201d produces the\nlist of available constraints for selection:\nSelect command c> a\nconstraint value\n26\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\n- - - - - - - - - - - - - - - - -\n-> A alpha = 3.000\nB beta = 0.000\nR pb/2V = 0.000\nP qc/2V = 0.000\nY rb/2V = 0.000\nC CL = 0.000\nS CY = 0.000\nRM Cl roll mom = 0.000\nPM Cm pitchmom = 0.000\nYM Cn yaw mom = 0.000\nD1 elevator = 0.000\nD2 rudder = 0.000\nSelect new constraint,value for alpha c>\nThe arrow indicates the current constraint. A new constraint and value can be specified. Typing\nC 0.7\nattheabovepromptwillmakealphabeimplicitlyconstrainedbytheconditionCL=0.7, asnowindicated\nby the new main menu:\n=========================================\nvariable constraint\n------------- ----------------------\nA lpha -> CL = 0.7000\nB eta -> beta = 0.000\nR oll rate -> pb/2V = 0.000\nP itch rate -> qc/2V = 0.000\nY aw rate -> rb/2V = 0.000\nD1 elevator -> elevator = 0.000\nD2 rudder -> rudder = 0.000\n------------- ----------------------\n.\n.\nA constraint can be used no more than once.\nFor convenience, a variable, its constraint, and the constraint value can all be specified on one line at the\nOPER prompt. For example...\nD1 PM 0\nD2 YM 0"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1081,
      "end_line": 1140,
      "text": "sets the constraint on d1 (elevator) to be zero pitching moment, and the constraint on d2 (rudder) to be\nzero yawing moment. Normally, aileron is constrained by a zero rolling moment. For a rudder/elevator\naircraft, as implied by the above menu without aileron, a nonzero sideslip is determined by the zero rolling\nmoment constraint:\nB RM 0\n27\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nThis will be well-posed only if the aircraft\u2019s roll moment is sufficiently dependent on the sideslip angle (i.e.\nif it has sufficient dihedral effect).\n9.3 Flow Solution\nOnce all the appropriate constraints are set up, the solution is executed with the X command. If the\nvariable/constraint system is ill-posed, the solution probably will not converge.\n9.4 Output\nEverytimeacalculationisexecuted, theintegratedforcesaredisplayedfortheentireconfiguration. Forces\nfor the individual surfaces, strips, or vortex elements can be displayed with the FN, FS, FE commands.\nThe element force printout is rather voluminous and often not very informative. Forces on bodies can be\ndisplayed using the FB command.\nThe force and moment directions are in stability axes x,y,z, which are tilted up by the angle alpha from\nthe body axes X,Y,Z:\n\uf8ee \uf8f9 \uf8ee \uf8f9\uf8ee \uf8f9\nx cos(a) 0 sin(a) X\n\uf8f0y\uf8fb = \uf8f0 0 1 0 \uf8fb\uf8f0Y\uf8fb\nz \u2212sin(a) 0 cos(a) Z\nThe following standard normalizations are used, with Q = 0.5\u03c1V2\nF\nx\nC = drag\nD\n(QS )\nref\nF\ny\nC = side force\nY\n(QS )\nref\nF\nz\nC = lift\nL\n(QS )\nref\nM\nx\nC = roll moment\nl\n(QS B )\nref ref\nM\ny\nC = pitch moment\nm\n(QS C )\nref ref\nM\nz\nC = yaw moment\nn\n(QS B )\nref ref"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1141,
      "end_line": 1200,
      "text": "The C ,C ,C forces are positive in the direction of the x,y,z axes, respectively. The moments can be\nD Y L\ndefined in four possible ways:\nBody axes Stability axes\nGeometric X Y Z x y z\nStandard -X Y -Z -x y -z\nRates p q r p\u2019 q\u2019 r\u2019\nMoments C C C C\u2032C\u2032 C\u2032\nl m n l m n\n28\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nwith the rates and moments positive by righthand rule about the indicated axes.\nThe roll, pitch, and yaw rates (p,q,r) input from the operating menu are defined in either the body axes\nor the stability axes, depending on which is chosen in the Options sub-menu.\nIt must be pointed out that if sideslip (beta) is nonzero, then C and C are not the true \u201cdrag\u201d and\nD Y\n\u201cside-force\u201d aligned with the relative wind direction. Likewise for moments C and C . The wind-axes\nl m\ndirections are given by\n\uf8ee \uf8f9 \uf8ee \uf8f9\uf8ee \uf8f9\nx cos(b) sin(b) 0 x\n\uf8f0y\uf8fb = \uf8f0\u2212sin(b) cos(b) 0\uf8fb\uf8f0y\uf8fb\nz 0 0 1 z\nwind\n\uf8ee \uf8f9\uf8ee \uf8f9\ncos(b)cos(a) sin(b) cos(b)sin(a) X\n= \uf8f0\u2212sin(b)cos(a) cos(b) \u2212sin(b)sin(a)\uf8fb\uf8f0Y\uf8fb\n\u2212sin(a) 0 cos(a) Z\nhence\nC = C cos(b)+C sin(b)\nD D Y\nwind\nC = C cos(b)\u2212C sin(b)\nY Y D\nwind\nC = C\nL L\nwind\nC = C cos(b)+C sin(b)\nl l m\nwind\nC = C cos(b)\u2212C sin(b)\nm wind m l\nC = C\nn n\nwind\nAVLdoesnotdisplaythesewind-axesforcessincetheyarenotrelevanttostabilityandcontrolcalculations,\nanddifferfromthestability-axesforcesonlyifasteady-statesideslipispresent,suchasperhapsinasteady\nturn. TheprimaryquantityofinteresthereistheoverallL/D = CL /C = C /C ,andC\nwind D wind L D wind D wind\nis more accurately obtained from the Trefftz-Plane anyway.\nThe alternative Trefftz-Plane drag coefficient C is calculated from the wake trace in the Y-Z plane far\nDi\ndownstream. This is generally more reliable than the CD obtained from surface force integration, and is\nthe appropriate wind-axes induced drag for performance prediction.\nThe span efficiency is defined as\n(C 2+C 2) B 2\nL Y ref\ne = ;A =\n\u03c0AC S"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1201,
      "end_line": 1260,
      "text": "Di ref\nwith S being replaced by 2 S for Y-image cases (iY = 1).\nref ref sym\n9.5 Stability derivatives\nCommand ST generates the stability derivative matrix for the current conditions. Derivatives with respect\nto control variables and design parameters are also displayed if they are available.\nCommand SB generates the stability derivative matrix in the body axes (AVL\u2019s X,Y,Z coordinates).\n29\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\n9.6 Flow Results Plotting\nThe T command starts up the Trefftz Plane plot menu:\n======================================================\nY plot data vs Y\nZ plot data vs Z\nP erpendicular cl plot toggle (currently T)\nD ownwash angle plot toggle (currently T)\nL imits for plot\nR eset plot limits\nN umber surfaces toggle (currently F)\nC olor hardcopy toggle (currently F)\nA nnotate plot\nH ardcopy current plot\nZM zoom\nU nzoom\nS ize change\nTrefftz plot command:\nMost of these plot options are self-explanatory.\nThe definitions of c and perpendicular-cl (c ) are as follows:\nl lT\n2L\u2032 2\u0393\nc = \u223c\nl \u03c1V2c Vc\n2L\u2032 2\u0393\nc = \u223c\nlT \u03c1V 2c V c\nT T\nwhere\n(cid:88)\nL\u2032 = \u03c1\u0393V \u00d7l\nchord\nV = freestream speed\nV = V cos(sweep)\nT\nand \u201csweep\u201d is the local sweep angle of the surface\u2019s quarter-chord line. This quarter-chord line choice\ncan be set to any other chordwise position by the SAXFR variable in avl.f (currently set at 0.25). Both c\nl\nand c are displayed on the Trefftz-Plane plot, but for a strongly 3D geometry they must be interpreted\nlT\nwith care.\nIn the Trefftz plane context, only the lift/span loading L\u2019, or equivalently\n30\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nc c 2\u0393\nl\n=\nC (VC )\nref ref\nc c 2L\u2032\nl\n="
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1261,
      "end_line": 1320,
      "text": "C (\u03c1V2C )\nref ref\nis what matters for the overall lift and induced drag. The local c merely indicates the intensity of the\nl\nchordwise loading in the streamwise direction. But since boundary layer development doesn\u2019t depend only\non the streamwise pressure gradients, this c may or may not be a good indicator of local stall.\nl\nForhighaspectratiosweptwings,thesurfaceboundarylayerdevelopmentdependsonlyontheairfoilshape\nand the velocities projected onto the plane perpendicular to the spanwise axis (the thinner \u201cstreamwise\u201d\nairfoil shapes and streamwise pressure gradients are not significant in this case). The stall margin is then\ndescribed by the local c , which is referenced to the local wing-perpendicular dynamic pressure.\nlT\nSo to summarize the relevance of c and c :\nl lT\n* High-AR unswept surface: c , c are the same, with the conventional 2D section interpretation.\nl lT\n* High-AR swept surface: c is the correct stall indicator, provided spanwise gradients are small.\nlT\n* Strongly 3D geometry, with rapidly varying chord and/or sweep: c is probably a better indicator of\nl\nstall. c is probably meaningless.\nlT\n9.7 Trimmed Flight Condition Setup\nThe C1 command in the OPER menu enters the setup routine for level or banked trimmed horizontal\nflight. This simply provides a convenient way to set up the required constraints for OPER without\nlaborious manual calculations.\nAn aircraft mass and air properties are required. These can be provided by a mass file which is read in\nduring program startup, or from the main AVL menu.\nIf a mass file was not read in, the necessary information can be input manually here in the C1 sub-menu.\nThe C1 routine works with the following variables and trim equations:\n31\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\n\u03d5 arbitrary bank angle, positive to right\nC arbitrary C , whatever is being specified\nL L\nm mass\ng gravity acceleration\n\u03c1 air density\nS reference area, give in input file as SREF\n(cid:115)\n2mg\nV = airspeed\n\u03c1SC cos(\u03d5)\nL\nV2\nR = turn radius, positive for right turn\ngtan(\u03d5)\nV\nW = turn rate, positive for right turn\nR\np = 0 roll rate, zero for steady turn\nq = W sin(\u03d5) pitch rate, positive nose upward\nr = W cos(\u03d5) yaw rate, positive for right turn\nThese equations are evaluated if possible (if the parameters are available), and the following display/mod-\nification menu is then entered:\nSetup of trimmed run case 1/7: 0 deg. bank\n(level or banked horizontal flight)\n=================================================\nB bank angle = 0.000 deg\nC CL = 0.7000"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1321,
      "end_line": 1380,
      "text": "V velocity = 5.648 m/s\nM mass = 0.9195 kg\nD air dens. = 1.225 kg/m^3\nG grav.acc. = 9.810 m/s^2\nturn rad. = 0.000 m\nload fac. = 1.000\nX X_cg = 3.400 Lunit\nY Y_cg = 0.000 Lunit\nZ Z_cg = 0.5000 Lunit\nEnter parameter, value (or # - + N ) c>\nA parameter can be changed by giving its command and value. For example, typing\nB 20\nchanges the bank angle to 20 degrees. The equations are then immediately re-evaluated with this new\nparameter, and the menu is displayed again with the new resulting flight variables:\nSetup of trimmed run case 1/7: 0 deg. bank\n(level or banked horizontal flight)\n=================================================\n32\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nB bank angle = 20.00 deg\nC CL = 0.7000\nV velocity = 5.891 m/s\nM mass = 0.9195 kg\nD air dens. = 1.225 kg/m^3\nG grav.acc. = 9.810 m/s^2\nturn rad. = 9.719 m\nload fac. = 1.064\nX X_cg = 3.400 Lunit\nY Y_cg = 0.000 Lunit\nZ Z_cg = 0.5000 Lunit\nEnter parameter, value (or # - + N ) c>\nNote that the velocity, turn radius, and load factor have all been recomputed to match the new specified\nbank angle and the current C . In general, any parameter with a command key in the menu can be\nL\nchanged, and the others will be recomputed to match.\nThe X cg, Y cg, Z cg parameters do not enter directly into the trim calculations here, but they are used\nto set X ,Y ,Z when the VL calculation is finally executed. Hence they will affect the control\nref ref ref\ndeflections needed to enforce trim.\n9.8 Special commands\nThe special commands (# - + N) have exactly the same action as in the OPER menu. The \u201cN\u201d command\ncan be used to change the case name. For example:\nN 20 deg. bank\nA different case can be brought up just by typing its index. For example,\n5\nshows the parameters for case 5:\nSetup of trimmed run case 5/7: 40 deg. bank\n(level or banked horizontal flight)\n=================================================\nB bank angle = 40.00 deg\nC CL = 0.7000\nV velocity = 6.453 m/s\nM mass = 0.9195 kg\nD air dens. = 1.225 kg/m^3\nG grav.acc. = 9.810 m/s^2\nturn rad. = 5.059 m\nload fac. = 1.305\nX X_cg = 3.400 Lunit\nY Y_cg = 0.000 Lunit\nZ Z_cg = 0.5000 Lunit"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1381,
      "end_line": 1440,
      "text": "Enter parameter, value (or # - + N ) c>\n33\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nThecurrentcasecanbedeletedwiththe\u201d-\u201dcommand. Anewcasecanbecreatedwiththe\u201d+\u201dcommand.\n9.9 Multiple-case commands\nFrequently, it is desirable to set a parameter to one value for all run cases, such as the air density, for\nexample. Rather than repetitively switching to each run case and setting its density, e.g.\n1\nD 0.8\n2\nD 0.8\n3\nD 0.8\n.\none can set the value for ALL the run cases by typing the parameter command twice:\nDD 0.8\nThis works for all parameters in the menu, and can save considerable typing.\n9.10 Moment trim setup\nOnce the C1 trim menu is exited by just typing \u201cEnter\u201d, it may still be necessary to set up zero-moment\nconstraints for the various control deflections. The C1 menu cannot do this for the user, since it has no\nway of knowing what each control variable does.\n9.11 Execution\nExecution after the C1 trim setup is performed with the X command as usual. It is easy to compute each\nrun case that is set up simply by typing its integer index, followed by X. For example,\n1\nX\n2\nX\n.\n.\nAny one computed run case can of course be examined via the listings or plotting.\nAlternatively, one can issue the XX command, which will converge ALL the run cases. It is a good idea\nto converge all the cases in this manner before saving the run case file with the S command, so that the\nconverged parameter values go into the xxx.run file.\n9.12 Looping-Flight Condition Setup\nThe C2 command in the OPER menu allows a convenient way to set up constraints required to achieve\na specified looping flight. The necessary AVL parameters are computed using the following variables and\nequations:\n34\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nC arbitrary C , whatever is being specified\nL L\nm mass\ng gravity acceleration\n\u03c1 air density\nR turn radius\nN load factor\nS reference area, given in input file as SREF\n2m\nR =\n\u03c1SC\nL\n0.5\u03c1V2SC\nL\nN =\nmg\np = 0 roll rate\nV\nq = pitch rate\nR"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1441,
      "end_line": 1500,
      "text": "r = 0 yaw rate\nThese equations are evaluated if possible (if the parameters are available), and the following display/mod-\nification menu is then entered:\nSetup of trimmed run case 1/7: looping flight\n(steady pitch rate - looping flight)\n=================================================\nC CL = 0.7000\nV velocity = 5.648 m/s\nM mass = 0.9195 kg\nD air dens. = 1.225 kg/m^3\nG grav.acc. = 9.810 m/s^2\nR turn rad. = 3.324 m\nL load fac. = 1.000\nX X_cg = 3.400 Lunit\nY Y_cg = 0.000 Lunit\nZ Z_cg = 0.5000 Lunit\nEnter parameter, value (or # - + N ) c>\nThe procedure here is the same as with the C1 menu. Any parameter can be specified, and the remaining\nones are computed to match. The case is then executed in the OPER menu with the X command.\n9.13 Parameter Modification Menu\nThe M command enters the general parameter modification sub-menu:\nParameters of run case 1/7: 0 deg. bank\nB bank = 0.000 deg\nE elevation = 0.000 deg\nMA Mach no. = 0.000\n35\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nV velocity = 5.648 m/s\nD air dens. = 1.225 kg/m^3\nG grav.acc. = 9.810 m/s^2\nM mass = 0.9195 kg\nIX Ixx = 0.2052 kg-m^2\nIY Iyy = 0.7758E-01 kg-m^2\nIZ Izz = 0.2790 kg-m^2\nX X_cg = 3.400 Lunit\nY Y_cg = 0.000 Lunit\nZ Z_cg = 0.5000 Lunit\nCD CDo = 0.1700E-01\nLA dCL_a = 0.000\nLU dCL_u = 0.000\nMA dCM_a = 0.000\nMU dCM_u = 0.000\nEnter parameter, value (or # - + N ) c>\nThis is in effect a \u201ddumb\u201d version of the C1 and C2 sub-menus. It simply accepts new parameter values\nwithout trying to apply any trim equations. Only a few of these parameters, such as Mach and XYZ cg\nwill affect OPER\u2019s solution calculation. The remaining parameters are used for eigenmode calculations\ndescribed next.\nTyping a command twice will apply the parameter value to all operating points. Examples:\nBB 20 (set bank to 20 deg for all points)\nMAMA 0.5 (set Mach number to 0.5 for all points)\n9.14 Run Case File Contents\nA run case file can be listed to show its contents. One case block in the file is shown below:\nRun case 1: VIAS=220 mph\nalpha -> alpha = 4.00000\nbeta -> beta = 0.00000\npb/2V -> pb/2V = 0.00000\nqc/2V -> qc/2V = 0.00000\nrb/2V -> rb/2V = 0.00000\nflap -> flap = 0.00000\naileron -> Cl roll mom = 0.00000"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1501,
      "end_line": 1560,
      "text": "elevator -> Cm pitchmom = 0.00000\nrudder -> Cn yaw mom = 0.00000\nalpha = 2.31230 deg\nbeta = 0.00000 deg\npb/2V = 0.00000\nqc/2V = -0.361446E-15\nrb/2V = 0.00000\n36\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nCL = 0.312309\nCDo = 0.420000E-01\nbank = 0.00000 deg\nelevation = 0.00000 deg\nheading = 0.00000 deg\nMach = 0.00000\nvelocity = 312.000 ft/s\ndensity = 0.176000E-02 slug/ft^3\ngrav.acc. = 32.0000 ft/s^2\nturn_rad. = 0.00000 ft\nload_fac. = 1.00000\nX_cg = 2.42374\nY_cg = 0.00000\nZ_cg = -0.103875\nmass = 800.000 slug\nIxx = 121787. slug-ft^2\nIyy = 59146.4 slug-ft^2\nIzz = 173515. slug-ft^2\nIxy = -0.113010E-03 slug-ft^2\nIyz = 0.00000 slug-ft^2\nIzx = 1621.01 slug-ft^2\nvisc CL_a = 0.00000\nvisc CL_u = 0.00000\nvisc CM_a = 0.00000\nvisc CM_u = 0.00000\nTheuppersub-blockspecifiestheconstraintassociatedwitheachoperatingparameter, andisexactlywhat\nappears at the top of the OPER menu.\nThe lower sub-block simply lists all the current parameter values. If this run case was not converged\nbefore the run case file was written, the operating parameter values may not correspond to the specified\nconstraints. For example, the top constraint\nalpha -> alpha = 4.00000\nindicates that alpha is to be driven to 4.0 degrees, so the alpha value line\nalpha = 2.31230 deg\nis not \u201dup to date\u201d. The C value line\nL\nCL = 0.312309\nis therefore probably not up to date either. Such \u201cstale\u201d parameter values may or may not be of conse-\nquence. A stale alpha or CL value doesn\u2019t matter, since the run case will always be converged before it is\nused for plotting, listing output, or eigenmode analysis. In any case, issuing the XX command in OPER\nbefore saving the run case file will ensure that alpha and CL are up to date.\nThe dimensional parameter values related to the aircraft mass, e.g.\ndensity = 1.22500 kg/m^3\ngrav.acc. = 9.81000 m/s^2\nX_cg = 2.95775\n37\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nY_cg = 0.00000\nZ_cg = 0.609524\nmass = 0.231000 kg\nIxx = 0.165803E-01 kg-m^2\nIyy = 0.113692E-01 kg-m^2"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1561,
      "end_line": 1620,
      "text": "Izz = 0.278108E-01 kg-m^2\nIxy = 0.304560E-10 kg-m^2\nIyz = -0.135360E-10 kg-m^2\nIzx = -0.362168E-03 kg-m^2\nmay also be \u201cstale\u201d if the mass file which was used to create this data has since been modified. The stale\ndata can be changed to reflect the new mass file using the MSET command at top level.\nFinally, the velocity, turn radius, and load factor data,\nvelocity = 5.42671 m/s\nturn_rad. = 0.00000 m\nload_fac. = 1.00000\nwhich depends on the mass file as well as the CL, will probably need to be updated is the mass file is\nchanged. This can be done manually, or by using the C1 or C2 trim menus of OPER.\n10 MODE Routine \u2013 Eigenmode Analysis\nAVL has the capability to perform eigenmode analysis and display the results in a number of ways.\nMeaningful use of this facility requires that a realistic configuration is defined, along with realistic mass,\ninertia, and CG data. The mass, inertia, and CG data can be input directly (in OPER\u2019s C1,C2, or M\nsubmenus), or obtained from a xxx.mass file.\nOne or more trimmed run cases must also be first set up and checked for correctness in the OPER menu.\nThese cases can be saved to the xxx.run file from OPER, which is then read in later during AVL startup.\nAny other run case file can be read in later using the CASE command from the main menu.\nTyping MODE from the main AVL menu brings up the MODE menu, preceded by the currently-defined\nrun cases, if any.\nRun-case parameters for eigenmode analyses ...\nrun alpha beta CL CDo bank velocity density X_cg\nmass\ndeg deg deg m/s kg/m^3\nkg\n1 2.69 0.00 0.700 0.170E-01 0.00 5.65 1.23 3.40\n0.920\n2 2.69 0.00 0.700 0.170E-01 10.0 5.69 1.23 3.40\n0.920\n> 3 2.69 0.00 0.700 0.170E-01 20.0 5.83 1.23 3.40\n0.920\n4 2.69 0.00 0.700 0.170E-01 30.0 6.07 1.23 3.40\n0.920\n5 2.69 0.00 0.700 0.170E-01 40.0 6.45 1.23 3.40\n0.920\n38\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\n6 2.69 0.00 0.700 0.170E-01 50.0 7.04 1.23 3.40\n0.920\n7 2.69 0.00 0.700 0.170E-01 60.0 7.99 1.23 3.40\n0.920\n==========================================================\n\"#\" select run case for eigenmode analysis (0 = all)\nM odify parameters\nN ew eigenmode calculation\nP lot root locus\nB lowup window\nR eset to normal size\neX amine selected eigenmode\nA nnotate current plot\nH ardcopy current plot\nS ystem matrix output\nW rite eigenvalues to file\nD ata file overlay toggle\nZ oom\nU nzoom\n.MODE c>\nThe run cases serve as the baseline states about which the eigenmodes are defined. The \u201c>\u201d indicator"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1621,
      "end_line": 1680,
      "text": "in the menu above shows that run case 3 is currently the chosen baseline state. This is changed just by\ntyping the new run case index.\nTyping \u201c0\u201d (zero) makes all the cases as chosen baseline states. Computation of all their roots will then\ncreate root locii. This is useful for investigating the effect of an operating parameter (e.g. V, C ,X ,\nL cg\nbank, etc.) on the roots.\n10.1 Parameter editing\nIf the run case parameters are not correct, they can be changed with the M command.\nFor example:\nM\nParameters of run case 1/7: 0 deg. bank\nB bank = 0.000 deg\nE elevation = 0.000 deg\nMA Mach no. = 0.000\nV velocity = 5.648 m/s\n39\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nD air dens. = 1.225 kg/m^3\nG grav.acc. = 9.810 m/s^2\nM mass = 0.9195 kg\nIX Ixx = 0.2052 kg-m^2\nIY Iyy = 0.7758E-01 kg-m^2\nIZ Izz = 0.2790 kg-m^2\nX X_cg = 3.400 Lunit\nY Y_cg = 0.000 Lunit\nZ Z_cg = 0.5000 Lunit\nCD CDo = 0.1700E-01\nLA dCL_a = 0.000\nLU dCL_u = 0.000\nMA dCM_a = 0.000\nMU dCM_u = 0.000\nEnter parameter, value (or # - + N ) c>\nThis menu is the same as in OPER. Note that changing a parameter may not then represent a trimmed\nflight condition. If the baseline state is to be trimmed, as is done with traditional eigenmode analyses, the\nparameter changes are probably best performed in the C1 or C2 menu in OPER.\n10.2 CL,CM derivative modifiers\nThe LA,LU,MA,MU commands in the M menu allow specifying explicit added changes to the CL and\nCM derivatives with respect to alpha and speed. The alpha derivative modifications dC ,dC might\nLa Ma\nrepresent stall, or perhaps effects of separation bubble movement. The speed derivative modifications\ndC ,dC mightrepresentMachorReynoldsnumbereffectsonthewingortailairfoils. Thesederivative\nLu Mu\nmodifiers are used only for the eigenmode calculations in the MODE menu. They do not in any way affect\nthe analysis calculations in OPER.\n10.3 Mode calculation\nThe motion of any mode can be viewed in real time by issuing the X command, and then clicking on the\nroot symbol. This brings up the mode-view menu:\n------------------------------\nL eft R ight\nU p D own\nC lear\nZ oom N ormal size\nI ngress O utgress\nH ardcopy A nnotate\nP anning camera toggle: T\n< > 0 mode play -- real time\n- + 1 mode scale\n40\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\nS mode sign change"
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1681,
      "end_line": 1740,
      "text": "Type in plot window: Command, or <space> to exit\nAll commands must be typed with the cursor in the graphics window. The viewpoint can be set with the\nL,R,U,D,C keys, like in the geometry viewer in OPER.\nThe mode motion is rewound or advanced in time with the <and >keys (shift key is not necessary).\nHolding down these keys will play the mode forward or backward in real time. Typing 0 will jump back\nto the starting time.\nThe mode scale will decay or grow in time depending on the real part of the eigenvalue. But this can be\narbitrarily scaled up or down with the - and + keys. The 1 key sets the scale factor to a nominal \u201dnormal\u201d\nsize.\nThe P command controls the camera-panning toggle. If panning is on, the camera follows the aircraft\nat the baseline motion, so that the baseline state appears stationary. If panning is off, the baseline state\nmoves, with the eigenmode motion superimposed on top of it. Viewing either with or without panning\nmay be best, depending on the mode.\n10.4 System matrix output\nEigenmode analysis begins by considering that the unsteady flight variables U(t) consist of the steady\nbaseline state Uo plus an unsteady perturbation u(t). The control variables D are considered the same\nway.\nU(t) = U +u(t)\no\nD(t) = D +d(t)\no\nThe perturbations are governed by the following linear system:\nu\u02d9 = Au+Bd\nThe A and B system matrices depend on U and D . They can be listed with the S command from the\no o\nMODE menu. The 12 components of the u(t) vector are ordered as follows\nu x velocity (+ forward)\nw z velocity (+ down)\nq pitch rate (+ nose up)\n\u03b8 pitch angle (+ nose up)\nv y velocity (+ to right)\np roll rate (+ to right)\nr yaw rate (+ to right)\n\u03d5 roll angle (+ to right)\nx x displacement (+ forward)\ny y displacement (+ to right)\nz z displacement (+ down)\n\u03c8 heading angle (+ to right)\nThe d(t) control vector components are whatever controls were declared in the xxx.avl file, in the order\nthat they appeared.\n41\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\n11 Plotting Options\nThe top-level PLOP command produces the plot option menu, shown below with the default values. Most\nof these parameters must be changed before the first plot is made, otherwise they may not have the\nintended effect.\nG raphics-enable flag T\nC olor PostScript output? F\nI ndividual PS file output? F\nA spect ratio of plot object 0.0000\nS ize of plot object 9.00\"\nP age dimensions 11.00 x 8.50\"\nM argins from page edges 0.00\", 0.00\"\nF ont size (relative) 0.0170\nW indow/screen size fraction 0.7000\nO rientation of plot: Landscape\nB lowup input method: Keyboard\nOption, Value (or <Return>) c>\nToggling the Graphics-enable flag to F is recommended if AVL is being executed in batch mode using a\ncommand file."
    },
    {
      "path": "src/ceasiompy/PyAVL/files/avl_user_guide.pdf",
      "start_line": 1741,
      "end_line": 1779,
      "text": "11.1 Hardcopy\nAll hardcopy goes to the plot.ps file, with each H command creating a new page in the file. If a hardcopy\nfile is being created, then AVL should be exited using QUIT or Q at Top Level, otherwise the plot.ps file\nmight not be properly terminated.\n11.2 Animated GIF\nAn on-screen \u201cmovie\u201d which can be seen in MODE can be captured as an animated GIF. This requires\nan image-processing software which can convert a multi-page .ps file into the GIF. One example is the\n\u201cconvert\u201dcommandintheImageMagicksoftwarepackage. Anexamplecommandsequencewhichgenerates\nthe GIF is listed below, using the Boeing 737 case files b737.avl, b737.mass, b737.run .\n1. Create plot.ps with AVL:\n% avl b737\nMODE\nN\nX\nclick on topmost Dutch-Roll root, roughly at (-0.3,1.9)\nuse LRUD keys to rotate airplane for best view of Dutch Roll,\n(e.g. Azim,Elev = -160,15)\nplay mode by holding down > key, adjust scale with +/- keys as\nneeded,\n(reset time with 0 key)\n42\nMIT AVL User Primer - AVL 3.36 (Mark Drela, Harold Youngren)\n<space>\nG\nX\nclick on same Dutch Roll root again\nplay mode by holding down > key, for whatever length needed\n<space>\n<Enter>\nQ\n2. Edit plot.ps\nGlobally replace\n\u201c612 0 translate 90 rotate\u201d\nwith\n\u201c0 0 translate 0 rotate\u201d\nWrite new file, e.g. plot2.ps or whatever\n3. Create animated GIF:\nconvert -delay 4 -page 720x500 -border 4x4 plot2.ps plot2.gif\n43"
    },
    {
      "path": "src/ceasiompy/SMTrain/README.md",
      "start_line": 1,
      "end_line": 56,
      "text": "\n<img align=\"right\" height=\"70\" src=\"../../../documents/logos/CEASIOMpy_banner_main.png\">\n\n# SMTrain\n\n**Categories:** Optimisation, Surrogate Modeling\n\n`SMTrain` is a module to train a surrogate model,\nwith data computed using CEASIOMpy's Modules.\n\nNotion of fidelity in CFD:\n    - 1st-level: potential flow\n    - 2nd-level: euler flow\n    - 3d-level: rans flow\n\nThe computed forces and moments are getting more and more accurate through each levels (in practice).\n\nIn CEASIOMpy currently you can use:\n    - AVL for the 1st-level\n    - SU2 Euler for the 2nd-level\n    - Nothing for the 3rd-level (but there is going to be an update soon with CPACS2GMSH)\n\n## Inputs\n\n`SMTrain` takes as input a CPACS file.\n\n## Workflow\n\n`SMTrain`'s workflow in a nutshell:\n\n1. DATA for training:\n    - uniform sampling (n_samples parameter)\n    - ceasiompy.db data [optional]\n\n2. Training:\n    - Trains on 1st-level\n      - generates data using PyAVL module with the uniform-sampled parameters\n      - augments the dataset with data from ceasiompy.db\n      - trains solely on AVL results\n    - Trains on 2nd-level:\n      - using SU2Run module\n      - trains on data with high-variance points from the 1st-level in a loop until the rmse error is small enough\n    - Trains on 3rd-level (Not yet implemented due to CPACS2GMSH status)\n\n3. Saves model and all results in an aeromap\n\n## Installation or requirements\n\n`SMTrain` is a native CEASIOMpy module, hence it is available and installed by default. It is base on the [SMT: Surrogate Modeling Toolbox](https://smt.readthedocs.io/en/latest/)\n\n## Limitations\n\n1. Can not choose the range for the Hyper-parameters of the surrogate model\n\n## More information\n- [SMT: Surrogate Modeling Toolbox](https://smt.readthedocs.io/en/latest/)"
    },
    {
      "path": "src/ceasiompy/SMTrain/__specs__.py",
      "start_line": 1,
      "end_line": 60,
      "text": "\"\"\"\nCEASIOMpy: Conceptual Aircraft Design Software\n\nDeveloped by CFS ENGINEERING, 1015 Lausanne, Switzerland\n\nInitialization for SMTrain module.\n\"\"\"\n\n# Imports\n\nimport streamlit as st\n\nfrom ceasiompy.utils.ceasiompyutils import safe_remove\nfrom cpacspy.cpacsfunctions import get_value_or_default\nfrom ceasiompy.PyAVL.__specs__ import gui_settings as avl_settings\nfrom ceasiompy.SU2Run.__specs__ import gui_settings as su2_settings\nfrom ceasiompy.CPACS2GMSH.__specs__ import gui_settings as gmsh_settings\n\nfrom ceasiompy.utils.geometryfunctions import (\n    get_xpath_for_param,\n    return_uid_wings_sections,\n)\nfrom ceasiompy.utils.guiobjects import (\n    int_vartype,\n    list_vartype,\n    bool_vartype,\n    float_vartype,\n    multiselect_vartype,\n)\n\nfrom cpacspy.cpacspy import CPACS\nfrom tixi3.tixi3wrapper import Tixi3\n\nfrom ceasiompy.PyAVL import MODULE_NAME as PYAVL\nfrom ceasiompy.SU2Run import MODULE_NAME as SU2RUN\nfrom ceasiompy.CPACS2GMSH import MODULE_NAME as CPACS2GMSH\nfrom ceasiompy.SMTrain import (\n    LEVEL_TWO,\n    OBJECTIVES_LIST,\n    WING_PARAMETERS,\n    FIDELITY_LEVELS,\n    AEROMAP_FEATURES,\n    SMTRAIN_MODELS_XPATH,\n    SMTRAIN_OBJECTIVE_XPATH,\n    SMTRAIN_TRAIN_PERC_XPATH,\n    SMTRAIN_GEOM_WING_OPTIMISE,\n    SMTRAIN_FIDELITY_LEVEL_XPATH,\n    SMTRAIN_NSAMPLES_AEROMAP_XPATH,\n    SMTRAIN_NSAMPLES_GEOMETRY_XPATH,\n    SMTRAIN_SIMULATION_PURPOSE_XPATH,\n    SMTRAIN_UPLOAD_AVL_DATABASE_XPATH,\n)\n\n\n# Variable\n\ndef gui_settings(cpacs: CPACS) -> None:\n    tixi = cpacs.tixi\n\n    chosen_models = multiselect_vartype("
    },
    {
      "path": "src/ceasiompy/SMTrain/__specs__.py",
      "start_line": 61,
      "end_line": 120,
      "text": "        tixi=tixi,\n        xpath=SMTRAIN_MODELS_XPATH,\n        default_value=[\"KRG\", \"RBF\"],\n        name=\"Surrogate Model Type\",\n        description=\"Kriging (KRG) or/and Radial Basis Functions (RBF).\",\n        key=\"smtrain_chosen_model\",\n    )\n    # TODO: Make sure at least one model is always selected\n\n    if \"KRG\" in chosen_models:\n        fidelity_level = list_vartype(\n            tixi=tixi,\n            xpath=SMTRAIN_FIDELITY_LEVEL_XPATH,\n            default_value=FIDELITY_LEVELS,  # TODO: , \"Three levels\" not implemented yet\n            name=\"Range of fidelity level(s).\",\n            description=\"\"\"1st-level of fidelity (low fidelity),\n                2nd level of fidelity (low + high fidelity) on high-variance points.\n            \"\"\",\n            key=\"smtrain_fidelity_level\",\n        )\n        with st.expander(\n            label=f\"First Level (Low Fidelity, {PYAVL} Settings)\",\n            expanded=False,\n        ):\n            avl_settings(cpacs)\n        \n        if fidelity_level == LEVEL_TWO:\n            with st.expander(\n                label=f\"Second Level (High Fidelity, {CPACS2GMSH} + {SU2RUN} Settings)\", \n            ):\n                tab = st.tabs(\n                    tabs=[CPACS2GMSH, SU2RUN],\n                )\n                if tab == CPACS2GMSH:\n                    gmsh_settings(cpacs)\n                if tab == SU2RUN:\n                    su2_settings(cpacs)\n\n    else:\n        safe_remove(tixi, xpath=SMTRAIN_FIDELITY_LEVEL_XPATH)\n\n    float_vartype(\n        tixi=tixi,\n        xpath=SMTRAIN_TRAIN_PERC_XPATH,\n        default_value=0.7,\n        name=r\"% used of training data\",\n        description=\"Defining the percentage of the data to use to train the model.\",\n        key=\"smtrain_training_percentage\",\n        min_value=0.0,\n        max_value=1.0,\n    )\n\n    load_existing = list_vartype(\n        tixi=tixi,\n        default_value=[\"Run New Simulations\", \"Load Geometry Exploration Simulations\"],\n        key=\"smtrain_load_or_explore\",\n        name=\"Load Existing or Run New Simulations\",\n        description=\"Load pre-computed results from files or Generate new simulations.\",\n        xpath=SMTRAIN_UPLOAD_AVL_DATABASE_XPATH,\n    )"
    },
    {
      "path": "src/ceasiompy/SMTrain/__specs__.py",
      "start_line": 121,
      "end_line": 180,
      "text": "\n    if load_existing == \"Run New Simulations\":\n        list_vartype(\n            tixi=tixi,\n            xpath=SMTRAIN_OBJECTIVE_XPATH,\n            description=\"Objective function list for the surrogate model to predict\",\n            name=\"Objective\",\n            key=\"smtrain_objective\",\n            default_value=OBJECTIVES_LIST,\n        )\n\n        int_vartype(\n            tixi=tixi,\n            xpath=SMTRAIN_NSAMPLES_GEOMETRY_XPATH,\n            default_value=10,\n            key=\"smtrain_sample_number\",\n            name=\"Number of samples\",\n            description=\"\"\"\n                Samples corresponds to the number of distinct geometry we will run the solver on.\n            \"\"\",\n        )\n\n        xpath = SMTRAIN_GEOM_WING_OPTIMISE\n        uid_list = return_uid_wings_sections(tixi)\n        wings = sorted(set(wing_uid for (wing_uid, _) in uid_list))\n\n        st.markdown('###### Select the wings to optimise')\n        for i_wing, wing_uid in enumerate(wings):\n            default_value = True if i_wing == 0 else False\n            selected_wing_xpath = xpath + f\"/{wing_uid}\"\n            wing_optimized = bool_vartype(\n                tixi=tixi,\n                xpath=selected_wing_xpath,\n                default_value=default_value,\n                key=f\"smtrain_{wing_uid}_selected\",\n                name=f\"Wing {wing_uid=}\",\n                description=f\"Optimize wing {wing_uid=}.\",\n            )\n\n            if wing_optimized:\n                _wing_settings(\n                    tixi=tixi,\n                    xpath=xpath,\n                    uid_list=uid_list,\n                    wing_uid=wing_uid,\n                    selected_wing_xpath=selected_wing_xpath,\n                )\n    elif load_existing == \"Load Geometry Exploration Simulations\":\n        st.info(\"Whats going on ?\")\n        # uploaded_existing_simulations = st.file_uploader(\n        #     \"Upload simulations file\",\n        #     type=[\"csv\"],\n        #     key='existing_avl_results'\n        # )\n        # if uploaded_existing_simulations:\n        #     # Ensure working directory exists\n        #     working_dir = Path(st.session_state.workflow.working_dir)\n        #     working_dir.mkdir(parents=True, exist_ok=True)\n\n        #     # Save the uploaded CSV to the working directory"
    },
    {
      "path": "src/ceasiompy/SMTrain/__specs__.py",
      "start_line": 181,
      "end_line": 240,
      "text": "        #     csv_filename = 'avl_simulations_results.csv'\n        #     csv_path = working_dir / csv_filename\n        #     with open(csv_path, \"wb\") as f:\n        #         f.write(uploaded_existing_simulations.getbuffer())\n\n        #     # Load the CSV into a DataFrame and store both DataFrame\n        #     # and path in session_state\n        #     simulations_df = pd.read_csv(csv_path)\n        #     st.session_state.simulations_df = simulations_df\n        #     st.session_state.simulations_file_path = str(csv_path)\n\n        #     st.success(\"CSV copied to working directory!\")\n        #     st.write(f\"DataFrame shape: {simulations_df.shape}\")\n        #     st.dataframe(simulations_df.head())\n        #     st.write(f\"Persistent path: {csv_path}\")\n\n\ndef _wing_settings(\n    tixi: Tixi3,\n    xpath,\n    uid_list,\n    wing_uid,\n    selected_wing_xpath,\n):\n    # Sections of specific wing\n    sections = [\n        sec_uid\n        for (wng, sec_uid) in uid_list\n        if wng == wing_uid\n    ]\n    st.markdown(f\"##### \u21aa\ufe0f Sections of {wing_uid}\")\n    for i_sec, section_uid in enumerate(sections):\n        sec_left_col, sec_right_col = st.columns([2, 3])\n        sec_selected_xpath = selected_wing_xpath + f\"/{section_uid}\"\n\n        with sec_left_col:\n            default_value = True if i_sec == 0 else False\n            sec_optimized = bool_vartype(\n                tixi=tixi,\n                xpath=sec_selected_xpath,\n                key=f\"smtrain_{wing_uid}_{section_uid}_selected\",\n                description=f\"Optimize {section_uid=} of {wing_uid=}\",\n                default_value=default_value,\n                name=f\"Section {section_uid=} of {wing_uid=}\"\n            )\n\n        with sec_right_col:\n            if sec_optimized:\n                base_xpath = xpath + f\"/{wing_uid}/sections/{section_uid}/parameters\"\n                for i_param, param in enumerate(WING_PARAMETERS):\n                    params_xpath = base_xpath + f\"/{param}\"\n                    default_value = True if i_param == 0 else False\n                    status = bool_vartype(\n                        tixi=tixi,\n                        xpath=params_xpath + \"/status\",\n                        default_value=default_value,\n                        name=f\"Status of {param}\",\n                        key=f\"smtrain_{wing_uid}_{section_uid}_{param}_status\",\n                        description=f\"\"\"Choose if you want to optimize {param=}\n                            of geometry element {wing_uid=} at {section_uid=}"
    },
    {
      "path": "src/ceasiompy/SMTrain/__specs__.py",
      "start_line": 241,
      "end_line": 290,
      "text": "                        \"\"\",\n                    )\n\n                    if status:\n                        params_current_value_xpath = get_xpath_for_param(\n                            tixi=tixi,\n                            param=param,\n                            wing_uid=wing_uid,\n                            section_uid=section_uid\n                        )\n\n                        current_value = get_value_or_default(\n                            tixi=tixi,\n                            xpath=params_current_value_xpath,\n                            default_value=0.0,\n                        )\n\n                        default_min_value = 0.8 * current_value\n                        default_max_value = 1.2 * current_value\n\n                        col_min, col_val, col_max = st.columns([0.5, 0.5, 0.5])\n\n                        with col_min:\n                            float_vartype(\n                                tixi=tixi,\n                                xpath=params_xpath + \"/min_value/value\",\n                                description=f\"\"\"Define the range (1d design space) for {param=}\n                                    of geometry element {wing_uid=} at {section_uid=}\n                                \"\"\",\n                                key=f\"smtrain_{wing_uid}_{section_uid}_{param}_min_value\",\n                                default_value=default_min_value,\n                                name=f\"Minimum value of {param=}\",\n                                max_value=current_value,\n                            )\n                        with col_val:\n                            st.markdown(\"Current value:\")\n                            st.markdown(f\"<= {current_value:.3f} <=\")\n\n                        with col_max:\n                            float_vartype(\n                                tixi=tixi,\n                                xpath=params_xpath + \"/max_value/value\",\n                                description=f\"\"\"Define the range (1d design space) for {param=}\n                                    of geometry element {wing_uid=} at {section_uid=}\n                                \"\"\",\n                                key=f\"smtrain_{wing_uid}_{section_uid}_{param}_max_value\",\n                                default_value=default_max_value,\n                                name=f\"Maximum value of {param=}\",\n                                min_value=current_value,\n                            )"
    },
    {
      "path": "src/ceasiompy/SU2Run/README.md",
      "start_line": 1,
      "end_line": 60,
      "text": "<img align=\"right\" height=\"70\" src=\"../../../documents/logos/CEASIOMpy_banner_aero.png\">\n\n# SU2Run\n\n**Categories:** Aerodynamics, CFD, aeromaps, Actuator disk\n\n**State**: :heavy_check_mark:\n\n<img align=\"right\" height=\"120\" src=\"https://github.com/su2code/SU2/raw/master/Docs/logoSU2small.png\">\n\n`SU2Run` module can prepare and run calculations with the CFD code [SU2](https://su2code.github.io/). SU2 is a computational analysis and design package that has been developed to solve multiphysics analysis and optimization tasks using unstructured mesh topologies. [[1]](#Economon15)\n\n## Inputs\n\n`SU2Run` takes as input a CPACS file, the mesh must have been generated by another module. Typical workflow which includes `SU2Run` looks like:\n\n```mermaid\n  graph LR;\n      CPACS2Gmsh-->SU2Run;\n      SU2Run-->SkinFriction;\n```\n\nThe flight conditions must be defined by an aeromap from the CPACS file. Some calculation parameters can also be defined in the CPACS file (but some value will by provided by default).\n\nIf a propeller is define in the CPACS file it could be converted as an actuator disk to be included in the CFD calculation automatically. Some parameters will be available in the GUI interface.\n\n## Analyses\n\n`SU2Run` calculates aerodynamic coefficients of an aircraft for a given mesh and aeromap. It performs an Euler calculation with the SU2 code.\n\nIf a propeller is define and added as an actuator disk in the mesh, the thrust distribution will be calculated ??? theory [[2]](#Seatta). An \"ActuatorDisk.dat\" file will be create and later read by SU2.\n\nOther results can be obtained from the SU2 calculation, generally [Paraview](https://www.paraview.org/) is used to visualize the results.\n\n## Outputs\n\n`SU2Run` outputs a CPACS file with the calculated aerodynamic coefficients added into the aeromap. In the results directory, a directory named `SU2` is created during the calculation, in it you all the results files produce by SU2. Depending the parameter selected the results produce may differ.\n\n## Installation or requirements\n\n`SU2Run` is a native CEASIOMpy module, hence it is available and installed by default. To run it, you just have to be sure that you are in the CEASIOMpy Conda environment.\n\nHowever to run `SU2Run` module, SU2 must be installed on your computer. Please refer to the [CEASIOMpy installation page](../../installation/INSTALLATION.md) to see if an automatic installation script is available for your OS.\nFor more information check out the official [SU2 installation page](https://su2code.github.io/docs_v7/Installation/).\n\nWe recommend to use a recent version of SU2, with older versions you might encounter some issues with the configuration file in which options are regularly changed.\n\n## Limitations\n\nAlthough SU2 is able to run Navier-Stokes calculations, for now, `SU2Run` only supports Euler calculation, that is to say the skin friction is neglected. You can use the [`SkinFriction`](../SkinFriction/README.md) module to calculate the skin frictions (with empirical methods) afterwards and add them to the drag coefficient.\n\nIf you want to perform calculation on an aircraft with an actuator disk you must use the module `CPACS2GMSH` to create the mesh.\n\n:warning: When you run `SU2Run` module, the number of iterations is set manually, be careful to check if it is enough to reach the convergence of the aerodynamic coefficients and ideally a good reduction of the residual.\n\n:warning: The mesh convergence should also be checked. If you use a mesh too coarse, the aerodynamic coefficients might be far from the values you would expect with a finer mesh.\n\nFor unsteady simulations, it uses by default time marching : DUAL_TIME_STEPPING-2ND_ORDER.\n\n## More information"
    },
    {
      "path": "src/ceasiompy/SU2Run/README.md",
      "start_line": 61,
      "end_line": 74,
      "text": "\n* [SU2 website](https://su2code.github.io/)\n\n* [SU2 Github repository](https://github.com/su2code/SU2)\n\n* <https://en.wikipedia.org/wiki/Euler_equations_(fluid_dynamics>)\n\n* [SU2 Actuator disk](https://su2code.github.io/tutorials/ActuatorDisk_VariableLoad/)\n\n## References\n\n<a id=\"Economon15\">[1]</a> Economon and al. : SU2: An open-source suite for multiphysics simulation and design, AIAA Journal, 54(3):828-846, 2016. <http://arc.aiaa.org/doi/10.2514/1.J053813>\n\n<a id=\"Saetta20\">[2]</a> Saetta20 and al. : Implementation and validation of a new actuator disk model in SU2, SU2 Conference 2020, 10/06/2020. <https://su2foundation.org/wp-content/uploads/2021/10/SU2_paper_UniNa_withHeader-1.pdf>"
    },
    {
      "path": "src/ceasiompy/SU2Run/__specs__.py",
      "start_line": 1,
      "end_line": 60,
      "text": "\"\"\"\nCEASIOMpy: Conceptual Aircraft Design Software\n\nDeveloped by CFS ENGINEERING, 1015 Lausanne, Switzerland\n\nGUI Interface of SU2Run.\n\"\"\"\n\n# Imports\n\nimport streamlit as st\n\nfrom cpacspy.cpacsfunctions import get_value\nfrom ceasiompy.utils.ceasiompyutils import safe_remove\nfrom ceasiompy.utils.guiobjects import (\n    int_vartype,\n    list_vartype,\n    bool_vartype,\n    float_vartype,\n    dataframe_vartype,\n)\n\nfrom cpacspy.cpacspy import CPACS\n\nfrom ceasiompy.CPACS2GMSH import HAS_PENTAGROW\nfrom ceasiompy.SU2Run import (\n    EULER_OR_RANS,\n    SU2_DAMPING_DER_XPATH,\n    SU2_ROTATION_RATE_XPATH,\n    SU2_CONTROL_SURF_BOOL_XPATH,\n    SU2_CONTROL_SURF_ANGLE_XPATH,\n    SU2_CONFIG_RANS_XPATH,\n    SU2_MAX_ITER_XPATH,\n    SU2_CFL_NB_XPATH,\n    SU2_CFL_ADAPT_XPATH,\n    SU2_CFL_ADAPT_PARAM_DOWN_XPATH,\n    SU2_CFL_ADAPT_PARAM_UP_XPATH,\n    SU2_CFL_MIN_XPATH,\n    SU2_CFL_MAX_XPATH,\n    SU2_MG_LEVEL_XPATH,\n    SU2_UPDATE_WETTED_AREA_XPATH,\n    SU2_EXTRACT_LOAD_XPATH,\n    SU2_ACTUATOR_DISK_XPATH,\n    SU2_DYNAMICDERIVATIVES_BOOL_XPATH,\n    SU2_DYNAMICDERIVATIVES_TIMESIZE_XPATH,\n    SU2_DYNAMICDERIVATIVES_AMPLITUDE_XPATH,\n    SU2_DYNAMICDERIVATIVES_FREQUENCY_XPATH,\n    SU2_DYNAMICDERIVATIVES_INNERITER_XPATH,\n    SU2_TARGET_CL_XPATH,\n    SU2_FIXED_CL_XPATH,\n)\n\nfrom ceasiompy.utils.commonxpaths import (\n    PROPELLER_THRUST_XPATH,\n    PROPELLER_BLADE_LOSS_XPATH,\n    RANGE_CRUISE_MACH_XPATH,\n    RANGE_CRUISE_ALT_XPATH,\n    GEOMETRY_MODE_XPATH,\n)\n"
    },
    {
      "path": "src/ceasiompy/SU2Run/__specs__.py",
      "start_line": 61,
      "end_line": 120,
      "text": "\n# Functions\ndef gui_settings(cpacs: CPACS) -> None:\n    tixi = cpacs.tixi\n\n    if get_value(tixi, GEOMETRY_MODE_XPATH) == \"3D\":\n        with st.container(\n            border=True,\n        ):\n            default_value = EULER_OR_RANS if HAS_PENTAGROW else [\"EULER\"]\n            list_vartype(\n                tixi=tixi,\n                default_value=default_value,\n                xpath=SU2_CONFIG_RANS_XPATH,\n                name=\"Euler or RANS simulation\",\n                key=\"su2run_euler_or_rans\",\n                description=\"Running Euler or RANS calculation.\",\n            )\n\n    with st.expander(\n        label=\"Simulation Settings\",\n        expanded=True,\n    ):\n        int_vartype(\n            tixi=tixi,\n            xpath=SU2_MAX_ITER_XPATH,\n            default_value=1000,\n            name=\"Maximum iterations\",\n            key=\"max_iter\",\n            description=\"Maximum number of iterations.\",\n        )\n\n        with st.container(\n            border=True,\n        ):\n            su2_run_damping_der = bool_vartype(\n                tixi=tixi,\n                xpath=SU2_DAMPING_DER_XPATH,\n                default_value=False,\n                name=\"Damping Derivatives\",\n                key=\"su2_run_damping_der\",\n                description=\"To check if damping derivatives should be calculated or not.\",\n            )\n            if su2_run_damping_der:\n                float_vartype(\n                    tixi=tixi,\n                    xpath=SU2_ROTATION_RATE_XPATH,\n                    default_value=1.0,\n                    name=\"Damping Der. rotation rate\",\n                    key=\"damping_derivatives_rotation_rate\",\n                    description=\"Rotation rate use to calculate damping derivatives.\",\n                )\n            else:\n                safe_remove(tixi, xpath=SU2_ROTATION_RATE_XPATH)\n\n        with st.container(\n            border=True,\n        ):\n            st.markdown(\"#### CFL Settings\")\n            float_vartype("
    },
    {
      "path": "src/ceasiompy/SU2Run/__specs__.py",
      "start_line": 121,
      "end_line": 180,
      "text": "                tixi=tixi,\n                xpath=SU2_CFL_NB_XPATH,\n                default_value=1.0,\n                name=\"CFL Number\",\n                key=\"cfl_nb\",\n                description=\"CFL Number, Courant\u2013Friedrichs\u2013Lewy condition.\",\n            )\n\n            float_vartype(\n                tixi=tixi,\n                xpath=SU2_CFL_MIN_XPATH,\n                default_value=0.5,\n                name=\"CFL Minimum Value\",\n                key=\"cfl_min\",\n                description=\"CFL Minimum Value.\",\n            )\n\n            float_vartype(\n                tixi=tixi,\n                xpath=SU2_CFL_MAX_XPATH,\n                default_value=100,\n                name=\"CFL Maximum Value\",\n                key=\"cfl_max\",\n                description=\"CFL Maximum Value.\",\n            )\n\n            su2run_cfl_adapt = bool_vartype(\n                tixi=tixi,\n                xpath=SU2_CFL_ADAPT_XPATH,\n                default_value=False,\n                name=\"CFL Adaptation\",\n                key=\"su2run_cfl_adapt\",\n                description=\"CFL Adaptation.\",\n            )\n\n            if su2run_cfl_adapt:\n                with st.container(\n                    border=True,\n                ):\n                    st.markdown(\"#### CFL Adaptation Settings\")\n\n                    float_vartype(\n                        tixi=tixi,\n                        xpath=SU2_CFL_ADAPT_PARAM_DOWN_XPATH,\n                        default_value=0.5,\n                        name=\"CFL Adaptation Factor Down\",\n                        key=\"cfl_adapt_param_down\",\n                        description=\"CFL Adaptation Factor Down.\",\n                    )\n\n                    float_vartype(\n                        tixi=tixi,\n                        xpath=SU2_CFL_ADAPT_PARAM_UP_XPATH,\n                        default_value=1.5,\n                        name=\"CFL Adaptation Factor Up\",\n                        description=\"CFL Adaptation Factor Up.\",\n                        key=\"cfl_adapt_param_up\",\n                    )\n            else:\n                safe_remove(tixi, xpath=SU2_CFL_ADAPT_PARAM_DOWN_XPATH)"
    },
    {
      "path": "src/ceasiompy/SU2Run/__specs__.py",
      "start_line": 181,
      "end_line": 240,
      "text": "                safe_remove(tixi, xpath=SU2_CFL_ADAPT_PARAM_UP_XPATH)\n\n        bool_vartype(\n            tixi=tixi,\n            xpath=SU2_EXTRACT_LOAD_XPATH,\n            default_value=False,\n            name=\"Extract loads\",\n            key=\"extract_loads\",\n            description=\"Option to extract loads (forces in each point) from results.\",\n        )\n\n        int_vartype(\n            tixi=tixi,\n            xpath=SU2_MG_LEVEL_XPATH,\n            default_value=3,\n            name=\"Multigrid Level\",\n            key=\"mg_level\",\n            description=\"Multi-grid level (0 = no multigrid)\",\n        )\n\n        bool_vartype(\n            tixi=tixi,\n            xpath=SU2_UPDATE_WETTED_AREA_XPATH,\n            default_value=True,\n            name=\"Update Wetted Area\",\n            key=\"update_wetted_area\",\n            description=\"Option to update the wetted area from the latest SU2 result.\",\n        )\n\n    with st.container(\n        border=True,\n    ):\n        su2run_control_surf = bool_vartype(\n            tixi=tixi,\n            xpath=SU2_CONTROL_SURF_BOOL_XPATH,\n            default_value=False,\n            name=\"Control Surfaces\",\n            key=\"su2run_control_surf\",\n            description=\"To check if control surfaces deflections should be calculated.\",\n        )\n\n        if su2run_control_surf:\n            dataframe_vartype(\n                tixi=tixi,\n                xpath=SU2_CONTROL_SURF_ANGLE_XPATH,\n                description=\"Rotation angle of control surface.\",\n                default_value=[0.0],\n                name=\"Control Surface\",\n                key=\"su2run_ctrl_surf_deflection\",\n            )\n        else:\n            safe_remove(tixi, xpath=SU2_CONTROL_SURF_ANGLE_XPATH)\n\n    with st.container(\n        border=True,\n    ):\n        include_actuator_disk = bool_vartype(\n            tixi=tixi,\n            xpath=SU2_ACTUATOR_DISK_XPATH,\n            default_value=False,"
    },
    {
      "path": "src/ceasiompy/SU2Run/__specs__.py",
      "start_line": 241,
      "end_line": 300,
      "text": "            name=\"Include actuator disk(s)\",\n            key=\"include_actuator_disk\",\n            description=\"To check if actuator disk(s) should be included.\",\n        )\n\n        if include_actuator_disk:\n            float_vartype(\n                tixi=tixi,\n                xpath=PROPELLER_THRUST_XPATH,\n                default_value=3000,\n                name=\"Thrust\",\n                key=\"thrust\",\n                description=\"Aircraft thrust.\",\n            )\n            bool_vartype(\n                tixi=tixi,\n                xpath=PROPELLER_BLADE_LOSS_XPATH,\n                default_value=False,\n                name=\"Tip loss correction\",\n                key=\"prandtl\",\n                description=\"Enable or disable the tip loss correction of Prandtl.\",\n            )\n\n    with st.container(\n        border=True,\n    ):\n        su2run_fixed_cl = bool_vartype(\n            tixi=tixi,\n            xpath=SU2_FIXED_CL_XPATH,\n            default_value=False,\n            name=\"Fixed CL\",\n            key=\"su2run_fixed_cl\",\n            description=\"FIXED_CL_MODE parameter for SU2.\",\n        )\n\n        if su2run_fixed_cl:\n            with st.container(\n                border=True,\n            ):\n                st.markdown(\"#### Fixed CL Settings\")\n\n                float_vartype(\n                    tixi=tixi,\n                    xpath=RANGE_CRUISE_MACH_XPATH,\n                    default_value=0.78,\n                    name=\"Cruise Mach\",\n                    key=\"cruise_mach\",\n                    description=\"Aircraft cruise Mach number.\",\n                )\n\n                float_vartype(\n                    tixi=tixi,\n                    xpath=RANGE_CRUISE_ALT_XPATH,\n                    default_value=120000.0,\n                    name=\"Cruise Altitude\",\n                    key=\"cruise_alt\",\n                    description=\"Aircraft cruise altitude.\",\n                )\n\n                float_vartype("
    },
    {
      "path": "src/ceasiompy/SU2Run/__specs__.py",
      "start_line": 301,
      "end_line": 360,
      "text": "                    tixi=tixi,\n                    xpath=SU2_TARGET_CL_XPATH,\n                    default_value=1.0,\n                    name=\"Target CL value\",\n                    key=\"target_cl\",\n                    description=\"\"\"\n                        Value of CL to achieve to have a level flight with the given conditions.\n                    \"\"\",\n                )\n        else:\n            safe_remove(tixi, xpath=RANGE_CRUISE_MACH_XPATH)\n            safe_remove(tixi, xpath=RANGE_CRUISE_ALT_XPATH)\n            safe_remove(tixi, xpath=SU2_TARGET_CL_XPATH)\n\n    with st.container(\n        border=True,\n    ):\n        su2_dot_derivatives = bool_vartype(\n            tixi=tixi,\n            xpath=SU2_DYNAMICDERIVATIVES_BOOL_XPATH,\n            default_value=False,\n            name=\"Compute Dot derivatives\",\n            key=\"compute_derivatives\",\n            description=\"Computing dot derivatives.\",\n        )\n        if su2_dot_derivatives:\n            with st.container(\n                border=True,\n            ):\n                int_vartype(\n                    tixi=tixi,\n                    xpath=SU2_DYNAMICDERIVATIVES_TIMESIZE_XPATH,\n                    default_value=20,\n                    name=\"Time Size\",\n                    key=\"time_size\",\n                    description=\"Size of time vector i.e. t = 2pi * (0, 1/n-1, ..., n-2/n-1)\",\n                )\n                float_vartype(\n                    tixi=tixi,\n                    xpath=SU2_DYNAMICDERIVATIVES_AMPLITUDE_XPATH,\n                    default_value=1.0,\n                    name=\"Oscillation's amplitude\",\n                    key=\"oscillation_amplitude\",\n                    description=\"Oscillation: a * sin(w t) and a > 0\",\n                )\n                float_vartype(\n                    tixi=tixi,\n                    xpath=SU2_DYNAMICDERIVATIVES_FREQUENCY_XPATH,\n                    default_value=0.087,\n                    name=\"Oscillation's angular frequency (w)\",\n                    key=\"oscillation_frequency\",\n                    description=\"Oscillation: a * sin(w t) and w > 0\",\n                )\n                int_vartype(\n                    tixi=tixi,\n                    xpath=SU2_DYNAMICDERIVATIVES_INNERITER_XPATH,\n                    default_value=10,\n                    name=\"Maximum number of inner iterations\",\n                    key=\"inner_iter\",\n                    description=\"Maximum number of inner iterations\","
    },
    {
      "path": "src/ceasiompy/SU2Run/__specs__.py",
      "start_line": 361,
      "end_line": 389,
      "text": "                )\n        else:\n            safe_remove(tixi, xpath=SU2_DYNAMICDERIVATIVES_TIMESIZE_XPATH)\n            safe_remove(tixi, xpath=SU2_DYNAMICDERIVATIVES_AMPLITUDE_XPATH)\n            safe_remove(tixi, xpath=SU2_DYNAMICDERIVATIVES_FREQUENCY_XPATH)\n            safe_remove(tixi, xpath=SU2_DYNAMICDERIVATIVES_INNERITER_XPATH)\n\n# cpacs_inout.add_input(\n#     var_name=\"n\",\n#     var_type=float,\n#     default_value=33,\n#     unit=\"1/s\",\n#     descr=\"Propeller rotational velocity\",\n#     xpath=PROP_XPATH + \"/propeller/rotational_velocity\",\n#     gui=True,\n#     gui_name=\"Rotational velocity setting\",\n#     gui_group=\"Actuator disk\",\n# )\n# cpacs_inout.add_input(\n#     var_name=\"blades_number\",\n#     var_type=int,\n#     default_value=3,\n#     unit=None,\n#     descr=\"Number of propeller blades\",\n#     xpath=PROP_XPATH + \"/propeller/bladeNumber\",\n#     gui=True,\n#     gui_name=\"Propeller blades numbers\",\n#     gui_group=\"Actuator disk\",\n# )"
    },
    {
      "path": "src/ceasiompy/SkinFriction/README.md",
      "start_line": 1,
      "end_line": 60,
      "text": "<img align=\"right\" height=\"70\" src=\"../../../documents/logos/CEASIOMpy_banner_aero.png\">\n\n# SkinFriction\n\n**Categories:** Aerodynamics, Drag, Empirical\n\n**State**: :heavy_check_mark:\n\n`SkinFriction` module adds skin friction drag to an Aeromap calculated without it. The calculated aerodynamic coefficients do not depend on atmospheric parameters and do not include the skin friction drag. It means that for different altitudes as input you will get the same aerodynamic coefficients. Furthermore, the drag calculated with these methods is generally underestimated. You can use this module to estimate the skin friction drag from empirical formula and add it to the selected aeroMap.\n\n## Inputs\n\n`SkinFriction` only takes as input a CPACS file. It needs the wetted surface area of the aircraft, to get it you must have run `SU2Run` before this module, the result will be saved in the CPACS file.\n\n## Analyses\n\nThe formula used to estimate the skin friction drag is from the paper by Gerard W. H. van Es [[1]](#Gerard12)\n\nWith the Wetted aera S<sub>wet</sub> the span b, the aircraft velocity\nV and kinematic viscosity \u03bd we can calculate the Reynolds number Re:\n\n$Re = (S_{wet}/b) \\cdot V / \\nu$\n\nWe can now compute the skin friction coefficient from the linear regression found in the paper:\n\n$C_{fe} = 0.00258 + 0.00102 \\cdot exp(-6.28\\cdot10^{-9} \\cdot Re) + 0.00295 \\cdot exp(-2.01 \\cdot 10^{-8} \\cdot Re)$\n\nAnd finally, we can calculate the zero-lift drag coefficient with the following formula:\n\n![CD0](https://latex.codecogs.com/png.image?\\inline&space;\\small&space;\\dpi{100}\\bg{white}C_{D0}&space;=&space;C_{fe}&space;\\cdot&space;S_{wet}&space;/&space;S&space;)\n\n<!-- C_{D0} = C_{fe} \\cdot S_{wet} / S -->\n\nThen, this coefficient is added to the drag coefficient C<sub>D</sub> in the already calculated aeromap.\n\n## Outputs\n\n The output of `SkinFriction` outputs a CPACS files with a new or updated aeromap.\n\n## Installation or requirements\n\n`SkinFriction` is a native CEASIOMpy module, hence it is available and installed by default. To run it, you just have to be sure that you are in the CEASIOMpy Conda environment.\n\n## Limitations\n\n`SkinFriction` module only uses empirical formula to approximate the skin friction drag, it does not take into account the exact form of the aircraft or the surface roughness.\n\nThe equation used above should be valid in the following ranges of values:\n\n* Re (based on S<sub>wet</sub>):  35-390\u00b710<sup>6</sup> [-]\n* S<sub>wet</sub>: 120-3400 [m<sup>2</sup>]\n* S<sub>ref</sub>: 20-580 [m<sup>2</sup>]\n* b: 10\u201368 [m]\n\n## More information\n\n* <https://en.wikipedia.org/wiki/Skin_friction_drag>\n\n## References\n"
    },
    {
      "path": "src/ceasiompy/SkinFriction/README.md",
      "start_line": 61,
      "end_line": 61,
      "text": "<a id=\"Gerard12\">[1]</a> Gerard W. H. van Es, Rapid Estimation of the Zero-Lift Drag Coefficient of Transport Aircraft, Journal of Aircraft, Volume 39, Number 4,  <https://arc.aiaa.org/doi/10.2514/2.2997>"
    },
    {
      "path": "src/ceasiompy/SkinFriction/__specs__.py",
      "start_line": 1,
      "end_line": 52,
      "text": "\"\"\"\nCEASIOMpy: Conceptual Aircraft Design Software\n\nDeveloped by CFS ENGINEERING, 1015 Lausanne, Switzerland\n\nGUI Interface of SkinFriction.\n\"\"\"\n\n# Imports\nimport streamlit as st\n\nfrom cpacspy.cpacspy import CPACS\n\nfrom ceasiompy.utils.guiobjects import (\n    int_vartype,\n    float_vartype,\n)\n\nfrom ceasiompy.utils.commonxpaths import (\n    RANGE_CRUISE_ALT_XPATH,\n    RANGE_CRUISE_MACH_XPATH,\n)\n\n\n# Functions\n\ndef gui_settings(cpacs: CPACS) -> None:\n    tixi = cpacs.tixi\n\n    with st.container(\n        border=True,\n    ):\n\n        st.markdown(\"#### Cruise Settings\")\n\n        float_vartype(\n            tixi=tixi,\n            default_value=0.78,\n            description=\"Cruise mach of aircraft.\",\n            name=\"Aircraft cruise mach\",\n            xpath=RANGE_CRUISE_MACH_XPATH,\n            key=\"skinfriction_cruise_mach\",\n        )\n\n        int_vartype(\n            tixi=tixi,\n            default_value=0.78,\n            description=\"Cruise altitude of aircraft.\",\n            name=\"Aircraft cruise altitude\",\n            xpath=RANGE_CRUISE_ALT_XPATH,\n            key=\"skinfriction_cruise_altitude\",\n        )"
    },
    {
      "path": "src/ceasiompy/StaticStability/README.md",
      "start_line": 1,
      "end_line": 44,
      "text": "<img align=\"right\" height=\"70\" src=\"../../../documents/logos/CEASIOMpy_banner_mission.png\">\n\n# StaticStability\n\n**Categories:** Aerodynamics, Static, Stability\n\n**State**: :heavy_check_mark:\n\n`StaticStability` module checks the three main static stabilities, that is the sign of the slope corresponding to its stability:\n\n- Pitch moment `Cm` vs `angleOfAttack` for the longitudinal stability (negative slope means stable)\n- Yaw moment `Cn` vs `angleOfSideslip` for the directional stability (positive slope means stable)\n- Roll moment `Cl` vs `angleOfSideslip` for the lateral stability (negative slope means stable)\n\n(Names and reference system are those used by CPACS, more info [here](https://www.cpacs.de/documentation/CPACS_3_4_0_Docs/html/89b6a288-0944-bd56-a1ef-8d3c8e48ad95.htm))\n\n## Inputs\n\n`StaticStability` only takes as input a CPACS file. However the CPACS file must contained at least one aeromap. In the settings, the user can choose on which aeromap and which stability the calculation will be performed.\n\n## Analyses\n\n1. If you use the PyAVL module before the StaticStability module :\nA unique (Mach, Altitude, AoA, AoS) in the aeromap suffices to do the Static Stability analysis as the necessary derivates are already computed.\n\n2. If you are not using PyAVL, then the model does a linear regression (it assumes that the moments are linear wrt to the angles of interest). Therefore you need to add strictly more then one different angle of attack and sideslip angle in the aeromap to access the stability derivatives.\n\n## Outputs\n\nIn the results directory you can find:\n    1. a Markdown file which contains a table with the stability results (Stable/Unstable wrt to the 3 different axes) for the specific aeromap.\n    2. A longitudinal, directional and lateral html plot of the Pitch, Yaw and Roll moments wrt AoA, AoS and AoS respectively.\n\n## Installation or requirements\n\n`StaticStability` is a native CEASIOMpy module, hence it is available and installed by default. To run it, you just have to be sure that you are in the CEASIOMpy Conda environment.\n\n## Limitations\n\n`StaticStability` module makes the assumption that the pitch, roll and yaw moments are a linear function of the angle of attack and sidelip angle.\n\n## More information\n\n- <https://www.cpacs.de/documentation/CPACS_3_4_0_Docs/html/89b6a288-0944-bd56-a1ef-8d3c8e48ad95.htm>"
    },
    {
      "path": "src/ceasiompy/StaticStability/__specs__.py",
      "start_line": 1,
      "end_line": 33,
      "text": "\"\"\"\nCEASIOMpy: Conceptual Aircraft Design Software\n\nDeveloped by CFS ENGINEERING, 1015 Lausanne, Switzerland\n\nGUI Interface of StaticStability.\n\"\"\"\n\n# Imports\nimport streamlit as st\n\nfrom ceasiompy.utils.guiobjects import bool_vartype\n\nfrom cpacspy.cpacspy import CPACS\n\nfrom ceasiompy.StaticStability import STATICSTABILITY_LR_XPATH\n\n\n# Functions\ndef gui_settings(cpacs: CPACS) -> None:\n    tixi = cpacs.tixi\n\n    with st.container(\n        border=True,\n    ):\n        bool_vartype(\n            tixi=tixi,\n            name=\"Linear Regression\",\n            default_value=False,\n            xpath=STATICSTABILITY_LR_XPATH,\n            key=\"static_stability_linear_regression_bool\",\n            description=\"Use linear regression or the derivative's values\",\n        )"
    },
    {
      "path": "src/ceasiompy/ThermoData/README.md",
      "start_line": 1,
      "end_line": 46,
      "text": "<img align=\"right\" height=\"70\" src=\"../../../documents/logos/CEASIOMpy_banner_main.png\">\n\n# ThermoData\n\n**Categories:** Engine Boundary conditions\n\n**State**: :heavy_check_mark:\n\n<br />\n\n`ThermoData` is a module to provide the outlet conditions of a given engine. It can calculate different operating conditions and save the results in a text file. This module is derived starting from the OpenSource code [pyCycle](https://github.com/OpenMDAO/pycycle) developed by Eric S. Hendricks and Justin S. Gray. It can perform calculations on both turbojet and turbofan engines, with the possibility to customize the parameters. The main parameters that can be modified are: the rotational speed of the shaft/s, the temperature at the inlet of the turbine/s, the efficiency of compressor/s and turbine/s (HP and LP) and the compressor/s pressure ratio. The results are automatically written inside the configuration file of the module `SU2Run` to be able to perform the CFD calculations if needed.\n\n## Inputs\n`ThermoData` can be run on is own by giving an Aeromap that contains Altitude and Mach number with the addition of the Net force that needs to be chosen. Otherwise it can take as an input the values from `CPACS2GMSH` module.\n\n## Analyses\n`ThermoData` compute the values obtained at the engine outlet giving a \"EngineBC.dat\" file as an output. If the workflow continues with the `SU2Run` run module the results are added to the config file of SU2 to perform the simulation.\n\n## Outputs\n`ThermoData` output is the \"EngineBC.dat\" file with stored inside for the turbojet engine:\n* T_tot_out= Nozzle total temperature outlet[K],\n* T_stat_out= Nozzle static temperature outlet[K],\n* P_tot_out= Nozzle total pressure outlet [Pa],\n* P_stat_out= Nozzle static pressure outlet [Pa].\n* V_stat_out= Nozzle static velocity outlet[m/s],\n* MN_out= Nozzle Mach number outlet [adim],\n* massflow_stat_out= Nozzle massflow outlet [Kg/s]\\\\\n\nFor the turbofan engine are added also the values at the exit of the bypass nozzle.\n\n## Installation or requirements\n`ThermoData` needs the installation of the openMDAO and pycycle suite that are included in the python environment of CEASIOMpy.\n\n## Limitations\n\nTo be able to change the engine parameters other than those given as input (altitude, mach, net force) the turbojet and turbofan functions in the module must be modified by coding.\n\n## More information\n\n* [pyCycle Github repository](https://github.com/OpenMDAO/pycycle)\n\n* [OpenMDAO documentation ](https://openmdao.org/newdocs/versions/latest/main.html)\n\n* [SU2 website](https://su2code.github.io/)\n\n* [SU2 Github repository](https://github.com/su2code/SU2)"
    },
    {
      "path": "src/ceasiompy/ThermoData/__specs__.py",
      "start_line": 1,
      "end_line": 48,
      "text": "\"\"\"\nCEASIOMpy: Conceptual Aircraft Design Software\n\nDeveloped by CFS ENGINEERING, 1015 Lausanne, Switzerland\n\nGUI Interface of ThermoData.\n\"\"\"\n\n# Imports\n\nfrom ceasiompy.utils.moduleinterfaces import CPACSInOut\n\nfrom ceasiompy.SU2Run import (\n    SU2_FIXED_CL_XPATH,\n    SU2_TARGET_CL_XPATH,\n)\nfrom ceasiompy.utils.commonxpaths import (\n    RANGE_XPATH,\n    ENGINE_TYPE_XPATH,\n)\n\n# Variable\n\ncpacs_inout = CPACSInOut()\n\ncpacs_inout.add_input(\n    var_name=\"net_force\",\n    var_type=float,\n    default_value=2000,\n    unit=\"N\",\n    descr=\"Engine net force\",\n    xpath=RANGE_XPATH + \"/NetForce\",\n    gui=True,\n    gui_name=\"NetForce\",\n    gui_group=\"Cruise\",\n)\n\ncpacs_inout.add_input(\n    var_name=\"engine type\",\n    var_type=list,\n    default_value=[0, 1],\n    unit=None,\n    descr=\"0: TBJ, 1: TBF \",\n    xpath=ENGINE_TYPE_XPATH,\n    gui=True,\n    gui_name=\"0 for Turbojet 1 for Turbofan\",\n    gui_group=\"User inputs\",\n)"
    },
    {
      "path": "src/ceasiompy/VSP2CPACS/README.md",
      "start_line": 1,
      "end_line": 60,
      "text": "<img align=\"right\" height=\"70\" src=\"../../../documents/logos/CEASIOMpy_banner_aero.png\">\n\n# VSP2CPACS\n\n**Categories:** CAD, Geometry.\n\n**State:** :heavy_check_mark:\n\n`VSP2CPACS` is a CEASIOMpy module that converts aircraft geometries created in [OpenVSP](https://openvsp.org/) into the CPACS format.\n\nThe geometry is first built and saved in OpenVSP as a `.vsp3` file.  \nThis module reads the OpenVSP model and generates an equivalent CPACS representation of the aircraft.\n\n---\n\n## Inputs\n\n`VSP2CPACS` takes as input:\n- An OpenVSP geometry file (`.vsp3`)\n\nThe following OpenVSP components are currently supported:\n- Wings\n- Fuselages\n- Pods\n- Ducts (used for engine modeling)\n\nParent\u2013child relationships between components are preserved.\n\n---\n\n## Functionality\n\n`VSP2CPACS`:\n- Reads the OpenVSP geometry\n- Extracts geometric and transformation parameters\n- Converts the geometry into CPACS-compliant elements\n- Preserves component hierarchy and transformations\n\n---\n\n## Outputs\n\nThe module generates:\n- A CPACS file containing the aircraft geometry\n\nThe resulting CPACS file can be used as input for other CEASIOMpy modules for further analysis.\n\n---\n\n## Installation / Requirements\n\n`VSP2CPACS` is installed automatically as part of CEASIOMpy.\n\nFollow the standard installation procedure described in the CEASIOMpy installation guide.\n\n---\n\n## Limitations\n\n- The conversion is limited to the supported OpenVSP components."
    },
    {
      "path": "src/ceasiompy/VSP2CPACS/README.md",
      "start_line": 61,
      "end_line": 70,
      "text": "- Only geometric information is converted.\n- Some advanced OpenVSP features may not have a direct CPACS equivalent.\n- The accuracy of the conversion depends on the consistency of the OpenVSP model.\n\n---\n\n## More information\n\n- [OpenVSP website](https://openvsp.org/)\n- [CPACS documentation](https://cpacs.de/)"
    }
  ]
}